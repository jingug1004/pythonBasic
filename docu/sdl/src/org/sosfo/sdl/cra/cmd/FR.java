package org.sosfo.sdl.cra.cmd;

import org.sosfo.framework.exception.AppException;
import org.sosfo.framework.log.Log;
import org.sosfo.sdl.cra.gate.FRGATE;

/**
 * FR : 2Leg Runner Totals : 쌍,복 승식 매출액(선수 조합별 포함)
 * 
 * @author yunkidon@sosfo.or.kr
 * 
 * <pre>
 * ook at the examples
 * 
 * ++ SDL Header
 *          'FR'                          &lt; 2&gt; Message code
 *          'CRA - GWANGMYEONG             '   &lt;30&gt; Meet name
 *          '0088'                       &lt; 4&gt; Perf number
 *          'REAL'                    &lt; 4&gt; Type of Perf
 *          '01'                           &lt; 2&gt; Race numbe
 *          '0538'                       &lt; 4&gt; Message length
 * ++ SDL Data
 *          'EX '                         [ 3] Pool
 *          'O'                            [ 1] Pool Status; O:open; F:close
 *          '07'                           [ 2] Number of runner rows followed
 *          '01'                           [ 2] Row #1
 *          '07'                           [ 2] Columns (= Number of runner totals)
 *                                                 followed
 *          '..........'                     [10] xy Runner total; unit=100 Won;
 *          '0000010588'           [..] ....
 *          '0000011861'
 *          '0000012935'
 *          '0000012186'
 *          '0000012637'
 *          '0000012518'
 *          '02'                           [ 2] Row #2
 *          '07'                           [ 2] Columns (= Number of runner totals)
 *                                                 followed
 *          '0000011672'           [10] xy Runner total; unit=100 Won;
 *          '..........'                     [..] ....
 *          '0000012137'
 *          '0000012356'
 *          '0000012199'
 *          '0000011213'
 *          '0000012015'
 *          '03'
 *          '07'
 *          '0000010515'
 *          '0000012019'
 *          '..........'
 *          '0000011702'
 *          '0000010870'
 *          '0000011895'
 *          '0000010905'
 *          '04'
 *          '07'
 *          '0000012541'
 *          '0000011537'
 *          '0000011386'
 *          '..........'
 *          '0000011559'
 *          '0000010934'
 *          '0000011835'
 *          '05'
 *          '07'
 *          '0000012694'
 *          '0000011316'
 *          '0000011949'
 *          '0000011412'
 *          '..........'
 *          '0000011931'
 *          '0000012414'
 *          '06'
 *          '07'
 *          '0000013293'
 *          '0000010929'
 *          '0000012197'
 *          '0000011200'
 *          '0000012924'
 *          '..........'
 *          '0000013397'
 *          '07'
 *          '07'
 *          '0000011782'
 *          '0000011034'
 *          '0000011137'
 *          '0000010432'
 *          '0000010715'
 *          '0000011987'
 *          '..........'                       [..] ....
 *          '00000049475800'     [14] Pool total; unit=1 Won;
 *         ++ SDL Checksum
 *          '26566'                        &lt; 5&gt; Checksum
 *          
 * Message example - runner totals with betting on
 * FRCRA - GWANGMYEONG             0088REAL010538EX O070107..........0000010588000
 * 0011861000001293500000121860000012637000001251802070000011672..........000001213
 * 70000012356000001219900000112130000012015030700000105150000012019..........00000
 * 117020000010870000001189500000109050407000001254100000115370000011386..........0
 * 0000115590000010934000001183505070000012694000001131600000119490000011412.......
 * ...00000119310000012414060700000132930000010929000001219700000112000000012924...
 * .......0000013397070700000117820000011034000001113700000104320000010715000001198
 * 7..........0000004947580026566
 * 
 * FRCRA - GWANGMYEONG             0088REAL010538QU O070107..........0000013076000
 * 001402800000139440000014065000001416100000131230207....................000001349
 * 000000142690000013699000001438800000131620307..............................00000
 * 154370000015540000001257800000133920407........................................0
 * 000013875000001412300000141100507...............................................
 * ...000001425400000136110607.....................................................
 * .......00000141070707...........................................................
 * ...........0000002924320025810
 * 
 * * Message example - runner totals with betting on; runner 4 scratched 
 * FRCRA - GWANGMYEONG             0088REAL010538EX O070107..........0000010588000
 * 0011861..........00000121860000012637000001251802070000011672..........000001213
 * 7..........000001219900000112130000012015030700000105150000012019...............
 * .....0000010870000001189500000109050407.........................................
 * .............................0507000001269400000113160000011949.................
 * ...000001193100000124140607000001329300000109290000012197..........0000012924...
 * .......00000133970707000001178200000110340000011137..........0000010715000001198
 * 7..........0000003549290026145
 * 
 * FRCRA - GWANGMYEONG             0088REAL010538QU O070107..........0000013076000
 * 0014028..........0000014065000001416100000131230207....................000001349
 * 0..........0000013699000001438800000131620307...................................
 * .....0000015540000001257800000133920407.........................................
 * .............................0507...............................................
 * ...000001425400000136110607.....................................................
 * .......00000141070707...........................................................
 * ...........0000002066740025588
 * 
 * * Message example - runner totals with betting off; runner 4 scratched 
 * FRCRA - GWANGMYEONG             0088REAL010538EX F070107..........0000010588000
 * 0011861..........00000121860000012637000001251802070000011672..........000001213
 * 7..........000001219900000112130000012015030700000105150000012019...............
 * .....0000010870000001189500000109050407.........................................
 * .............................0507000001269400000113160000011949.................
 * ...000001193100000124140607000001329300000109290000012197..........0000012924...
 * .......00000133970707000001178200000110340000011137..........0000010715000001198
 * 7..........0000003549290026136
 * 
 * FRCRA - GWANGMYEONG             0088REAL010538QU F070107..........0000013076000
 * 0014028..........0000014065000001416100000131230207....................000001349
 * 0..........0000013699000001438800000131620307...................................
 * .....0000015540000001257800000133920407.........................................
 * .............................0507...............................................
 * ...000001425400000136110607.....................................................
 * .......00000141070707...........................................................
 * ...........0000002066740025579
 * 
 * 
 * </pre>
 */
public class FR extends SDL {

	public FR(String SDL) throws AppException {
		super(SDL);
	}

	/*
	 * 공통정보를 파싱하고 각 타입별 세부 정보를 파싱한다.
	 * @see org.sosfo.sdl.cra.cmd.SDLCommand#doProcess()
	 */
	public boolean doProcess() throws AppException {
		try {
			FRGATE gate = new FRGATE(sdlTray);
			return gate.insert(sdlTray);
		} catch (AppException e) {
			Log.error("ERROR", this, "at FR.doProcess() - " + e);
			throw e;
		} catch (Exception ex) {
			Log.error("ERROR", this, "at FR.doProcess() - " + ex);
			throw new AppException("", ex);
		}
	}

	public static void main(String args[]) {
		//String sdl = "FRCRA - GWANGMYEONG             0088TEST010538EX O070107..........00000105880000011861000001293500000121860000012637000001251802070000011672..........00000121370000012356000001219900000112130000012015030700000105150000012019..........00000117020000010870000001189500000109050407000001254100000115370000011386..........00000115590000010934000001183505070000012694000001131600000119490000011412..........00000119310000012414060700000132930000010929000001219700000112000000012924..........00000133970707000001178200000110340000011137000001043200000107150000011987..........0000004947580026566";
		//String sdl = "FRCHA                           0088TEST010538EX O070107..........00000105880000011861000001293500000121860000012637000001251802070000011672..........00000121370000012356000001219900000112130000012015030700000105150000012019..........00000117020000010870000001189500000109050407000001254100000115370000011386..........00000115590000010934000001183505070000012694000001131600000119490000011412..........00000119310000012414060700000132930000010929000001219700000112000000012924..........00000133970707000001178200000110340000011137000001043200000107150000011987..........0000004947580026566";
		//String sdl = "FRBUS                           0088TEST010538EX O070107..........00000105880000011861000001293500000121860000012637000001251802070000011672..........00000121370000012356000001219900000112130000012015030700000105150000012019..........00000117020000010870000001189500000109050407000001254100000115370000011386..........00000115590000010934000001183505070000012694000001131600000119490000011412..........00000119310000012414060700000132930000010929000001219700000112000000012924..........00000133970707000001178200000110340000011137000001043200000107150000011987..........0000004947580026566";
		//String sdl = "FRMRA                           0088TEST010538EX O070107..........00000105880000011861000001293500000121860000012637000001251802070000011672..........00000121370000012356000001219900000112130000012015030700000105150000012019..........00000117020000010870000001189500000109050407000001254100000115370000011386..........00000115590000010934000001183505070000012694000001131600000119490000011412..........00000119310000012414060700000132930000010929000001219700000112000000012924..........00000133970707000001178200000110340000011137000001043200000107150000011987..........0000004947580026566";
		//String sdl = "FRCRA - GWANGMYEONG             0088TEST010538QU O070107..........0000013076000001402800000139440000014065000001416100000131230207....................000001349000000142690000013699000001438800000131620307..............................00000154370000015540000001257800000133920407........................................0000013875000001412300000141100507.................................................000001425400000136110607............................................................00000141070707......................................................................0000002924320025810";
		//String sdl = "FRCHA                           0088TEST010538QU O070107..........0000013076000001402800000139440000014065000001416100000131230207....................000001349000000142690000013699000001438800000131620307..............................00000154370000015540000001257800000133920407........................................0000013875000001412300000141100507.................................................000001425400000136110607............................................................00000141070707......................................................................0000002924320025810";
		//String sdl = "FRBUS                           0088TEST010538QU O070107..........0000013076000001402800000139440000014065000001416100000131230207....................000001349000000142690000013699000001438800000131620307..............................00000154370000015540000001257800000133920407........................................0000013875000001412300000141100507.................................................000001425400000136110607............................................................00000141070707......................................................................0000002924320025810";
		//String sdl = "FRMRA                           0088TEST010538QU O070107..........0000013076000001402800000139440000014065000001416100000131230207....................000001349000000142690000013699000001438800000131620307..............................00000154370000015540000001257800000133920407........................................0000013875000001412300000141100507.................................................000001425400000136110607............................................................00000141070707......................................................................0000002924320025810";

		//String sdl = "FRMRA                           0991REAL020538EX O070107..........00000000110000000011000000001100000000110000000011000000001102070000000011..........00000000110000000011000000001100000000110000000011030700000000110000000011..........00000000110000000011000000001100000000110407000000001100000000110000000011..........00000000110000000011000000001105070000000011000000051100000005110000000011..........00000000110000000011060700000000310000000031000000003100000000310000000011..........00000000110707000000003100000000310000000031000000003100000000110000000011..........0000000016220025965";
		String sdl = "FRMRA                           0991TEST030404EX F060106............................................................0206............................................................0306............................................................0406........................................000000000700000000010506..............................0000000007..........00000000010606..............................00000000010000000001..........0000000000180018949";

		try {
			FR fr = new FR(sdl);
			fr.doProcess();
		} catch (Exception e) {
			Log.error("ERROR", "", e);
		}
	}
}
