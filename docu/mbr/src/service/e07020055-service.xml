<?xml version="1.0" encoding="EUC-KR"?>
<!-- 
월별 상금 성적 
 -->
<service name="e07020055" initial="SetResultKeys">
  <activity name="SetResultKeys" class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile" value="resultkey.properties" />
    <property name="resultKeyList" value="dsOutMonthPay|dsOutMonthPayStat|dsLastTms" />
    <transition name="success" value="EventRouter" />
  </activity>
  
  <activity name="EventRouter" class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchMonthPay"  value="searchMonthPay" />
    <transition name="saveMonthPay"    value="saveMonthPay" />
    <transition name="calcMonthPay"    value="calcMonthPay" />
    <transition name="searchLastPayTms"   value="searchLastPayTms" />
    <transition name="success" value="end" /> 
  </activity>

  <!--월별 상금 /수당/ 공제 조회   -->
  <activity name="searchMonthPay" class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" value="searchMonthPayStat" />
    <property name="resultkey" value="dsOutMonthPay" />
    <property name="sqlkey" value="tbeg_month_pay_ff001" />
    <property name="param-count" value="3" />
    <property name="param0" value="STND_YEAR"/>
    <property name="param1" value="PAY_MONTH"/>
    <property name="param2" value="RACER_NM"/>
    <property name="dao" value="boadao" />
  </activity>
  
  
  <!-- 해당월의  월별지 지급기준 상금, 회계 마감 여부 조회   -->
  <activity name="searchMonthPayStat" class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" value="end" />
    <property name="resultkey" value="dsOutMonthPayStat" />
    <property name="sqlkey" value="tbeg_month_pay_bac_ff010" />
    <property name="param-count" value="6" />
    <property name="param0" value="STND_YEAR"/>
    <property name="param1" value="STND_YEAR"/>
    <property name="param2" value="STND_YEAR"/>
    <property name="param3" value="STND_YEAR"/>
    <property name="param4" value="STND_YEAR"/>
    <property name="param5" value="PAY_MONTH"/>
    <property name="dao" value="boadao" />
  </activity>
 
  
 
  <!-- 월별 상금 성적 저장-->
  <activity name="saveMonthPay" class="snis.boa.financial.e07020055.activity.SaveMonthPay">
    <transition name="success" value="searchMonthPay" />
  </activity>
  
  
  <!-- 월별 상금 성적 계산-->
  <activity name="calcMonthPay" class="snis.boa.financial.e07020055.activity.CalcMonthPay">
    <transition name="success" value="searchMonthPay" />
  </activity>
  
  
  <!-- 회차별 경주 성적 조회   -->
  <activity name="searchLastPayTms" class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 		value="end" />
    <property name="resultkey" 		value="dsLastTms" />
    <property name="sqlkey" 		value="tbeg_month_pay_bac_ff002" />
    <property name="param-count" 	value="2" />
    <property name="param0" 		value="STND_YEAR"/>
    <property name="param1" 		value="MBR_CD"/>
    <property name="dao" 			value="boadao" />
  </activity>
  
  <transaction-manager id="tx_boa" commit="true" />
</service>

