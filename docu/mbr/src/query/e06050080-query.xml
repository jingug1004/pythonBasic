<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="e06050080 소모품 출납일보 조회 ">
	<query id="e06050080_s01" desc="리스트 조회 " fetchSize="50">
        <![CDATA[
			SELECT  /* e06050080_s01 */
			        A.SUPP_CD
			          ,B.SUPP_NM
			          ,B.SPEC
			          ,SUM(CASE WHEN IO_TYPE = '1' THEN QTY ELSE 0 END) AS IWOL_QTY
			          ,SUM(CASE WHEN IO_MM = '01' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_01
			          ,SUM(CASE WHEN IO_MM = '01' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_01
			          ,SUM(CASE WHEN IO_MM = '02' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_02
			          ,SUM(CASE WHEN IO_MM = '02' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_02
			          ,SUM(CASE WHEN IO_MM = '03' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_03
			          ,SUM(CASE WHEN IO_MM = '03' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_03
			          ,SUM(CASE WHEN IO_MM = '04' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_04
			          ,SUM(CASE WHEN IO_MM = '04' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_04
			          ,SUM(CASE WHEN IO_MM = '05' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_05
			          ,SUM(CASE WHEN IO_MM = '05' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_05
			          ,SUM(CASE WHEN IO_MM = '06' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_06
			          ,SUM(CASE WHEN IO_MM = '06' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_06
			          ,SUM(CASE WHEN IO_MM = '07' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_07
			          ,SUM(CASE WHEN IO_MM = '07' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_07
			          ,SUM(CASE WHEN IO_MM = '08' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_08
			          ,SUM(CASE WHEN IO_MM = '08' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_08
			          ,SUM(CASE WHEN IO_MM = '09' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_09
			          ,SUM(CASE WHEN IO_MM = '09' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_09
			          ,SUM(CASE WHEN IO_MM = '10' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_10
			          ,SUM(CASE WHEN IO_MM = '10' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_10
			          ,SUM(CASE WHEN IO_MM = '11' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_11
			          ,SUM(CASE WHEN IO_MM = '11' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_11
			          ,SUM(CASE WHEN IO_MM = '12' AND IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_12
			          ,SUM(CASE WHEN IO_MM = '12' AND IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_12
			          ,SUM(CASE WHEN IO_TYPE = '3' THEN QTY ELSE 0 END) AS IN_QTY_SUM
			          ,SUM(CASE WHEN IO_TYPE = '4' THEN QTY ELSE 0 END) AS OUT_QTY_SUM
			          ,SUM(CASE WHEN IO_TYPE = '1' THEN QTY  
			                          WHEN IO_TYPE = '3' THEN QTY  
			                          WHEN IO_TYPE = '4' THEN QTY * -1 ELSE 0 END) AS BALC_QTY
			FROM   (
			            SELECT SUBSTR(IO_DT,5,2) AS IO_MM
			                      ,IO_TYPE
			                      ,SUPP_CD
			                      ,SUM(QTY) AS QTY
			            FROM  TBEF_SUPP_IO
			            WHERE IO_TYPE IN ('1','3','4')
			            AND     IO_DT LIKE ?||'%'
			            GROUP BY SUBSTR(IO_DT,5,2), IO_TYPE, SUPP_CD
			            ) A, TBEF_SUPP_CD B
			WHERE A.SUPP_CD = B.SUPP_CD
			GROUP BY A.SUPP_CD
			          ,B.SUPP_NM
			          ,B.SPEC
			ORDER BY A.SUPP_CD          
             
        ]]>
    </query>                  </queryMap>