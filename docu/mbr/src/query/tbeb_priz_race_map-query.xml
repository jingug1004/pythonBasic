<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbeb_priz_race_map(대상경주매핑 )">
  
    <query id="tbeb_priz_race_map_fb001" desc="그룹정보 조회" fetchSize="10">
        <![CDATA[
            SELECT /* "tbeb_priz_race_map_fb001" IWORK_SFR-010 */
                  0 AS CHK
			      , TGC.GRP_CD      -- 그룹코드
			      , TSC.CD          -- 코드
			      , TSC.CD_NM       -- 코드명
			FROM    TBEA_GRP_CD  TGC
			      , TBEA_SPEC_CD TSC
			WHERE TGC.GRP_CD = TSC.GRP_CD
			AND   TSC.DEL_YN = 'N'
			AND   TGC.GRP_CD =  ?
			ORDER BY TSC.SORT_ODR, TSC.CD				
        ]]>
    </query>   
    
    <query id="tbeb_priz_race_map_fb002" desc="맵핑정보 조회" fetchSize="10">
        <![CDATA[
			SELECT /* "tbeb_priz_race_map_fb002" IWORK_SFR-010 */
            	    0 AS CHK
				  , TGC.GRP_CD
				  , TSC.CD
                  , TSC.CD_NM
                  , TPRM.STND_YEAR
                  , TPRM.MBR_CD
                  , TPRM.TMS
                  , TPRM.DAY_ORD
                  , RACE_NO
                  , PRIZ_RACE_NM
                  , TRDO.RACE_DAY
			FROM  TBEB_PRIZ_RACE_MAP TPRM,
            	  TBEA_GRP_CD TGC,
                  TBEA_SPEC_CD TSC,
                  TBEB_RACE_DAY_ORD TRDO
			WHERE TPRM.GRP_CD = TGC.GRP_CD
	        AND   TPRM.GRP_CD = TSC.GRP_CD
	        AND   TPRM.CD = TSC.CD
            AND   TPRM.STND_YEAR = TRDO.STND_YEAR
            AND   TPRM.MBR_CD = TRDO.MBR_CD
            AND   TPRM.TMS = TRDO.TMS
            AND   TPRM.DAY_ORD = TRDO.DAY_ORD
			AND   TPRM.GRP_CD = ?
			AND   TPRM.CD LIKE ?||'%' 
--			ORDER BY TPRM.STND_YEAR DESC, TPRM.TMS DESC, TPRM.DAY_ORD DESC, TPRM.RACE_NO DESC	
			ORDER BY TRDO.RACE_DAY DESC	
        ]]>
    </query>    
    
    <query id="tbeb_priz_race_map_ib001" desc="맵핑정보입력" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_ib001" IWORK_SFR-010 */
			INSERT INTO TBEB_PRIZ_RACE_MAP (
			      GRP_CD
			    , CD
			    , STND_YEAR
			    , MBR_CD
			    , TMS
			    , DAY_ORD
			    , RACE_NO
			    , PRIZ_RACE_NM
			    , INST_ID
			    , INST_DT
			    , UPDT_ID
			    , UPDT_DT
			) VALUES (
			      ?             -- GRP_CD
			    , ?             -- CD
			    , ?             -- STND_YEAR
			    , ?             -- MBR_CD
			    , ?             -- TMS
			    , ?             -- DAY_ORD
			    , ?             -- RACE_NO
			    , ?             -- PRIZ_RACE_NM			    
			    , ?             -- INST_ID
			    , SYSDATE       -- INST_DT
			    , ?             -- UPDT_ID
			    , SYSDATE		-- UPDT_DT
			)
        ]]>
    </query> 
    
    <query id="tbeb_priz_race_map_ub001" desc="맵핑정보수정" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_ub001" IWORK_SFR-010 */
			UPDATE TBEB_PRIZ_RACE_MAP SET 
				  PRIZ_RACE_NM 	= ? 
				, UPDT_ID 	= ?
				, UPDT_DT	= SYSDATE
			WHERE GRP_CD = ?
			AND   CD = ?
			AND   STND_YEAR = ?
			AND   MBR_CD = ?
			AND   TMS = ?
			AND   DAY_ORD = ?
			AND   RACE_NO = ?	  			
        ]]>
    </query>    

    <query id="tbeb_priz_race_map_db001" desc="맵핑정보삭제" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_db001" IWORK_SFR-010 */
			DELETE FROM TBEB_PRIZ_RACE_MAP
			WHERE GRP_CD = ?
			AND   CD = ?
			AND   STND_YEAR = ?
			AND   MBR_CD = ?
			AND   TMS = ?
			AND   DAY_ORD = ?
			AND   RACE_NO = ?
        ]]>
    </query>      
    
    <query id="tbeb_priz_race_map_ib002" desc="상세코드입력" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_ib002" IWORK_SFR-010 */
			INSERT INTO TBEA_SPEC_CD (
			      GRP_CD
			    , CD
			    , CD_NM
			    , DEL_YN
			    , INST_ID
			    , INST_DTM
			    , UPDT_ID
			    , UPDT_DTM
			    , RMK
			) VALUES (
			      ?             -- GRP_CD
			    , ?             -- CD
			    , ?             -- CD_NM
			    , 'N'           -- DEL_YN
			    , ?             -- INST_ID
			    , SYSDATE       -- INST_DTM
			    , ?             -- UPDT_ID
			    , SYSDATE       -- UPDT_DTM
			    , '대상경주매핑관리 프로그램에서 관리. 저장, 수정금지'             -- RMK
			)
        ]]>
    </query>        

    <query id="tbeb_priz_race_map_ub002" desc="상세코드수정" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_ub002" IWORK_SFR-010 */
			UPDATE TBEA_SPEC_CD SET 
				  CD_NM 	= ?
				, UPDT_ID 	= ?
				, UPDT_DTM	= SYSDATE
			WHERE GRP_CD = ?
			AND   CD     = ?
        ]]>
    </query>       

    <query id="tbeb_priz_race_map_db002" desc="상세코드삭제" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_db002" IWORK_SFR-010 */
			DELETE FROM TBEA_SPEC_CD
			WHERE GRP_CD = ?
			AND   CD     = ?
        ]]>
    </query>          

    <query id="tbeb_priz_race_map_db003" desc="맵핑정보삭제" fetchSize="10">
        <![CDATA[
        	/* "tbeb_priz_race_map_db001" IWORK_SFR-010 */
			DELETE FROM TBEB_PRIZ_RACE_MAP
			WHERE GRP_CD = ?
			AND   CD = ?
        ]]>
    </query>   
</queryMap>