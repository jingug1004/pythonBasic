<?xml version="1.0" encoding="EUC-KR"?>
<service name="common" initial="SetResultKeys">
  <activity name="SetResultKeys" class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile" value="resultkey.properties" />
    <property name="resultKeyList" value="dsOutUser|dsOutUserMn|dsLastLoginInfo|dsOutReportFilePath" />
    <transition name="success" value="EventRouter" />
  </activity>
  
  <activity name="EventRouter" class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchUser"    value="searchUser" />
    <transition name="searchUserMn"  value="searchUserMn" />
    <transition name="SaveUserTrace"   	value="SaveUserTrace" />
	<transition name="searchLastLoginInfo" value="searchLastLoginInfo" />
    <transition name="saveLoginDupChk" value="saveLoginDupChk" />
    <transition name="saveLoginPswdChk" value="saveLoginPswdChk" />
    <transition name="saveLoginPswdReset" value="saveLoginPswdReset" />
    <transition name="SavePersonalMnAccess" value="SavePersonalMnAccess" />	<!-- 개인정보 처리메뉴 접속정보 저장 -->
    <transition name="success" value="end" />
  </activity>
  
  <!-- Login 조회 -->
  <activity name="searchUser" class="snis.boa.common.util.LoginSNIS">
    <transition name="success" value="end" />
  </activity>
  
  <activity name="searchUserMn" class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" value="end" />
    <property name="resultkey" value="dsOutUserMn" />
    <property name="sqlkey" value="tbea_nm_login" />
    <property name="param-count" value="3" />
    <property name="param0" value="USER_ID" />
    <property name="param1" value="USER_ID" />
    <property name="param2" value="USER_IP" />
    <property name="dao" value="boadao" />
  </activity>
  
  <activity name="searchLastLoginInfo" class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 		value="end" />
    <property name="resultkey" 		value="dsLastLoginInfo" />
    <property name="sqlkey" 		value="last_login_time" />
    <property name="param-count" 	value="1" />
    <property name="param0" 		value="USER_ID" />
  	<property name="dao" 			value="boadao" />
  </activity>
  
  <!-- 사용자 접속정보 Update -->
  <activity name="SaveUserTrace" 		class="snis.boa.common.util.SaveUserTrace">
    <transition name="success" 			value="end" />
	<property name="dao" 				value="boadao" />
  </activity>
  
    <!-- 사용자 동시접속 Check -->
  <activity name="saveLoginDupChk" 		class="snis.boa.common.util.SaveLoginDupChk">
    <transition name="success" 			value="end" />
	<property name="dao" 				value="boadao" />
  </activity>
    
  <!-- 로그인 오류횟수 Check -->
  <activity name="saveLoginPswdChk" 	class="snis.boa.common.util.SaveLoginPswdChk">
    <transition name="success" 			value="end" />
    <property name="param-count" 	value="2" />
    <property name="param0" 		value="PSWD_CHK" />
    <property name="param1" 		value="USER_ID" />
	<property name="dao" 				value="boadao" />
	
  </activity> 
    
  <!-- 로그인 오류횟수/시간 초기화 -->
  <activity name="saveLoginPswdReset" 	class="snis.boa.common.util.SaveLoginPswdReset">
    <transition name="success" 			value="end" />
	<property name="dao" 				value="boadao" />
  </activity>
  
  <!-- 개인정보 처리메뉴 접속정보 저장 -->
  <activity name="SavePersonalMnAccess" class="snis.boa.common.util.SavePersonalMnAccess">
    <transition name="success" 			value="end" />
	<property name="dao" 				value="boadao" />
  </activity>  
  
  <transaction-manager id="tx_boa" commit="true" />
</service>

