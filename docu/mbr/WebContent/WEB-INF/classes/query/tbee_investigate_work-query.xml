<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbee_money_account(계좌 거래내역 업로드)">
	<query id="tbee_investigate_work_fe001" desc="조회" fetchSize="10">
        <![CDATA[
			SELECT	'0'	AS CHK,
					TIW.ACT_DT, 		--조사일자
					TIW.ACT_NM, 		--조사원명
					TIW.SBJT, 			--제목
					TIW.ACT_DESC, 		--활동내용
					TIW.INST_ID, 		--작성자ID
					TIW.INST_DTM, 		--작성일시
					TIW.UPDT_ID, 		--수정자ID
					TIW.UPDT_DTM		--수정일시
			FROM	TBEE_INVESTIGATE_WORK	TIW
			WHERE	TIW.ACT_DT >= NVL(?, '19000101')
			AND		TIW.ACT_DT <= NVL(?, '99990101')
			AND		(TIW.ACT_DESC LIKE '%' || ? || '%')
			ORDER BY TIW.ACT_DT DESC
        ]]>
    </query>
    <query id="tbee_investigate_work_fe002" desc="조회" fetchSize="10">
        <![CDATA[
			SELECT	'0'	AS CHK,
					0	AS GRID_ROWNUM,
					TWA.ACT_DT, 		--조사일자
					TWA.ACT_NM, 		--조사원명
					TWA.SEQ, 			--일련번호
					TWA.FILE_NM, 		--첨부파일명
					TWA.FILE_URL, 		--첨부파일 URL
					TWA.INST_ID, 		--작성자ID
					TWA.INST_DTM, 		--작성일시
					TWA.UPDT_ID, 		--수정자ID
					TWA.UPDT_DTM		--수정일시
			FROM	TBEE_WORK_ATTACH	TWA
			WHERE	TWA.ACT_DT  = ?
			AND		TWA.ACT_NM  = ?
			ORDER BY TWA.SEQ
        ]]>
    </query>
    <query id="tbee_investigate_work_ie001" desc="저장" fetchSize="10">
        <![CDATA[
        	INSERT 
				INTO	TBEE_INVESTIGATE_WORK
				(
					ACT_DT, 			--조사일자
					ACT_NM, 			--조사원명
					SBJT, 				--제목
					ACT_DESC, 			--활동내용
					INST_ID, 			--작성자ID
					INST_DTM 			--작성일시
				)
				VALUES
				(
					?, 					--조사일자
					?, 					--조사원명
					?, 					--제목
					?, 					--활동내용
					?, 					--작성자ID
					SYSDATE 			--작성일시
				)
        ]]>
    </query> 
    <query id="tbee_investigate_work_ie002" desc="저장" fetchSize="10">
        <![CDATA[
			INSERT 
				INTO TBEE_WORK_ATTACH
				(
					ACT_DT, 				--조사일자
					ACT_NM, 				--조사원명
					SEQ, 					--일련번호
					FILE_NM, 				--첨부파일명
					FILE_URL, 				--첨부파일 URL
					INST_ID, 				--작성자ID
					INST_DTM 				--작성일시
				)
			SELECT
					?, 						--조사일자
					?, 						--조사원명
					NVL(MAX(SEQ), 0) + 1,	--일련번호
					?, 						--첨부파일명
					?, 						--첨부파일 URL
					?, 						--작성자ID
					SYSDATE					--작성일시
			FROM	TBEE_WORK_ATTACH
			WHERE	ACT_DT = ?
			AND		ACT_NM = ?
        ]]>
    </query> 
    <query id="tbee_investigate_work_ue001" desc="저장" fetchSize="10">
        <![CDATA[
			UPDATE	TBEE_INVESTIGATE_WORK SET
					SBJT		= ?, 			--제목
					ACT_DESC	= ?, 			--활동내용
					UPDT_ID		= ?,			--작성자ID
					UPDT_DTM	= SYSDATE		--작성일시
			WHERE	ACT_DT		= ?				--조사일자
			AND		ACT_NM		= ?				--조사원명
        ]]>
    </query>
    <query id="tbee_investigate_work_de001" desc="저장" fetchSize="10">
        <![CDATA[
        	BEGIN
				DELETE	
				FROM	TBEE_INVESTIGATE_WORK
				WHERE	ACT_DT		= ?				--조사일자
				AND		ACT_NM		= ?;			--조사원명
				DELETE	
				FROM	TBEE_WORK_ATTACH
				WHERE	ACT_DT		= ?				--조사일자
				AND		ACT_NM		= ?;			--조사원명
			END;
        ]]>
    </query>
    <query id="tbee_investigate_work_de002" desc="저장" fetchSize="10">
        <![CDATA[
			DELETE	
			FROM	TBEE_WORK_ATTACH
			WHERE	ACT_DT		= ?				--조사일자
			AND		ACT_NM		= ?				--조사원명
			AND		SEQ			= ?				--일련번호
        ]]>
    </query>
</queryMap>