<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbeg_racer_award_his 포상금 등록 ">
	<query id="tbeg_racer_award_his_ff001" desc="포상금 조회 " fetchSize="50">
        <![CDATA[
            -- 포상금 조회  
			SELECT
				ROWNUM AS NUM, T1.*			
			FROM(	
				SELECT
					TRAH.RACER_NO,		-- 선수번호 
					AWARD_SEQ, 		-- 일련번호 
					TRM.NM_KOR AS RACER_NM, 		-- 성명
					AWARD_DT,		-- 포상일자
					AWARD_DESC,		-- 포상명칭
					AWARD_AMT,		-- 상금
					AWARD_RMK		-- 비고			
				FROM TBEG_RACER_AWARD_HIS TRAH, TBEC_RACER_MASTER TRM
				WHERE TRAH.RACER_NO = TRM.RACER_NO
			             AND AWARD_DT LIKE ?||DECODE(?, '', '', LPAD(?,2,'0'))||'%'
				AND TRM.NM_KOR LIKE ?||'%'
				AND AWARD_GBN = '001'
				ORDER BY AWARD_DT, RACER_NO, AWARD_SEQ
			) T1
        ]]>
    </query> 
    
    <query id="tbeg_racer_award_his_if001" desc="포상금 등록 " fetchSize="10">
        <![CDATA[
        	-- 포상금 등록 
            INSERT INTO TBEG_RACER_AWARD_HIS 
            (
               RACER_NO,		-- 선수번호 
			   AWARD_SEQ, 		-- 일련번호 
			   RACER_NM, 		-- 성명
			   AWARD_DT,		-- 포상일자
		       AWARD_DESC,		-- 포상명칭
			   AWARD_AMT,		-- 상금
			   AWARD_RMK,		-- 비고
			   AWARD_GBN,       -- 입포상구분	
			   INST_ID, 		-- 작성자 ID
			   INST_DTM) 		-- 작성일시 
			VALUES ( 
			   ?,				-- 선수번호 
			   (SELECT NVL(MAX(AWARD_SEQ)+1,1) SEQ 
               		   FROM TBEG_RACER_AWARD_HIS
            		   	WHERE RACER_NO = ?       ), 				-- 일련번호 
			   ?, 				-- 성명
			   ?,				-- 포상일자
		       ?,				-- 포상명칭
			   ?,				-- 상금
			   ?,				-- 비고	
			   '001',           -- 입포상구분
			   ?, 				-- 작성자 ID
			   SYSDATE)			-- 작성일시  
        ]]>
    </query> 
    
    <query id="tbeg_racer_award_his_uf001" desc="포상금  수정" fetchSize="10">
        <![CDATA[
        	-- 포상금 수정 
           UPDATE TBEG_RACER_AWARD_HIS SET
						RACER_NM	= ?, 		-- 성명
					    AWARD_DT	= ?,		-- 포상일자
				        AWARD_DESC	= ?,		-- 포상명칭
					    AWARD_AMT	= ?,		-- 상금
					    AWARD_RMK	= ?,		-- 비고	
				       	UPDT_ID     = ?,		-- 수정자 ID
				       	UPDT_DTM    = SYSDATE	-- 수정일시 
				WHERE  RACER_NO     = ?	-- 선수번호 
			    AND    AWARD_SEQ    = ?	-- 일련번호
			    AND    AWARD_GBN    = '001' 
        ]]>
    </query> 
    <query id="tbeg_racer_award_his_df001" desc="포상금 삭제 " fetchSize="10">
        <![CDATA[
           	-- 포상금 삭제 
			DELETE 
			FROM TBEG_RACER_AWARD_HIS
			WHERE  RACER_NO     = ?	-- 선수번호 
			AND    AWARD_SEQ    = ?	-- 일련번호
			AND    AWARD_GBN    = '001' 
        ]]>
    </query> 
</queryMap>