<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbeb_cfrnt_race(사고점)">
    <query id="tbeb_cfrnt_race_fb001" desc="대진코드별 경주 조회" fetchSize="10">
        <![CDATA[
			SELECT 
			         TCR.CFRNT_CD          -- 대진코드
			       , TCR.DAY_ORD           -- 일차
			       , TCR.RACE_NO           -- 경주번호
			       , TCR.RACE_DGRE_CD      -- 경주등급
			       , TSC.RMK AS CD_NM      -- 경주등급명
			       , TCR.ST_MTHD_CD        -- ST방법코드
			       , TCR.STRT_TIME         -- 출발시간
			       , TCR.RACE_REG_NO_CNT   -- 정번수
			       , TCR.RACE_DIST         -- 경주거리
			       , TCR.TURN_CNT          -- 주회수
			       , TCR.INST_ID           -- 작성자ID
			       , TCR.INST_DTM          -- 작성일시
			       , TCR.UPDT_ID           -- 수정자ID
			       , TCR.UPDT_DTM          -- 수정일시
			FROM   TBEB_CFRNT_RACE TCR, TBEA_SPEC_CD TSC
			WHERE  1=1
				   AND TCR.RACE_DGRE_CD = TSC.CD
				   AND TCR.CFRNT_CD = ?
				   AND TSC.GRP_CD = 'E00005'
			AND    TCR.DAY_ORD  = NVL(?, TCR.DAY_ORD)
			ORDER BY TCR.CFRNT_CD          -- 대진코드
			       , TCR.DAY_ORD           -- 일차
			       , TCR.RACE_NO           -- 경주번호
        ]]>
    </query> 
    <query id="tbeb_cfrnt_race_ib001" desc="대진코드별 경주저장" fetchSize="10">
        <![CDATA[
			INSERT INTO TBEB_CFRNT_RACE
			(
			         CFRNT_CD          -- 대진코드
			       , DAY_ORD           -- 일차
			       , RACE_NO           -- 경주번호
			       , RACE_DGRE_CD      -- 경주등급
			       , ST_MTHD_CD        -- ST방법코드
			       , STRT_TIME         -- 출발시간
			       , RACE_REG_NO_CNT   -- 정번수
			       , RACE_DIST         -- 경주거리
			       , TURN_CNT          -- 주회수
			       , INST_ID           -- 작성자ID
			       , INST_DTM          -- 작성일시
			       , UPDT_ID           -- 수정자ID
			       , UPDT_DTM          -- 수정일시
			) VALUES (
			         ?                 -- 대진코드
			       , ?                 -- 일차
			       , ?                 -- 경주번호
			       , ?                 -- 경주등급
			       , ?                 -- ST방법코드
			       , ?                 -- 출발시간
			       , ?                 -- 정번수
			       , ?                 -- 경주거리
			       , ?                 -- 주회수
			       , ?                 -- 작성자ID
			       , SYSDATE           -- 작성일시 
			       , ?                 -- 수정자ID 
			       , SYSDATE           -- 수정일시 
			)
        ]]>
    </query> 
    <query id="tbeb_cfrnt_race_ub001" desc="대진코드별 경주수정" fetchSize="10">
        <![CDATA[
			UPDATE TBEB_CFRNT_RACE SET
			         RACE_DGRE_CD    = ?       -- 경주등급
			       , ST_MTHD_CD      = ?       -- ST방법코드
			       , STRT_TIME       = ?       -- 출발시간
			       , RACE_REG_NO_CNT = ?       -- 정번수
			       , RACE_DIST       = ?       -- 경주거리
			       , TURN_CNT        = ?       -- 주회수
			       , UPDT_ID         = ?       -- 수정자ID 
			       , UPDT_DTM        = SYSDATE -- 수정일시 
			WHERE  CFRNT_CD          = ?       -- 대진코드
			AND    DAY_ORD           = ?       -- 일차
			AND    RACE_NO           = ?       -- 경주번호
        ]]>
    </query> 
    <query id="tbeb_cfrnt_race_db001" desc="대진코드별 경주삭제" fetchSize="10">
        <![CDATA[
			DELETE
			FROM   TBEB_CFRNT_RACE
			WHERE  CFRNT_CD          = ?       -- 대진코드
			AND    DAY_ORD           = NVL(?, DAY_ORD)       -- 일차
			AND    RACE_NO           = NVL(?, RACE_NO)       -- 경주번호
        ]]>
    </query> 
</queryMap>