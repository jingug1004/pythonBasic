<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="newReportE01013">

	<insert id="insertNewMadicine" parameterType="com.hanaph.gw.ea.newReport.vo.NewMadicineVO" >
		INSERT INTO GW_EA_NEWMADICINE
        (
        	APPROVAL_SEQ, IMPOSITION_YMD, HOSPITAL_NM, MEDICAL_NM, DOCTOR_NM,
        	ITEM_NM, CHANGE_ITEM, CHANGE_OBJECT, ADD_ITEM, TIME_LIMIT_DT,
        	DISCHARGE_DT, BEGIN_DT, ESTIMATED_SALES_ITEM_1, ESTIMATED_SALES_AMT_1, ESTIMATED_SALES_ITEM_2,
        	ESTIMATED_SALES_AMT_2, ESTIMATED_SALES_ITEM_3, ESTIMATED_SALES_AMT_3, ESTIMATED_SALES_ITEM_4,ESTIMATED_SALES_AMT_4, 
        	ESTIMATED_SALES_ITEM_5,ESTIMATED_SALES_AMT_5, PAPER_FORM, OTHER_PAPER, UNUSUAL, 
        	SIDE_DIV
        )
     	VALUES
     	(
     		#{approval_seq}, TO_CHAR(TO_DATE(#{imposition_ymd},'yyyy-mm-dd'),'yyyymmdd'), #{hospital_nm}, #{medical_nm}, #{doctor_nm}, 
     		#{item_nm}, #{change_item}, #{change_object}, #{add_item}, TO_CHAR(TO_DATE(#{time_limit_dt},'yyyy-mm-dd'),'yyyymmdd'), 
     		TO_CHAR(TO_DATE(#{discharge_dt},'yyyy-mm-dd'),'yyyymmdd'), TO_CHAR(TO_DATE(#{begin_dt},'yyyy-mm-dd'),'yyyymmdd'), #{estimated_sales_item_1}, #{estimated_sales_amt_1}, #{estimated_sales_item_2},
     		#{estimated_sales_amt_2}, #{estimated_sales_item_3}, #{estimated_sales_amt_3},#{estimated_sales_item_4}, #{estimated_sales_amt_4}, 
     		#{estimated_sales_item_5}, #{estimated_sales_amt_5}, #{paper_form}, #{other_paper}, #{unusual}, 
     		#{side_div}
        )
	</insert>
	
	<select id="NewMadicineDetail" parameterType="string" resultType="com.hanaph.gw.ea.newReport.vo.NewMadicineVO">
		SELECT APPROVAL_SEQ, TO_CHAR(TO_DATE(IMPOSITION_YMD,'yyyymmdd'),'yyyy-mm-dd') IMPOSITION_YMD, HOSPITAL_NM, MEDICAL_NM, DOCTOR_NM,
        	ITEM_NM, CHANGE_ITEM, CHANGE_OBJECT, ADD_ITEM, TO_CHAR(TO_DATE(TIME_LIMIT_DT,'yyyymmdd'),'yyyy-mm-dd') TIME_LIMIT_DT,
        	TO_CHAR(TO_DATE(DISCHARGE_DT,'yyyymmdd'),'yyyy-mm-dd') DISCHARGE_DT, TO_CHAR(TO_DATE(BEGIN_DT,'yyyymmdd'),'yyyy-mm-dd') BEGIN_DT, ESTIMATED_SALES_ITEM_1, ESTIMATED_SALES_AMT_1, ESTIMATED_SALES_ITEM_2,
        	ESTIMATED_SALES_AMT_2, ESTIMATED_SALES_ITEM_3, ESTIMATED_SALES_AMT_3, ESTIMATED_SALES_ITEM_4,ESTIMATED_SALES_AMT_4, 
        	ESTIMATED_SALES_ITEM_5,ESTIMATED_SALES_AMT_5, PAPER_FORM, OTHER_PAPER, UNUSUAL, 
        	SIDE_DIV
		  FROM GW_EA_NEWMADICINE
		 WHERE APPROVAL_SEQ = #{approval_seq}
	</select>
	
	
	
	<update id="updateNewMadicine" parameterType="com.hanaph.gw.ea.newReport.vo.NewMadicineVO">
		UPDATE GW_EA_NEWMADICINE 
		   SET IMPOSITION_YMD = TO_CHAR(TO_DATE(#{imposition_ymd},'yyyy-mm-dd'),'yyyymmdd'), 
		       HOSPITAL_NM = #{hospital_nm}, 
		       MEDICAL_NM = #{medical_nm}, 
		       DOCTOR_NM = #{doctor_nm},
		       ITEM_NM = #{item_nm}, 
		       CHANGE_ITEM = #{change_item},
		       CHANGE_OBJECT = #{change_object}, 
		       ADD_ITEM = #{add_item}, 
		       TIME_LIMIT_DT = TO_CHAR(TO_DATE(#{time_limit_dt},'yyyy-mm-dd'),'yyyymmdd'),
		       DISCHARGE_DT = TO_CHAR(TO_DATE(#{discharge_dt},'yyyy-mm-dd'),'yyyymmdd'),
		       BEGIN_DT = TO_CHAR(TO_DATE(#{begin_dt},'yyyy-mm-dd'),'yyyymmdd'),
		       ESTIMATED_SALES_ITEM_1 = #{estimated_sales_item_1}, 
		       ESTIMATED_SALES_AMT_1 = #{estimated_sales_amt_1}, 
		       ESTIMATED_SALES_ITEM_2 = #{estimated_sales_item_2},
		       ESTIMATED_SALES_AMT_2 = #{estimated_sales_amt_2}, 
		       ESTIMATED_SALES_ITEM_3 = #{estimated_sales_item_3},
		       ESTIMATED_SALES_AMT_3 = #{estimated_sales_amt_3},
		       ESTIMATED_SALES_ITEM_4 = #{estimated_sales_item_4},
		       ESTIMATED_SALES_AMT_4 = #{estimated_sales_amt_4}, 
		       ESTIMATED_SALES_ITEM_5 = #{estimated_sales_item_5},
		       ESTIMATED_SALES_AMT_5 = #{estimated_sales_amt_5}, 
		       PAPER_FORM = #{paper_form},
		       OTHER_PAPER = #{OTHER_PAPER},
		       UNUSUAL = #{unusual},
		       SIDE_DIV = #{side_div}
		 WHERE APPROVAL_SEQ = #{approval_seq}	
	</update>
	
	
	
</mapper>