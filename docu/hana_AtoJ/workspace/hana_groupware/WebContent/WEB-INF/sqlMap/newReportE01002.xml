<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
  * @파일명 : newReportE01002.xml
  * @메뉴명 : 기안서
  * @최초작성일 : 2015/02/10            
  * @author : Jung.Jin.Muk(pc123pc@irush.co.kr)                  
  * @수정내역 :	
-->
<mapper namespace="newReportE01002">

	<select id="draftDetail" parameterType="string" resultType="com.hanaph.gw.ea.newReport.vo.DraftVO">
		-- 기안서 상세정보를 가져온다 / draftDetail / @ newReportE01002.xml / 시행문서조회 - 결재중 - 문서 상세 페이지
		SELECT APPROVAL_SEQ, TO_CHAR(TO_DATE(IMPOSITION_YMD,'yyyymmdd'),'yyyy-mm-dd') IMPOSITION_YMD, CONTROLL, COOPERATION, PURPOSE, CONTENT, ETC
		  FROM GW_EA_DRAFT
		 WHERE APPROVAL_SEQ = #{approval_seq}
	</select>
	
	<update id="updateDraft" parameterType="com.hanaph.gw.ea.newReport.vo.DraftVO">
		UPDATE GW_EA_DRAFT 
		   SET IMPOSITION_YMD = TO_CHAR(TO_DATE(#{imposition_ymd},'yyyy-mm-dd'),'yyyymmdd'), CONTROLL = #{controll}, COOPERATION = #{cooperation}, PURPOSE = #{purpose},
		       CONTENT = #{content}, ETC = #{etc}
	 	 WHERE APPROVAL_SEQ = #{approval_seq}
	</update>
	
	<insert id="insertDraft" parameterType="com.hanaph.gw.ea.newReport.vo.DraftVO" >
		-- 기안서 등록을 한다 / insertDraft / @ newReportE01002.xml / 전자결재-신규문서작성-ste1
		INSERT INTO GW_EA_DRAFT
        (
        	APPROVAL_SEQ, IMPOSITION_YMD, CONTROLL, COOPERATION, PURPOSE, CONTENT, ETC
        )
     	VALUES
     	(
     		#{approval_seq}, TO_CHAR(TO_DATE(#{imposition_ymd},'yyyy-mm-dd'),'yyyymmdd'), #{controll}, #{cooperation}, #{purpose}, #{content}, #{etc}
        )
	</insert>
	
</mapper>