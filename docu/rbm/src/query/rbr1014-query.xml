<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="RBR1014(용역관리)">
	
	<query id="rbr1014_s01" desc="용역관리 조회" fetchSize="10">
		<![CDATA[
 			SELECT /* rbr1014_s01 */
 				 '0' AS CHK
				,BRNC_CD			--지점코드
				,STND_YEAR			--년도
				,SERV_CD			--용역구분코드
				,JOB_TIT_CD			--직책코드
				,WORK_TPY_CD		--근무형태코드
				,PRSN_NUM			--인원수
				,RMK				--비고
				,INST_ID			--작성자
				,INST_DT			--작성일시
				,UPDT_ID			--수정자
				,UPDT_DT			--수정일시

			  FROM  TBRA_SERV_MANA  --용역관리
			
			 WHERE	1=1
			   AND  BRNC_CD   = ?    --지점코드
	     	   AND  STND_YEAR = ?    --년도
		  ORDER BY	SERV_CD, WORK_TPY_CD, JOB_TIT_CD

        ]]>
	</query>
	
	<query id="rbr1014_s02" desc="기본키 조회" fetchSize="10">
        <![CDATA[
            SELECT /* rbr1014_s02 */
                 COUNT(*) AS CNT     --기본키 개수
              FROM  TBRA_SERV_MANA   --용역관리
             WHERE  1=1
               AND  BRNC_CD     = ? --지점코드
               AND  STND_YEAR   = ? --년도
               AND  SERV_CD     = ? --용역구분코드
               AND  JOB_TIT_CD  = ? --직책코드
               AND  WORK_TPY_CD = ? --근무형태코드
        ]]>
    </query>
	
	<query id="rbr1014_s03" desc="이름 조회" fetchSize="10">
        <![CDATA[
            SELECT /* rbr1014_s03 */
                 CD_NM     --상세코드명
              FROM  TBRK_SPEC_CD     --상세코드
			 WHERE  1=1
			   AND  GRP_CD = ?
			   AND  CD     = ?
        ]]>
    </query>
    
	<query id="rbr1014_m01" desc="용역관리  입력,수정" fetchSize="10">
        <![CDATA[

			MERGE INTO TBRA_SERV_MANA A /* rbr1014_m01 */ --용역관리
			USING
                    (SELECT
                             ? AS BRNC_CD      --지점코드
							,? AS STND_YEAR    --년도
							,? AS SERV_CD      --용역구분코드
							,? AS JOB_TIT_CD   --직책코드
							,? AS WORK_TPY_CD  --근무형태코드
							
							,? AS PRSN_NUM     --인원수
							,? AS RMK          --비고
                            ,? AS INST_ID      --작성자                    
                            ,? AS UPDT_ID      --수정자
                            
                       FROM    DUAL ) B
                ON (
                        A.BRNC_CD     = B.BRNC_CD      --지점코드
                    AND A.STND_YEAR   = B.STND_YEAR    --년도
                    AND A.SERV_CD     = B.SERV_CD      --용역구분코드
                    AND A.WORK_TPY_CD = B.WORK_TPY_CD  --근무형태코드 
                    AND A.JOB_TIT_CD  = B.JOB_TIT_CD   --직책코드
            )
			
			WHEN MATCHED THEN
				UPDATE SET
			
                     A.PRSN_NUM    = B.PRSN_NUM     --인원수
                    ,A.RMK         = B.RMK          --비고                    
                    ,A.UPDT_ID     = B.UPDT_ID      --수정자                   
                    ,A.UPDT_DT     = SYSDATE        --수정일시
			    
			WHEN NOT MATCHED THEN 
				
				INSERT (
			
					 A.BRNC_CD               --지점코드
                    ,A.STND_YEAR             --년도
                    ,A.SERV_CD               --용역구분코드
                    ,A.JOB_TIT_CD            --직책코드
                    ,A.WORK_TPY_CD           --근무형태코드
                    
                    ,A.PRSN_NUM              --인원수
                    ,A.RMK                   --비고    
                    ,A.INST_ID               --작성자
                    ,A.INST_DT               --작성일시
					
				) VALUES (
					 B.BRNC_CD               --지점코드
                    ,B.STND_YEAR             --년도
                    ,B.SERV_CD               --용역구분코드
                    ,B.JOB_TIT_CD            --직책코드
                    ,B.WORK_TPY_CD           --근무형태코드
                    
                    ,B.PRSN_NUM              --인원수
                    ,B.RMK                   --비고    
                    ,B.INST_ID               --작성자
					,SYSDATE				 --작성일시
				)				
        ]]>				
    </query>
    
    <query id="rbr1014_d01" desc="용역관리 삭제" fetchSize="10">
        <![CDATA[

			DELETE  TBRA_SERV_MANA   /* rbr1014_d01 */	--용역관리
			 WHERE  1=1
			   AND  BRNC_CD    = ?	--구분
			   AND  STND_YEAR  = ?	--년도
			   AND  SERV_CD    = ?	--용역구분코드
			   AND  JOB_TIT_CD = ?	--직책코드
        ]]>
    </query>
</queryMap>