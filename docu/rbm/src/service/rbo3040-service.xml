<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbo3040" initial="SetResultKeys">

  <activity name="SetResultKeys" 			class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  

    <property name="staticResultKeyFile" 	value="resultkey.properties" />

    <property name="resultKeyList" 			value="dsRollPrhsCacu|dsStrYear|dsRollPrhsCfm" />

    <transition name="success" 				value="EventRouter" />

  </activity>


  <activity name="EventRouter" 				class="com.posdata.glue.biz.activity.PosDefaultRouter">

    <transition name="searchRollPrhsCacu"  		value="searchRollPrhsCacu" />

    <transition name="saveRollPrhsCacu"   		value="saveRollPrhsCacu" />
    
    <transition name="searchStndYear"  			value="searchStndYear" />  
    
    <transition name="searchRollPrhsCfm"  		value="searchRollPrhsCfm" />
    
    
    <transition name="success" 					value="end" />

  </activity>


  

  <!--  구매수량산출    조회 -->  
  <activity name="searchRollPrhsCacu" 		class="com.posdata.glue.miplatform.biz.activity.PosSearch">

    <transition name="success" 				value="end" />

    <property name="resultkey" 				value="dsRollPrhsCacu" />

    <property name="sqlkey"					value="rbo3040_s01" />

    <property name="param-count" 			value="3" />
    
    <property name="param0" 				value="STND_YEAR" />
    <property name="param1" 				value="ROLL_GBN" />
    <property name="param2" 				value="BRNC_CD" />

    <property name="dao" 					value="rbmdao" />

  </activity>  
  


  <!-- 구매수량산출     저장 -->

  <activity name="saveRollPrhsCacu" 			class="snis.rbm.business.rbo3040.activity.SaveRollPrhsCacu">
    <transition name="success" 					value="end" />
  </activity>


  <!-- 구매수량산출  기준년도 조회  -->
 <activity name="searchStndYear" 		class="com.posdata.glue.miplatform.biz.activity.PosSearch">

    <transition name="success" 				value="end" />

    <property name="resultkey" 				value="dsStrYear" />

    <property name="sqlkey"					value="rbo3040_s02" />

    <property name="param-count" 			value="0" />
    
    <property name="dao" 					value="rbmdao" />

  </activity>   
  
  
  <!-- 구매수량산출   조회  -->
 <activity name="searchRollPrhsCfm" 		class="com.posdata.glue.miplatform.biz.activity.PosSearch">

    <transition name="success" 				value="end" />

    <property name="resultkey" 				value="dsRollPrhsCfm" />

    <property name="sqlkey"					value="rbo3040_s03" />

    <property name="param-count" 			value="2" />
    
    <property name="param0" 				value="STND_YEAR" />
    <property name="param1" 				value="ROLL_GBN" />
    
    <property name="dao" 					value="rbmdao" />

  </activity>   
  
  
  
  <transaction-manager id="tx_rbm" commit="true" />

</service>



