<?xml version="1.0" encoding="UTF-8"?>

<queryMap desc="TBRS_sql_list(검색조회)">

    <query id="rsy1110_TBRS_sql_list_select" desc="SQL검색목록조회" fetchSize="10">
        <![CDATA[
            SELECT  /*rsy1110_TBRS_sql_list_select*/
				SEQ_NO, GRP_CD, 
				TITLE, MAIN_STR, EDIT_STR, ORDER_STR, 
				(SELECT USER_NM FROM TBRK_USER U WHERE U.USER_ID = L.INST_ID) USER_NM,
				to_char(NVL(UPDT_DT, INST_DT),'YYYY-MM-DD') UPDT_DT,
				GRANT_YN, RMK
            FROM TBRS_SQL_LIST L
            WHERE 1=1
              AND GRP_CD = NVL(?,GRP_CD)
              AND TITLE like '%'||?||'%'
            ORDER BY TITLE		
        ]]>        
    </query>


    <query id="rsy1110_TBRS_SQL_LIST_insert1" desc="SQL검색목록 INSERT" fetchSize="10">
        <![CDATA[
			INSERT INTO TBRS_SQL_LIST /*rsy1110_TBRS_SQL_LIST_insert1*/
			            (
			                SEQ_NO
			              , GRP_CD
			              , TITLE
			              , MAIN_STR
			              , EDIT_STR
			              , ORDER_STR
			              , RMK 
			              , INST_ID
			              , INST_DT
			            )
			     VALUES (
			     		 NVL((select MAX(seq_no)+1 from TBRS_SQL_LIST),1),
			     		 ?, ?, ?, ?, ?, ?, ?, SYSDATE
			            )
        ]]>        
    </query>
    
    <query id="rsy1110_TBRS_SQL_LIST_update1" desc="SQL검색목록 UPDATE" fetchSize="10">
        <![CDATA[
			UPDATE TBRS_SQL_LIST /*rsy1110_TBRS_SQL_LIST_update1*/
			   SET GRP_CD = ?,
			       TITLE = ?,			       
			       MAIN_STR = ?,
			       EDIT_STR = ?,
			       ORDER_STR= ?,
			       RMK = ?,
			       UPDT_ID = ?,
			       UPDT_DT = SYSDATE
			 WHERE SEQ_NO =  ?
        ]]>        
    </query>
                 
    <query id ="rsy1110_TBRS_SQL_LIST_delete1" desc="SQL검색목록 delete" fetchSize = "10">
    	<![CDATA[
    	
    		DELETE FROM TBRS_SQL_LIST /*rsy1110_TBRS_SQL_LIST_delete1*/
			 WHERE SEQ_NO = ?
    	
    	]]>    	
    </query>      


</queryMap>