<?xml version="1.0" encoding="EUC-KR"?>
 
<service name="rev1080" initial="SetResultKeys">

    <activity name="SetResultKeys"   class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
	    <property name="staticResultKeyFile"  value="resultkey.properties" />
	    <property name="resultKeyList" 		  value="dsEmp|dsDept|dsAprvStas|dsCntrItm|dsCnt|dsMng|dsConst|dsEmpTotGrp|dsDeptTotGrp" />
	    <transition name="success" 			  value="EventRouter" />
	</activity>
  
    <activity name="EventRouter" 	 class="com.posdata.glue.biz.activity.PosDefaultRouter">
	    <transition name="searchEmp"         value="searchEmp" />
	    <transition name="searchEmpTotGrp"   value="searchEmpTotGrp" />
	    <transition name="searchCbDept"      value="searchCbDept" />
	    <transition name="searchDeptTotGrp"  value="searchDeptTotGrp" />
	    <transition name="saveEmp"           value="saveEmp" />
	    <transition name="saveMultAppr"      value="saveMultAppr" />
	    <transition name="searchCbCntr"      value="searchCbCntr" />
	    <transition name="success" 			 value="end" />
	</activity>
	
	<!-- 그리드 조회 -->
	<activity name="searchEmp" 	          class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="searchAprvStas" />
		<property name="resultkey" 		  value="dsEmp" />
		<property name="sqlkey" 		  value="rev1080_s01" />
		<property name="param-count" 	  value="8" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />  
		<property name="param2" 		  value="DEPT_CD" />
		<property name="param3"           value="DEPT_CD" />
		<property name="param4"           value="DEPT_CD" />
		<property name="param5" 		  value="CNTR_ITM_CD" />
		<property name="param6" 		  value="CNTR_ITM_CD" />
		<property name="param7" 		  value="CNTR_ITM_CD" />
		<property name="dao" 			  value="rbmdao" />
	</activity>
  	
	<!-- 그리드 조회 -->
	<activity name="searchEmpTotGrp" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="searchDeptTotGrp" />
		<property name="resultkey" 		  value="dsEmpTotGrp" />
		<property name="sqlkey" 		  value="rev1080_s06" />
		<property name="param-count" 	  value="8" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />  
		<property name="param2" 		  value="DEPT_CD" />
		<property name="param3"           value="DEPT_CD" />
		<property name="param4"           value="DEPT_CD" />
		<property name="param5" 		  value="CNTR_ITM_CD" />
		<property name="param6" 		  value="CNTR_ITM_CD" />
		<property name="param7" 		  value="CNTR_ITM_CD" />
		<property name="dao" 			  value="rbmdao" />
	</activity>
  	
  	<!-- 승인상태 조회 -->
    <activity name="searchAprvStas"       class="com.posdata.glue.miplatform.biz.activity.PosSearch">
        <transition name="success"        value="searchCnt" />
        <property name="resultkey"        value="dsAprvStas" />
        <property name="sqlkey"           value="rev1050_s03" />
        <property name="param-count"      value="7" />
        <property name="param0"           value="ESTM_YEAR" />
        <property name="param1"           value="ESTM_NUM" />
        <property name="param2"           value="APRV_DEPT" />
        <property name="param3"           value="ESTM_YEAR" />
        <property name="param4"           value="ESTM_NUM" />
        <property name="param5"           value="APRV_DEPT" />
        <property name="param6"           value="APRV_SEQ" />
        <property name="dao"              value="rbmdao" />
    </activity>
    
    <!-- 평가생성 저장 여부 조회 -->
    <activity name="searchCnt"            class="com.posdata.glue.miplatform.biz.activity.PosSearch">
        <transition name="success"        value="searchMng" />
        <property name="resultkey"        value="dsCnt" />
        <property name="sqlkey"           value="rev1080_s02" />
        <property name="param-count"      value="2" />
        <property name="param0"           value="ESTM_YEAR" />
        <property name="param1"           value="ESTM_NUM" />
        <property name="dao"              value="rbmdao" />
    </activity>
    
    <!-- 담당자조회('평가대상선정' 버튼권한) -->
    <activity name="searchMng"            class="com.posdata.glue.miplatform.biz.activity.PosSearch">
        <transition name="success"        value="searchUpdateFlag" />
        <property name="resultkey"        value="dsMng" />
        <property name="sqlkey"           value="rev1080_s03" />
        <property name="param-count"      value="2" />
        <property name="param0"           value="ESTM_YEAR" />
        <property name="param1"           value="ESTM_NUM" />
        <property name="dao"              value="rbmdao" />
    </activity>
    
    <!-- 화면 수정 가능 여부 조회(평가 개시시)  -->
    <activity name="searchUpdateFlag"     class="com.posdata.glue.miplatform.biz.activity.PosSearch">
        <transition name="success"        value="end" />
        <property name="resultkey"        value="dsConst" />
        <property name="sqlkey"           value="rev1070_s11" />
        <property name="param-count"      value="2" />
        <property name="param0"           value="ESTM_YEAR" />    
        <property name="param1"           value="ESTM_NUM" />    
        <property name="dao"              value="rbmdao" />
    </activity>
    
  	<!-- 부서콤보 -->
  	<activity name="searchCbDept" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="end" />
		<property name="resultkey" 		  value="dsDept" />
		<property name="sqlkey" 		  value="rev1080_dept" />
		<property name="param-count" 	  value="2" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />
		<property name="dao" 			  value="rbmdao" />
	</activity>
	
  	<!-- 종합평가등급용  부서 -->
  	<activity name="searchDeptTotGrp" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="searchAprvStas" />
		<property name="resultkey" 		  value="dsDeptTotGrp" />
		<property name="sqlkey" 		  value="rev1080_deptTotGrp" />
		<property name="param-count" 	  value="2" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />
		<property name="dao" 			  value="rbmdao" />
	</activity>
	
	<activity name="searchCbCntr" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="end" />
		<property name="resultkey" 		  value="dsCntrItm" />
		<property name="sqlkey" 		  value="rev1080_cntr" />
		<property name="param-count" 	  value="2" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />
		<property name="dao" 			  value="rbmdao" />
	</activity>
	
	<!-- 평가대상선정 저장 -->
  	<activity name="saveEmp" 		class="snis.rbm.business.rev1080.activity.SaveEmp">
    	<transition name="success" 			value="end" />
  	</activity>
  	
  	<!-- 평가대상생성  -->
    <activity name="saveMultAppr"        class="snis.rbm.business.rev1080.activity.SaveMultAppr">
        <transition name="success"          value="end" />
    </activity>
    
    
  <transaction-manager id="tx_rbm" commit="true" />
</service>