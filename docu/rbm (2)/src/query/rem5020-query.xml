<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="rem5020(지점별 지정좌석실 상품분류  조회 )">
  
    <query id="rem5020_s01" desc="지정좌석실 상품분류 조회" fetchSize="10">
      <![CDATA[
            SELECT /* rem5020_s01 */
                    '' AS CHK
 			       ,A.COMM_NO
 			       ,B.CD_NM AS COMM_NM
		           ,A.GOOD_TYPE_CD
		           ,A.GOOD_TYPE_NM
		           ,A.USE_YN
		           ,A.RMK
			FROM  TBRC_FS_GOOD_TYPE A
			     ,TBRK_SPEC_CD B
		    WHERE  A.COMM_NO = B.CD
		    AND    B.GRP_CD = '160'
		    AND    A.COMM_NO LIKE ?||'%'     
		    AND    A.USE_YN LIKE ?||'%'  
			ORDER BY A.COMM_NO, A.GOOD_TYPE_CD            
        ]]>
    </query> 
    
    <query id="rem5020_m01" desc="지정좌석실 상품분류 저장" fetchSize="10">
      <![CDATA[
            MERGE /* rem5020_m01 */
 			      INTO TBRC_FS_GOOD_TYPE DST
 			USING (
 			       SELECT  ? AS COMM_NO
 			              ,? AS GOOD_TYPE_CD
 			              ,? AS GOOD_TYPE_NM
 			              ,? AS RMK
 			              ,? AS USE_YN
 			       FROM    DUAL       
 			        ) SRC    
 			ON     (
 			           DST.COMM_NO      = SRC.COMM_NO
 			       AND DST.GOOD_TYPE_CD = SRC.GOOD_TYPE_CD
 			       )
 			WHEN MATCHED THEN
 			      UPDATE SET
 			                 DST.GOOD_TYPE_NM = SRC.GOOD_TYPE_NM
 			                ,DST.RMK          = SRC.RMK
 			                ,DST.USE_YN       = SRC.USE_YN
 			WHEN NOT MATCHED THEN
 			       INSERT (
 			                 COMM_NO
 			                ,GOOD_TYPE_CD
 			                ,GOOD_TYPE_NM
 			                ,RMK
 			                ,USE_YN
 			               ) VALUES (
 			               	 SRC.COMM_NO
 			               	,SRC.GOOD_TYPE_CD
 			               	,SRC.GOOD_TYPE_NM
 			               	,SRC.RMK
 			               	,SRC.USE_YN
 			               )
 			                                       		       
        ]]>
    </query> 
    
    <query id="rem5020_d01" desc="지정좌석실 상품분류 삭제" fetchSize="10">
      <![CDATA[
            DELETE /* rem5020_d01 */
 			FROM   TBRC_GOOD_TYPE
		    WHERE  COMM_NO      = ?
		    AND    GOOD_TYPE_CD = ?		                
        ]]>
    </query> 
    
</queryMap>