<?xml version="1.0" encoding="EUC-KR"?> 
<service name="rsm2080" initial="SetResultKeys">
    <activity name="SetResultKeys"   class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  	    <property name="staticResultKeyFile"  value="resultkey.properties" />	    <property name="resultKeyList" 		  value="dsRaceInfo|dsWeather|dsSpecDesc|dsSales|dsEntPrsnNum|dsMaxSalesRaceNo|dsRefund" />	    <transition name="success" 			  value="EventRouter" />	</activity>  
    <activity name="EventRouter" 	 class="com.posdata.glue.biz.activity.PosDefaultRouter">
    	<transition name="searchRaceInfo"  				value="searchRaceInfo" />			<!-- 경륜, 경정 구분 검색 -->
    	<transition name="searchSales"  				value="searchSales" />				<!-- 경주 기본 정보 -->
    	<transition name="searchWeather"  				value="searchWeather" />			<!-- 경륜, 경정 구분 검색 -->
    	<transition name="searchSpecDesc"  				value="searchSpecDesc" />			<!-- 경주 기본 정보 -->
    	<transition name="searchEntPrsnNum"  			value="searchEntPrsnNum" />			<!-- 경주 기본 정보 -->
    	<transition name="searchMaxSalesRaceNo"  		value="searchMaxSalesRaceNo" />		<!-- 최고매출경주 조회 -->
    	<transition name="searchRefund"  			    value="searchRefund" />		        <!-- 환불액  조회 -->
    	<transition name="saveSpecDesc"  				value="saveSpecDesc" />				<!-- 상황일지 저장 -->
    	<transition name="searchSalesToday"  			value="searchSalesToday" />				<!-- 경주 기본 정보 -->
    	<transition name="success" 			  		   	value="end" />	</activity> 	
 	
	<!-- 경주정보 조회 -->
	<activity name="searchRaceInfo" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="end" />
	  <property name="resultkey" 	  value="dsRaceInfo" />
	  <property name="sqlkey" 		  value="rsm2080_s01" />
	  <property name="param-count" 	  value="3" />
	  <property name="param0" 		  value="RACE_DAY" />	<!-- 경주일 yyyymmdd  -->
	  <property name="param1" 		  value="RACE_DAY" />	<!-- 경륜/경정 구분  -->
	  <property name="param2" 		  value="RACE_DAY" />	<!-- 경주일 yyyymmdd  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>
	
	
	<!-- 매출현황 조회 -->
	<activity name="searchSales" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="searchWeather" />
	  <property name="resultkey" 	  value="dsSales" />
	  <property name="sqlkey" 		  value="rsm2080_s04" />
	  <property name="param-count" 	  value="11" />
	  <property name="param0" 		  value="PREV_STND_YEAR" />	<!-- 전회차 년도  -->
	  <property name="param1" 		  value="PREV_TMS" />   	<!-- 전회차 회차  -->
	  <property name="param2" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param3" 		  value="TMS" />			<!-- 회차  -->
	  <property name="param4" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param5" 		  value="TMS" />			<!-- 회차  -->
	  <property name="param6" 		  value="MEET_CD" />		<!-- 경주장코드  -->
	  <property name="param7" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param8" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param9" 		  value="RACE_DAY" />		<!-- 기준년도  -->
	  <property name="param10" 		  value="RACE_DAY" />		<!-- 기준년도  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>  
  
	<!-- 기상정보 조회 -->
	<activity name="searchWeather" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="searchSpecDesc" />
	  <property name="resultkey" 	  value="dsWeather" />
	  <property name="sqlkey" 		  value="rsm2080_s02" />
	  <property name="param-count" 	  value="6" />
	  <property name="param0" 		  value="MEET_CD" />		<!-- 경주일 yyyymmdd  -->
	  <property name="param1" 		  value="STND_YEAR" />   	<!-- 경주일 yyyymmdd  -->
	  <property name="param2" 		  value="TMS" />			<!-- 경주일 yyyymmdd  -->
	  <property name="param3" 		  value="RACE_DAY" />		<!-- 경주일 yyyymmdd  -->
	  <property name="param4" 		  value="RACE_DAY" />		<!-- 경주일 yyyymmdd  -->
	  <property name="param5" 		  value="DAY_ORD" />		<!-- 일차  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>
	
	<!-- 경주상황 조회 -->
	<activity name="searchSpecDesc"   class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="searchEntPrsnNum" />
	  <property name="resultkey" 	  value="dsSpecDesc" />
	  <property name="sqlkey" 		  value="rsm2080_s03" />
	  <property name="param-count" 	  value="7" />
	  <property name="param0" 		  value="PREV_STND_YEAR" />	<!-- 전회차 년도  -->
	  <property name="param1" 		  value="PREV_TMS" />   	<!-- 전회차 회차  -->
	  <property name="param2" 		  value="RACE_DAY" />		<!-- 일차  -->
	  <property name="param3" 		  value="MEET_CD" />		<!-- 경주장코드  -->
	  <property name="param4" 		  value="STND_YEAR" />   	<!-- 기준년도  -->
	  <property name="param5" 		  value="TMS" />			<!-- 회차  -->
	  <property name="param6" 		  value="DAY_ORD" />		<!-- 일차  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>    
	
	
	
	<!-- 입장인원 조회 -->
	<activity name="searchEntPrsnNum" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="searchMaxSalesRaceNo" />
	  <property name="resultkey" 	  value="dsEntPrsnNum" />
	  <property name="sqlkey" 		  value="rsm2080_s05" />
	  <property name="param-count" 	  value="4" />
	  <property name="param0" 		  value="RACE_DAY" />	<!-- 입장일자  -->
	  <property name="param1" 		  value="RACE_DAY" />   <!-- 입장일자  -->
	  <property name="param2" 		  value="RACE_DAY" />	<!-- 입장일자  -->
	  <property name="param3" 		  value="RACE_DAY" />	<!-- 입장일자  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>  
  
  
	
	<!-- 최고매출액  조회 -->
	<activity name="searchMaxSalesRaceNo" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="searchRefund" />
	  <property name="resultkey" 	  value="dsMaxSalesRaceNo" />
	  <property name="sqlkey" 		  value="rsm2080_s06" />
	  <property name="param-count" 	  value="4" />
	  <property name="param0" 		  value="MEET_CD" />	<!-- 경주장코드  -->
	  <property name="param1" 		  value="STND_YEAR" />  <!-- 기준년도  -->
	  <property name="param2" 		  value="TMS" />		<!-- 회차  -->
	  <property name="param3" 		  value="DAY_ORD" />	<!-- 일차  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>  
	
	
	<!-- 환불액  조회 -->
	<activity name="searchRefund" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="end" />
	  <property name="resultkey" 	  value="dsRefund" />
	  <property name="sqlkey" 		  value="rsm2080_s07" />
	  <property name="param-count" 	  value="4" />
	  <property name="param0" 		  value="MEET_CD" />	<!-- 경주장코드  -->
	  <property name="param1" 		  value="STND_YEAR" />  <!-- 기준년도  -->
	  <property name="param2" 		  value="TMS" />		<!-- 회차  -->
	  <property name="param3" 		  value="DAY_ORD" />	<!-- 일차  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>  
	
	
	<!-- 매출현황 조회 -->
	<activity name="searchSalesToday" class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 	  value="searchWeather" />
	  <property name="resultkey" 	  value="dsSales" />
	  <property name="sqlkey" 		  value="rsm2080_s04_Today" />
	  <property name="param-count" 	  value="11" />
	  <property name="param0" 		  value="PREV_STND_YEAR" />	<!-- 전회차 년도  -->
	  <property name="param1" 		  value="PREV_TMS" />   	<!-- 전회차 회차  -->
	  <property name="param2" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param3" 		  value="TMS" />			<!-- 회차  -->
	  <property name="param4" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param5" 		  value="TMS" />			<!-- 회차  -->
	  <property name="param6" 		  value="MEET_CD" />		<!-- 경주장코드  -->
	  <property name="param7" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param8" 		  value="STND_YEAR" />		<!-- 기준년도  -->
	  <property name="param9" 		  value="RACE_DAY" />		<!-- 기준년도  -->
	  <property name="param10" 		  value="RACE_DAY" />		<!-- 기준년도  -->
	  <property name="dao" 			  value="rbmdao" />
	</activity>  
  
	<!--  상황일지 저장 -->
	<activity name="saveSpecDesc" 		class="snis.rbm.business.rsm2080.activity.SaveSpecDesc">
	  <transition name="success" 	  	value="searchWeather" />
	</activity>  
  
		
  <transaction-manager id="tx_rbm" commit="true" /></service>

