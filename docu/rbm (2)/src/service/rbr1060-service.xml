<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbr1060" initial="SetResultKeys">
  <activity     name="SetResultKeys"          class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property   name="staticResultKeyFile"    value="resultkey.properties" />
    <property   name="resultKeyList"          value="dsRaceInfo|dsRptPrepSitu|dsRptPrepSituNum|dsBrncSignftPnt" />
    <transition name="success"                value="EventRouter" />
  </activity>

  <activity name="EventRouter"                class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchRaceInfo"      	  value="searchRaceInfo" />        		<!-- 경주일 정보 조회          -->
    <transition name="searchRptPrepSituNum"   value="searchRptPrepSituNum" />       <!-- 경주개최 준비인원 조회 -->
    <transition name="searchRptPrepSitu"      value="searchRptPrepSitu" />        	<!-- 경주개최 준비상황 조회 -->
    <transition name="searchBrncSignftPnt"    value="searchBrncSignftPnt" />        <!-- 지점 특이사항 조회       -->
    <transition name="saveRptPrepSitu"        value="saveRptPrepSitu" />          <!-- 경주개최 준비상황 저장 -->   
  </activity>
  
	<!-- 경주 기본 정보 -->
	<activity name="searchRaceInfo" 	class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 		value="searchRptPrepSituNum" />
	  <property name="resultkey" 		value="dsRaceInfo" />
	  <property name="sqlkey" 		  	value="rsm2010_s01" />
	  <property name="param-count" 	  	value="1" />
	  <property name="param0" 		  	value="RACE_DAY" />	<!-- 경주일 yyyymmdd  -->
	  <property name="dao" 			  	value="rbmdao" />
	</activity>

  
 <!-- 경주개최 준비상황  조회  -->
  <activity name="searchRptPrepSituNum"    class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="searchRptPrepSitu" />
    <property name="resultkey"          value="dsRptPrepSituNum" />
    <property name="sqlkey"             value="rbr1060_s01" />
    <property name="param-count"        value="4" />    
    <property name="param0" 		  	value="RACE_DAY" />		<!-- 경주일 yyyymmdd  -->
    <property name="param1"             value="RACE_DAY" />   	<!-- 경주일 yyyymmdd  -->    
    <property name="param2" 		  	value="MEET_CD" />		<!-- 경륜/경정 구분        -->
    <property name="param3" 		  	value="RACE_DAY" />		<!-- 경주일 yyyymmdd  -->
    <property name="dao"                value="rbmdao" />
  </activity>  
  
 <!-- 경주개최 준비상황  조회  -->
  <activity name="searchRptPrepSitu"    class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="searchBrncSignftPnt" />
    <property name="resultkey"          value="dsRptPrepSitu" />
    <property name="sqlkey"             value="rbr1060_s02" />
    <property name="param-count"        value="2" />    
    <property name="param0"             value="RACE_DAY" />   	<!-- 경주일자       -->    
    <property name="param1"             value="BRNC_CD" />   	<!-- 지점 코드       -->    
    <property name="dao"                value="rbmdao" />
  </activity>  
  
 <!-- 지점 특이사항  조회  -->
  <activity name="searchBrncSignftPnt"    class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="end" />
    <property name="resultkey"          value="dsBrncSignftPnt" />
    <property name="sqlkey"             value="rbr1060_s03" />
    <property name="param-count"        value="4" />    
    <property name="param0"             value="RACE_DAY" />   	<!-- 경주일자       -->    
    <property name="param1"             value="RACE_DAY" />   	<!-- 경주일자       -->    
    <property name="param2"             value="RACE_DAY" />   	<!-- 경주일자       -->    
    <property name="param3"             value="RACE_DAY" />   	<!-- 경주일자       -->    
    <property name="dao"                value="rbmdao" />
  </activity>
  
  <!-- 경주개최 준비상황 저장  -->
  <activity name="saveRptPrepSitu"      class="snis.rbm.business.rbr1060.activity.SaveRptPrepSituBonjang">
    <transition name="success" 			value="searchRptPrepSituNum" />
	<property name="dao" 				value="rbmdao" />
  </activity>  
  
  <transaction-manager id="tx_rbm" commit="true" />

</service>