<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="RBS1210(예상지 업체 관리)">
    
    
    <query id="rbs1210_s01" desc="예상지 업체등록 조회" fetchSize="10">
        <![CDATA[  
			SELECT   /* rbs1210_s01 */
			         '' AS CHK
			        ,YES_COM_SEQ				-- 예상지업체 고유번호
			        ,MEET_CD                    -- 경륜경정 구분
			        ,YES_COM_NM   				-- 예상지 업체명
			        ,MNGR_NM					-- 담당자 이름
			        ,TEL_NO						-- 전화번호
			        ,YES_COM_ID					-- 예상지업체 접속 계정
			        ,SUBSTR(FC_DEC(YES_COM_PSWD),1,2)||
			        REGEXP_REPLACE(REGEXP_REPLACE(SUBSTR(FC_DEC(YES_COM_PSWD),2), '(.{1})', '\1*'), '(.\*)', '*') AS YES_COM_PSWD				-- 접속 암호(앞의 2자리만 보여줌)
			        ,USE_YN						-- 사용여부
			        ,REG_DT						-- 등록일자
			        ,ORDR_NO					-- 조회순서
			        ,RMK                        -- 비고
			FROM     TBRS_YES_COM 
			WHERE    MEET_CD = ?                -- 1. 경륜/경정 구분			
			AND 	 YES_COM_NM LIKE ?||'%'		-- 2. 업체명			
			ORDER BY ORDR_NO			
        ]]>
    </query>       	
      
	
	<query id="rbs1210_i01" desc="예상지 업체정보 등록" fetchSize="10">
        <![CDATA[
        
			INSERT   /* rbs1210_i01 */			   
			INTO      TBRS_YES_COM ( 
			           YES_COM_SEQ				-- 예상지 업체 고유번호
			          ,MEET_CD                  -- 경륜경정 구분
				      ,YES_COM_NM   			-- 예상지 업체명
				      ,MNGR_NM					-- 담당자 이름
				      ,TEL_NO					-- 전화번호
				      ,USE_YN					-- 사용여부
				      ,REG_DT					-- 등록일자
				      ,ORDR_NO					-- 조회순서
				      ,RMK       				-- 비고
			          ,INST_ID       			-- 등록자ID    
			          ,INST_DT        			-- 등록일자
			          ) VALUES (
			           (SELECT NVL(MAX(YES_COM_SEQ)+1,1)
			            FROM   TBRS_YES_COM)	-- 고유번호
			           ?,       -- 1. 경륜,경정 구분
			           ?,       -- 2. 예상지업체명
			           ?,       -- 3. 담당자 이름
			           ?,       -- 4. 전화번호    
			           ?,       -- 5. 사용유무
			           ?,       -- 6. 등록일자           
			           ?,		-- 7. 조회순서
			           ?, 		-- 8. 비고
			           ?,       -- 9. 등록자 사번
			           SYSDATE
			      )
        ]]>
    </query>      
    
    <query id="rbs1210_u01" desc="예상지 업체정보 수정" fetchSize="10">
        <![CDATA[
			UPDATE   /* rbs1210_u01 */
			         TBRS_YES_COM			
			SET      MEET_CD      = ?,         	-- 1.경륜경정 구분
			         YES_COM_NM   = ?,         	-- 2.업체명
			         MNGR_NM      = ?,     		-- 3.담당자 이름
			         TEL_NO       = ?,         	-- 4.전화번호    
			         USE_YN       = ?,         	-- 5.사용유무 
			         REG_DT       = ?,         	-- 6.등록일자
			         ORDR_NO      = ?,         	-- 7.조회순서
			         RMK          = ?,			-- 8.비고	
			         UPDT_ID      = ?,         	-- 9.등록자 ID    
			         UPDT_DT      = SYSDATE			        
			WHERE    YES_COM_SEQ = ?           	-- 10. 업체고유번호
        ]]>
    </query>

    <query id="rbs1210_u02" desc="예상지 업체 접속비밀번호 수정" fetchSize="10">
        <![CDATA[
			UPDATE   /* rbs1210_u02 */
			         TBRS_YES_COM			
			SET      YES_COM_PSWD = FC_ENC(?) 	-- 1.접속 비밀번호	
			        ,UPDT_ID      = ?         	-- 2.등록자 ID    
			        ,UPDT_DT      = SYSDATE			        
			WHERE    YES_COM_SEQ  = ?           	-- 3. 업체고유번호
        ]]>
    </query>

    <query id="rbs1210_d01" desc="예상지 업체정보 삭제" fetchSize="10">
        <![CDATA[
			DELETE   /* rbs1210_d01 */
			         TBRS_YES_COM	
			WHERE    YES_COM_SEQ = ?  -- 1. 업체고유번호    
        ]]>
    </query>    
        
</queryMap>