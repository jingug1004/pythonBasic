<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="rbr3010(임대관리)">
    <query id="rbr3010_s01" desc="임대조회" fetchSize="10">
      <![CDATA[
 			SELECT /* rbr3010_s01 */
				'0' AS CHK
				
				,BRNC_CD            --지점코드				
				,CNTR_STR_DT		--계약시작일자
				,CNTR_END_DT		--계약종료일자
				,POST_CD			--우편번호	
				,ADDR               --주소
				
				,DETL_ADDR			--상세주소
				,COMM_AREA_SQMT		--공용면적㎡		
				,COMM_AREA_PY		--공용면적(평)		
				,ONLY_AREA_SQMT		--전용면적㎡
				,ONLY_AREA_PY       --전용면적(평)
				
				,INSTALL_ALOW_DT	--설치허가일자			
				,OPEN_DT			--개장일자	
				,ENT_FIX_NUM		--입장정원		
				,LEASE_RATE			--전월세비율	
				,SQMT_AMT           --㎡당금액
				
				,CNTR_TOT_AMT		--계약총액		
				,LEASE				--월세
				,DEPOSIT			--보증금	
				,INTEREST_RATE		--이자율		
				,LEASE_COMP         --임대업체
				
				,LEASE_FIX_AMT      --임료결정금액
				,CORP_AMT           --공단금액
				,LANDLOAD_AMT       --건물주금액
				,CHAG_RATE          --부담비율
				,BOND_SECU_RANK     --채권확보순위
				,BOND_SECU_OBJ      --채권확보물권
				
                ,(COMM_AREA_SQMT+ ONLY_AREA_SQMT) TOT_AREA_SQMT    --계약면적(평)
                ,(COMM_AREA_PY + ONLY_AREA_PY) TOT_AREA_PY      --계약면적㎡
				
				
				,RMK				--비고
				,INST_ID			--작성자
				,INST_DT			--작성일시
				,UPDT_ID			--수정자
				,UPDT_DT            --수정일시
				
				
				,BOND_OBJ            -- 설정목적물       
				,CORP_ESTMR          -- 공단 평가업체    
				,LANDLOAD_ESTMR      -- 건물주 평가업체  

				,M2_MANA_COST        -- 제곱미터당 관리비
				,MM_AVG_MANA_COST    -- 월평균관리비     
				,WTR_HEAT_COST       -- 수도광열비       
				,YEAR_AVG_MANA_COST  -- 연간관리비       
				,MANA_CORP       -- 관리업체명       

			FROM 		TBRA_LEASE_MANA
			WHERE  BRNC_CD   LIKE  '%' || NVL(? , BRNC_CD) || '%'
                AND (CNTR_STR_DT >= ? AND CNTR_STR_DT <= ?
                    OR CNTR_END_DT >= ? AND CNTR_END_DT <= ?
                    OR CNTR_STR_DT >= ? AND CNTR_END_DT <= ?
                    OR CNTR_STR_DT <= ? AND CNTR_END_DT >= ?)
                       
             ORDER BY BRNC_CD, CNTR_STR_DT DESC     
				
        ]]>
        
    </query>       
    <query id="rbr3010_s02" desc="임대관리  채권현황" fetchSize="10">
      <![CDATA[
				 SELECT 
				     BRNC_CD        --지점
				    ,CNTR_STR_DT    --계약일자
				    ,SEQ_NO         --일련번호
				    ,BANK_NM        --은행명
				    
				    ,SECU_AMT       --담보금액
				    ,ACPT_DT        --접수일자
				    
				    ,INST_ID        --작성자
				    ,TO_CHAR(INST_DT,'YYYYMMDD')    INST_DT    --작성일자
				    ,UPDT_ID        --수정일자
				    ,UPDT_DT        --수정자
				    
				    ,DEL_YN
				    ,0  as CHK
				    
				FROM TBRA_LEASE_MANA_BOND
				WHERE BRNC_CD = ?
				    AND  CNTR_STR_DT = ?
				    AND  NVL(DEL_YN,'N') = 'N'
				    ORDER BY SEQ_NO DESC
                
        ]]>
    </query>      
        

    <query id="rbr3010_i01" desc="임대입력" fetchSize="10">

			INSERT INTO TBRA_LEASE_MANA (  /* rbr3010_i01 */

				 BRNC_CD            --지점코드	
				,CNTR_STR_DT	    --계약시장일자	
				,CNTR_END_DT        --계약종료일자				
				,POST_CD		    --우편번호		
				,ADDR               --주소
								
				,DETL_ADDR		    --상세주소		
				,COMM_AREA_SQMT	    --공용면적			
				,COMM_AREA_PY	    --공용면적(평)			
				,ONLY_AREA_SQMT	    --전용면적		
				,ONLY_AREA_PY       --전용면적(평)
				
				,INSTALL_ALOW_DT    --설치허가일자 				
				,OPEN_DT			--개장일자	
				,ENT_FIX_NUM		--입장정원		
				,LEASE_RATE			--전월세비율 	
				,SQMT_AMT           --㎡당금액
								
				,CNTR_TOT_AMT		--계약총액		
				,LEASE				--월세
				,DEPOSIT			--보증금	
				,INTEREST_RATE		--이자율		
				,LEASE_COMP         --임대업체
				
				,LEASE_FIX_AMT      --임료결정금액
                ,CORP_AMT           --공단금액
                ,LANDLOAD_AMT       --건물주금액
                ,CHAG_RATE          --부담비율
                ,BOND_SECU_RANK     --채권확보순위
                ,BOND_SECU_OBJ      --채권확보물권
								
				,RMK				--비고
				,BOND_OBJ            -- 설정목적물       
                ,CORP_ESTMR          -- 공단 평가업체    
                ,LANDLOAD_ESTMR      -- 건물주 평가업체  

                ,M2_MANA_COST        -- 제곱미터당 관리비
                ,MM_AVG_MANA_COST    -- 월평균관리비     
                ,WTR_HEAT_COST       -- 수도광열비       
                ,YEAR_AVG_MANA_COST  -- 연간관리비       
                ,MANA_CORP           -- 관리업체명       
                
                
                
				,INST_ID			--작성자	
				,INST_DT            --작성일시
				
				

			) VALUES (

				  ?             -- BRNC_CD
				, ?             -- CNTR_STR_DT
				, ?             -- CNTR_END_DT
				, ?             -- POST_CD
				, ?             -- ADDR
				
				
				, ?             -- DETL_ADDR
				, ?             -- COMM_AREA_SQMT
				, ?             -- COMM_AREA_PY
				, ?             -- ONLY_AREA_SQMT
				, ?             -- ONLY_AREA_PY
				
				
				, ?             -- INSTALL_ALOW_DT
				, ?             -- OPEN_DT
				, ?             -- ENT_FIX_NUM
				, ?             -- LEASE_RATE
				, ?             -- SQMT_AMT
				
				
				, ?             -- CNTR_TOT_AMT
				, ?             -- LEASE
				, ?             -- DEPOSIT
				, ?             -- INTEREST_RATE
				, ?             -- LEASE_COMP
				
				, ?             --임료결정금액
                , ?             --공단금액
                , ?             --건물주금액
                , ?             --부담비율
                , ?             --채권확보순위
                , ?             --채권확보물권
                
                
				, ?             -- RMK
				, ?             -- 설정목적물       
                , ?             -- 공단 평가업체    
                , ?             -- 건물주 평가업체  

                , ?             -- 제곱미터당 관리비
                , ?             -- 월평균관리비     
                , ?             -- 수도광열비       
                , ?             -- 연간관리비       
                , ?             -- 관리업체명
                
				, ?             -- INST_ID
			    , SYSDATE		-- INST_DT

			)

   

    </query> 

    

    <query id="rbr3010_u01" desc="임대수정" fetchSize="10">

        <![CDATA[

			UPDATE TBRA_LEASE_MANA SET  /* rbr3010_u01 */
				
				  CNTR_END_DT  = ?      --계약종료일자
				, POST_CD  = ?          --우편번호
				, ADDR  = ?             --주소
				, DETL_ADDR  = ?        --상세주소
				, COMM_AREA_SQMT  = ?   --공용면적
				
				
				, COMM_AREA_PY  = ?     --공용면적(평)
				, ONLY_AREA_SQMT  = ?   --전용면적
				, ONLY_AREA_PY  = ?     --전용면적(평)
				, INSTALL_ALOW_DT  = ?  --설치허가일자
				, OPEN_DT  = ?          --개장일자
				
				, ENT_FIX_NUM  = ?      --입장정원
				, LEASE_RATE  = ?       --전월세비율
				, SQMT_AMT  = ?         --㎡당금액
				, CNTR_TOT_AMT  = ?     --계약총액
				, LEASE  = ?            --월세
				
				, DEPOSIT  = ?          --보증금
				, INTEREST_RATE  = ?    --이자율
				, LEASE_COMP  = ?       --임대업체
				
				, LEASE_FIX_AMT      = ? --임료결정금액
                , CORP_AMT           = ? --공단금액
                , LANDLOAD_AMT       = ? --건물주금액
                , CHAG_RATE          = ? --부담비율
                , BOND_SECU_RANK     = ? --채권확보순위
                , BOND_SECU_OBJ      = ? --채권확보물권
                
                
				, RMK                   = ? -- 비고
				, BOND_OBJ              = ? -- 설정목적물       
                , CORP_ESTMR            = ? -- 공단 평가업체    
                , LANDLOAD_ESTMR        = ? -- 건물주 평가업체  

                , M2_MANA_COST          = ? -- 제곱미터당 관리비
                , MM_AVG_MANA_COST      = ? -- 월평균관리비     
                , WTR_HEAT_COST         = ? -- 수도광열비       
                , YEAR_AVG_MANA_COST    = ? -- 연간관리비       
                , MANA_CORP             = ? -- 관리업체명
                
				, UPDT_ID  = ?          --수정자
				, UPDT_DT = SYSDATE     --수정일시

			WHERE BRNC_CD  = ?          --지점코드
				AND CNTR_STR_DT  = ?    --계약시작일자
        ]]>

    </query>    


   <query id="rbr3010_i02" desc="임대관리 채권 입력" fetchSize="10">

          INSERT INTO TBRA_LEASE_MANA_BOND (  /* rbr3010_i02 */

                     BRNC_CD        --지점
                    ,CNTR_STR_DT    --계약일자
                    ,SEQ_NO         --일련번호
                    ,BANK_NM        --은행명
                    
                    ,SECU_AMT       --담보금액
                    ,ACPT_DT        --접수일자
                    
                    ,DEL_YN         --삭제여부
                    ,INST_ID        --작성자
                    ,INST_DT        --작성일자

            ) VALUES (

                  ?             -- 지점
                , ?             -- 계약일자
                ,      ( SELECT
                                NVL(MAX(SEQ_NO),0) + 1
                         FROM  TBRA_LEASE_MANA_BOND
                         WHERE BRNC_CD = ?
                            AND CNTR_STR_DT = ?                  
                        )             -- 일련번호
                , ?             -- 은행명

                
                , ?             -- 담보금액
                , ?             -- 접수일자

                , 'N'
                , ?             -- INST_ID
                , SYSDATE       -- INST_DT

            )

    </query>
    
   <query id="rbr3010_u02" desc="임대관리 채권수정" fetchSize="10">

        <![CDATA[

            UPDATE TBRA_LEASE_MANA_BOND SET  /* rbr3010_u02 */

                     BANK_NM    = ?                 --은행명
                    
                    ,SECU_AMT   = ?                 --담보금액
                    ,ACPT_DT    = ?                 --접수일자                   
            
                    ,UPDT_ID    = ?                 --수정자
                    ,UPDT_DT    = SYSDATE           --수정일시

            WHERE BRNC_CD  = ?                      --지점
                AND CNTR_STR_DT  = ?                --계약일자
                AND SEQ_NO  = ?                     --일련번호

        ]]>

    </query>    
    
     
    <query id="rbr3010_d01" desc="임대삭제" fetchSize="10">

        <![CDATA[

			DELETE TBRA_LEASE_MANA   /* rbr3010_d01 */	

			WHERE BRNC_CD  = ?           --지점코드
				AND CNTR_STR_DT  = ?     --계약시작일자

        ]]>

    </query>  


    <query id="rbr3010_d02" desc="임대관리 채권삭제" fetchSize="10">

        <![CDATA[

            UPDATE TBRA_LEASE_MANA_BOND SET    /* rbr3010_d02 */  
                    DEL_YN = 'Y'
            WHERE BRNC_CD  = ?           --지점코드
                AND CNTR_STR_DT  = ?     --계약시작일자
                AND SEQ_NO  = ?          --일련번호

        ]]>

    </query>  
    
    
   <query id="rbr3010_d03" desc="임대관리 채권 일괄삭제" fetchSize="10">

        <![CDATA[

            DELETE TBRA_LEASE_MANA_BOND   /* rbr3010_d03 */  

            WHERE BRNC_CD  = ?           --지점코드
                AND CNTR_STR_DT  = ?     --계약시작일자

        ]]>

    </query>
</queryMap>