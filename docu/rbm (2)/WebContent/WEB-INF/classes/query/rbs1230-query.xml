<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="RBS1230(예상 결과 관리)">
    
    <query id="rbs1230_s01" desc="경주 리스트 조회" fetchSize="10">
        <![CDATA[  
			SELECT /* rbs1230_s01 */
                   RACE_NO,
			       (SELECT  COUNT(*)
			          FROM  TBRS_YES_SANG B
			          WHERE A.MEET_CD = B.MEET_CD
			          AND   A.STND_YEAR = B.STND_YEAR
			          AND   A.TMS = B.TMS
			          AND   A.DAY_ORD = B.DAY_ORD
			          AND   A.RACE_NO = B.RACE_NO
			          AND   NVL(TRIM(B.YESANG),'-') != '-') AS COM_CNT
			FROM   TBES_SDL_TM A 
			WHERE  MEET_CD   = ?
			AND    STND_YEAR = ?
			AND    TMS       = ?
			AND    DAY_ORD   = ?
			ORDER BY RACE_NO	
        ]]>
    </query>
           	
    <query id="rbs1230_s02" desc="경주결과 조회" fetchSize="10">
        <![CDATA[      
			SELECT /* rbs1230_s02 */
			       '결과' AS YES_COM_NM
		          ,FC_GET_RSLT_RANK(?, ?, ?, ?, ?) AS YESANG
		          ,6 AS AB
		          ,3 AS BA
		          ,3 AS AC
		          ,3 AS ABC  
		          ,6 AS EX_A
		          ,6 AS EX_AB
		          ,3 AS EX_AC
		          ,3 AS EX_BA
		          ,20 AS RT_AB
		          ,15 AS RT_BA
		          ,0 AS RT_AC
			FROM DUAL
        ]]>
    </query>
    
    <query id="rbs1230_s03" desc="예상결과 조회" fetchSize="10">
        <![CDATA[  
			SELECT /* rbs1230_s03 */
			       A.YES_COM_SEQ
			      ,B.YES_COM_NM
			      ,STND_YEAR
			      ,A.MEET_CD
			      ,TMS
			      ,DAY_ORD
			      ,RACE_NO
			      ,YESANG
			      ,AB
			      ,AC
			      ,BA
			      ,CA
			      ,ABC
			      ,EX_AB
			      ,EX_ABC
			      ,EX_AC
			      ,EX_A
			      ,AUTO
			      ,RATE		--쌍승 배당률
			      ,RATE_QU	--복승 배당률
			      ,ETC
			      ,EXCLUSION
			      ,EX_BA
			      ,RT_AB
			      ,RT_BA
			      ,0 RT_AC
			      ,(AB + BA + AC + ABC + EX_A + EX_AB + EX_AC + EX_BA + RT_AB + RT_BA ) AS TOT_SCR
			FROM  TBRS_YES_SANG A, TBRS_YES_COM B
			WHERE A.YES_COM_SEQ = B.YES_COM_SEQ
			AND   A.MEET_CD     = ?
			AND   STND_YEAR     = ?
			AND   TMS           = ?
			AND   DAY_ORD       = ?
			AND   RACE_NO       = ?
			ORDER BY B.ORDR_NO
				
        ]]>
    </query>       	
      

    <query id="rbs1230_u01" desc="예상결과 수정" fetchSize="10">
        <![CDATA[
			UPDATE  /* rbs1230_u01 */
			        TBRS_YES_SANG DST			
			SET     YESANG    = ?
			       ,AB        = ?
			       ,AC        = ?
			       ,BA        = ?
			       ,CA        = ?
			       ,ABC       = ?
			       ,EX_AB     = ?
			       ,EX_ABC    = ?
			       ,EX_AC     = ?
			       ,EX_A      = ?
			       ,AUTO      = ?
			       ,RATE      = ?
			       ,RATE_QU   = ? 
			       ,ETC       = ?
			       ,EXCLUSION = ?
			       ,EX_BA     = ?
			       ,RT_AB     = ?
			       ,RT_BA     = ?
			       ,UPDT_ID   = ?
			       ,UPDT_DT   = SYSDATE
			WHERE YES_COM_SEQ = ?
			AND   MEET_CD   = ?
			AND   STND_YEAR   = ?
			AND   TMS         = ?
			AND   DAY_ORD     = ?
			AND   RACE_NO     = ?
        ]]>
    </query>

        
</queryMap>