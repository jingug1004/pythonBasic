<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="rsy3050(사용자 관리)">
    <query id="rsy3050_s01" desc="사용자 조회" fetchSize="10">
      <![CDATA[
            SELECT  /*rsy3050_s01 */
                    '0' AS CHK
                    ,A.GBN          --구분코드
					,A.USER_ID      --사용자ID
					,A.PSWD         --비밀번호
					,A.USER_NM      --사용자명
					,A.EMAIL        --이메일
					,A.HP_NO        --이동전화번호
					,A.TEL_NO       --전화번호
					,A.FLOC         --직위
					,A.FGRADE       --직급
					,A.BRNC_CD      --지점코드
					,A.ASSO_CD      --대분류코드
					,A.DEPT_CD      --부서코드
					,A.TEAM_CD      --팀코드
					,A.TEAM_DETL_CD      --팀상세코드
					,A.ASSO_NM      --대분류명
					,A.DEPT_NM      --부서명
					,A.TEAM_NM      --팀명
					,A.INST_ID      --작성자
					,A.INST_DT      --작성일시
					,A.UPDT_ID      --수정자
					,A.UPDT_DT      --수정일시
              FROM  TBRK_USER A       --사용자 관리
             WHERE  1 = 1
               AND  A.USER_NM LIKE NVL('%'|| ? ||'%', A.USER_NM)
               AND  A.GBN = ? 
               AND  A.USER_ID LIKE NVL('%'|| ? ||'%', A.USER_ID)
             ORDER BY  A.ORD_NO  ,A.USER_ID
            
        ]]>
    </query>  
    
    <query id="rsy3050_s02" desc="사용자 조회" fetchSize="10">
      <![CDATA[
            SELECT  
                    '0' AS CHK
                    ,A.GBN          --구분코드
                    ,A.USER_ID      --사용자ID
                    ,A.PSWD         --비밀번호
                    ,A.USER_NM      --사용자명
                    ,A.EMAIL        --이메일
                    ,A.HP_NO        --이동전화번호
                    ,A.TEL_NO       --전화번호
                    ,A.FLOC         --직위
                    ,A.FGRADE       --직급
                    ,A.BRNC_CD      --지점코드
                    ,A.ASSO_CD      --대분류코드
                    ,A.DEPT_CD      --부서코드
                    ,A.TEAM_CD      --팀코드
					,A.TEAM_DETL_CD      --팀상세코드
                    ,A.ASSO_NM      --대분류명
                    ,A.DEPT_NM      --부서명
                    ,A.TEAM_NM      --팀명
                    ,A.INST_ID      --작성자
                    ,A.INST_DT      --작성일시
                    ,A.UPDT_ID      --수정자
                    ,A.UPDT_DT      --수정일시
              FROM  TBRK_USER A       --사용자 관리
             WHERE  1 = 1
               AND  A.USER_NM LIKE NVL('%'|| ? ||'%', A.USER_NM)
               AND  A.GBN <>  ? 
             ORDER BY  A.ORD_NO  , A.USER_ID
            
        ]]>
    </query>     

   <query id="rsy3050_m01" desc="사용자  입력/수정" fetchSize="10">
        <![CDATA[
        
             MERGE INTO TBRK_USER A  --사용자 관리 /* rsy3050_m01 */
             USING   
                     (SELECT
                     
                         ? AS GBN          --구분코드
						,? AS USER_ID      --사용자ID
						,? AS PSWD         --비밀번호
						,? AS USER_NM      --사용자명
						,? AS EMAIL        --이메일
						
					    ,? AS HP_NO        --이동전화번호
						,? AS TEL_NO       --전화번호
						,? AS FLOC         --직위
						,? AS FGRADE       --직급
						,? AS BRNC_CD      --지점코드
						,? AS ASSO_CD      --대분류코드
						
						,? AS DEPT_CD      --부서코드
						,? AS TEAM_CD      --팀코드
						,? AS TEAM_DETL_CD -- 팀상세코드 
						,? AS ASSO_NM      --대분류명
						,? AS DEPT_NM      --부서명
						,? AS TEAM_NM      --팀명
						,? AS RETIRE_GBN	-- 퇴직여부
						
						,? AS INST_ID      --작성자
						,? AS UPDT_ID      --수정자

                       
                     FROM    DUAL ) B  
                 
             ON (    
                     A.GBN = B.GBN   
                     AND A.USER_ID = B.USER_ID
             )           
             
             WHEN MATCHED THEN
                 UPDATE SET

                     A.USER_NM     = B.USER_NM         --사용자명
                    ,A.EMAIL       = B.EMAIL           --이메일
                    
                    ,A.HP_NO       = B.HP_NO           --이동전화번호
                    ,A.TEL_NO      = B.TEL_NO          --전화번호
                    ,A.FLOC        = B.FLOC            --직위
                    ,A.FGRADE      = B.FGRADE          --직급
                    ,A.BRNC_CD     = B.BRNC_CD         --지점코드
                    ,A.ASSO_CD     = B.ASSO_CD         --대분류코드
                    ,A.DEPT_CD     = B.DEPT_CD         --부서코드
                    ,A.TEAM_CD     = B.TEAM_CD         --팀코드
                    ,A.TEAM_DETL_CD = B.TEAM_DETL_CD  -- 팀상세코드
                    ,A.ASSO_NM     = B.ASSO_NM         --대분류명
                    ,A.DEPT_NM     = B.DEPT_NM         --부서명
                    ,A.TEAM_NM     = B.TEAM_NM         --팀명
                    ,A.RETIRE_GBN  = B.RETIRE_GBN		--퇴사여부

                    ,A.UPDT_ID     = B.UPDT_ID         --수정자
                    ,A.UPDT_DT     = SYSDATE           --수정일시 
             WHEN NOT MATCHED THEN 
                 
                 INSERT (
                 
                         A.GBN          --구분코드
                        ,A.USER_ID      --사용자ID
                        ,A.PSWD         --비밀번호
                        ,A.USER_NM      --사용자명
                        ,A.EMAIL        --이메일
                        
                        ,A.HP_NO        --이동전화번호
                        ,A.TEL_NO       --전화번호
                        ,A.FLOC         --직위
                        ,A.FGRADE       --직급
                        ,A.BRNC_CD      --지점코드
                        ,A.ASSO_CD      --대분류코드
                        
                        ,A.DEPT_CD      --부서코드
                        ,A.TEAM_CD      --팀코드
                        ,A.ASSO_NM      --대분류명
                        ,A.DEPT_NM      --부서명
                        ,A.TEAM_NM      --팀명
                        ,A.TEAM_DETL_CD
                        ,A.RETIRE_GBN
                        
                        ,A.ORD_NO       -- 정렬순서
                        ,A.INST_ID      --작성자
                        ,A.INST_DT      --작성일시
                 ) VALUES (
                 
                         B.GBN          --구분코드
                        ,B.USER_ID      --사용자ID
                        ,B.PSWD         --비밀번호
                        ,B.USER_NM      --사용자명
                        ,B.EMAIL        --이메일
                        
                        ,B.HP_NO        --이동전화번호
                        ,B.TEL_NO       --전화번호
                        ,B.FLOC         --직위
                        ,B.FGRADE       --직급
                        ,B.BRNC_CD      --지점코드
                        ,B.ASSO_CD      --대분류코드
                        
                        ,B.DEPT_CD      --부서코드
                        ,B.TEAM_CD      --팀코드
                        ,B.ASSO_NM      --대분류명
                        ,B.DEPT_NM      --부서명
                        ,B.TEAM_NM      --팀명
                        ,B.TEAM_DETL_CD
                        ,B.RETIRE_GBN
                        
                        ,'999999999999999'
                        ,B.INST_ID      --작성자
                        ,SYSDATE        --작성일시
                 )
                
        
        ]]>

    </query>    

    <query id="rsy3050_u01" desc="암호 수정" fetchSize="10">
        <![CDATA[
            UPDATE TBRK_USER 
            SET  /* rsy3050_u01 */            
                  PSWD        = ?               --암호 
                 ,UPDT_ID     = ?              --수정자
                 ,UPDT_DT     = SYSDATE         --수정일시
            WHERE GBN = ?
                AND USER_ID = ?
        ]]>
    </query>
        
    <query id="rsy3050_u02" desc="암호 수정" fetchSize="10">
        <![CDATA[
            UPDATE TBRK_USER 
             SET  /* rsy3050_u02 */            
                   PSWD        = ?               --암호 
                  ,UPDT_ID     = ?              --수정자
                  ,UPDT_DT     = SYSDATE         --수정일시
            WHERE  GBN     = '003'
              AND  USER_ID = ?
              AND  PSWD    = ?
        ]]>
    </query>    
   
    <query id="rsy3050_d01" desc="사용자  삭제" fetchSize="10">

        <![CDATA[

            DELETE TBRK_USER   --사용자 관리 /* rsy3050_d01 */ 

            WHERE GBN = ?
                 AND USER_ID = ?
        ]]>

    </query>  


    <query id="rsy3050_d03" desc="특별관리자  권한  삭제" fetchSize="10">

        <![CDATA[

            DELETE TBRK_ADMIN_INFO   --사용자 관리 /* rsy3050_d03 */ 

            WHERE USER_ID = ?
        ]]>

    </query>
    <query id="rsy3050_d04" desc="권한적용부서  삭제" fetchSize="10">

        <![CDATA[

            DELETE TBRK_AUTH_APLY_DEPT   --사용자 관리 /* rsy3050_d04 */ 

            WHERE USER_ID = ?
        ]]>

    </query>  


  <query id="rsy3050_s03" desc="사용자 조회" fetchSize="10">
      <![CDATA[
            SELECT  
                    '0' AS CHK
                    ,A.GBN          --구분코드
                    ,A.USER_ID      --사용자ID
                    ,A.PSWD         --비밀번호
                    ,A.USER_NM      --사용자명
                    ,A.EMAIL        --이메일
                    ,A.HP_NO        --이동전화번호
                    ,A.TEL_NO       --전화번호
                    ,A.FLOC         --직위
                    ,A.FGRADE       --직급
                    ,A.BRNC_CD      --지점코드
                    ,A.ASSO_CD      --대분류코드
                    ,A.DEPT_CD      --부서코드
                    ,A.TEAM_CD      --팀코드
                    ,A.TEAM_DETL_CD      --팀상세코드
                    ,A.ASSO_NM      --대분류명
                    ,A.DEPT_NM      --부서명
                    ,A.TEAM_NM      --팀명
                    ,A.INST_ID      --작성자
                    ,A.INST_DT      --작성일시
                    ,A.UPDT_ID      --수정자
                    ,A.UPDT_DT      --수정일시
              FROM  TBRK_USER A       --사용자 관리
             WHERE  1 = 1
               AND  A.USER_ID LIKE NVL('%'|| ? ||'%', A.USER_ID)
             ORDER BY  A.ORD_NO, A.USER_ID  
            
        ]]>
    </query>  
</queryMap>