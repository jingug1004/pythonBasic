<?xml version="1.0" encoding="EUC-KR"?>

<service name="rsy2010" initial="SetResultKeys">
  <activity name="SetResultKeys"            class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile"    value="resultkey.properties" />
    <property name="resultKeyList"          value="dsMenuGrpValue|dsMenuGrpList|dsUserListValue|ds_accessAllowedMenu|dsMyMenu|gdsMyMenu" />
    <transition name="success"              value="EventRouter" />
  </activity>

  <activity name="EventRouter"              class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchMenuGrpList"    value="searchMenuGrpList" /> <!-- 메뉴그룹  조회 -->  
    <transition name="searchMenuGrpValue"   value="searchMenuGrpValue" /> <!-- 메뉴그룹  조회 -->  
    <transition name="searchUserList"       value="searchUserList" />  <!-- 메뉴리스트  조회 -->
    <transition name="saveMenuAuth"         value="saveMenuAuth" />    
    <transition name="searchMyMenuMng"      value="searchMyMenuMng" />    
    <transition name="searchMyMenu"         value="searchMyMenu" />    
    <transition name="saveMyMenu"         	value="saveMyMenu" />    
    <transition name="success"              value="end" />
  </activity>

  <!-- 메뉴그룹  조회 -->
  <activity name="searchMenuGrpValue"       class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="end" />
    <property name="resultkey"              value="dsMenuGrpValue" />
    <property name="sqlkey"                 value="rsy3030_s01" />

    <property name="param-count"            value="2" />
    <property name="param0"                 value="MN_GRP" />
    <property name="param1"                 value="USER_ID" />
    
    <property name="dao"                    value="rbmdao" />   
  </activity>

  
  
  <!-- 사용자  조회 -->
  <activity name="searchUserList"        class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="end" />
    <property name="resultkey"              value="dsUserListValue" />
    <property name="sqlkey"                 value="rsy3030_s02" />
    <property name="param-count"            value="2" />
    <property name="param0"                 value="MN_ID" />
    <property name="param1"                 value="DEPT_CD" />
    <property name="dao"                    value="rbmdao" />  
  </activity>
  
  <activity name="saveMenuAuth"             class="snis.rbm.system.rsy3030.activity.SaveMenuAuth">
    <transition name="success"              value="end" />
  </activity>    

  <!-- 나의 메뉴  조회 -->
  <activity name="searchMyMenuMng"        class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="end" />
    <property name="resultkey"              value="dsMyMenu" />
    <property name="sqlkey"                 value="rsy3030_s11" />
    <property name="param-count"            value="2" />
    <property name="param0"                 value="USER_ID" />
    <property name="param1"                 value="USER_ID" />
    <!-- <property name="param2"                 value="USER_ID" />
    <property name="param3"                 value="USER_ID" /> -->
    <property name="dao"                    value="rbmdao" />  
  </activity>

  <!-- 나의 메뉴  조회 -->
  <activity name="searchMyMenu"        class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="end" />
    <property name="resultkey"              value="gdsMyMenu" />
    <property name="sqlkey"                 value="rsy3030_s12" />
    <property name="param-count"            value="1" />
    <property name="param0"                 value="USER_ID" />
    <property name="dao"                    value="rbmdao" />  
  </activity>

  <!--  나의 메뉴 저장 -->
  <activity name="saveMyMenu"             class="snis.rbm.system.rsy3030.activity.SaveMyMenu">
    <transition name="success"              value="searchMyMenuMng" /> 
  </activity>    

  <transaction-manager id="tx_rbm" commit="true" />
</service>