<?xml version="1.0" encoding="EUC-KR"?>

<service name="rem4060" initial="SetResultKeys">

  <activity name="SetResultKeys"            class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  

    <property name="staticResultKeyFile"    value="resultkey.properties" />
    <property name="resultKeyList"          value="dsCardList|dsSendStatus|dsDigit" />
    <transition name="success"              value="EventRouter" />
  </activity>

  <activity name="EventRouter"              class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchCardList"  	    value="searchCardList" />         <!--  기간별 수신현황 조회 -->
    <transition name="searchSendStatus"  	value="searchSendStatus" />         <!--  기간별 수신현황 조회 -->
    <transition name="createEventData"  	value="createEventData" />         <!--  기간별 수신현황 조회 -->
    <transition name="searchEventDigit"  	value="searchEventDigit" />         <!--  기간별 수신현황 조회 -->
    <transition name="saveEventNum"  	    value="saveEventNum" />         <!--  기간별 수신현황 조회 -->
    <transition name="saveWinNo"  	    value="saveWinNo" />         <!--  기간별 수신현황 조회 -->
    <transition name="success"              value="end" />
  </activity>
  
  <!-- 당일 입장카드 번호 조회 -->  
  <activity name="searchCardList"           class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="searchEventDigit" />
    <property name="resultkey"              value="dsCardList" />
    <property name="sqlkey"                 value="rem4060_s01" />    
    <property name="param-count"            value="1" />    
    <property name="param0"                 value="EVENT_DT" />  		<!--  시작일자  -->
    <property name="dao"                    value="rbmdao" />
  </activity>  
  
  <!--  이벤트 추첨용 접속정보 생성 -->  
  <activity name="createEventData"          class="snis.rbm.business.rem4060.activity.SaveEventData">
    <transition name="success"              value="searchCardList" />
    <property name="resultkey"              value="" />    
    <property name="dao"                    value="rbmdao" />
  </activity>  
  
  <!--  이벤트 추첨번호 저장 -->  
  <activity name="saveEventNum"             class="snis.rbm.business.rem4060.activity.SaveEventNum">
    <transition name="success"              value="searchEventDigit" />
    <property name="resultkey"              value="" />    
    <property name="dao"                    value="rbmdao" />
  </activity>  
  
  <!--  기간별 수신현황 조회 -->  
  <activity name="searchSendStatus"       class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="end" />
    <property name="resultkey"              value="dsSendStatus" />
    <property name="sqlkey"                 value="rem4050_s01" />    
    <property name="param-count"            value="2" />    
    <property name="param0"                 value="EVENT_DT" />  		<!--  시작일자  -->
    <property name="param1"                 value="EVENT_DT" />  		<!--  종료일자  -->   
    <property name="dao"                    value="rbmdao" />
  </activity>  
  
  <!--  자리수별 번호 조회 -->  
  <activity name="searchEventDigit"       class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"              value="end" />
    <property name="resultkey"              value="dsDigit" />
    <property name="sqlkey"                 value="rem4060_s02" />    
    <property name="param-count"            value="1" />    
    <property name="param0"                 value="EVENT_DT" />  		<!--  시작일자  -->
    <property name="dao"                    value="rbmdao" />
  </activity>  
  
  <!--  이벤트 추첨용 접속정보 생성 -->  
  <activity name="saveWinNo"          class="snis.rbm.business.rem4060.activity.SaveWinNo">
    <transition name="success"              value="searchEventDigit" />
    <property name="resultkey"              value="" />    
    <property name="dao"                    value="rbmdao" />
  </activity>  
  
  <transaction-manager id="tx_rbm" commit="true" />

</service>



