<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbr1050" initial="SetResultKeys">
  <activity     name="SetResultKeys"          class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property   name="staticResultKeyFile"    value="resultkey.properties" />
    <property   name="resultKeyList"          value="dsRaceInfo|dsRptPrepSitu" />
    <transition name="success"                value="EventRouter" />
  </activity>

  <activity name="EventRouter"                class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchRaceInfo"      	  value="searchRaceInfo" />        <!-- 경주개최 준비상황 조회 -->
    <transition name="searchRptPrepSitu"      value="searchRptPrepSitu" />        <!-- 경주개최 준비상황 조회 -->
    <transition name="saveRptPrepSitu"        value="saveRptPrepSitu" />          <!-- 경주개최 준비상황 저장 -->   
    <transition name="copyRptPrepSitu"        value="copyRptPrepSitu" />        <!-- 경주개최 준비상황 조회 -->
  </activity>
  
	<!-- 경주 기본 정보 -->
	<activity name="searchRaceInfo" 	class="com.posdata.glue.miplatform.biz.activity.PosSearch">
	  <transition name="success" 		value="searchRptPrepSitu" />
	  <property name="resultkey" 		value="dsRaceInfo" />
	  <property name="sqlkey" 		  	value="rsm2010_s01" />
	  <property name="param-count" 	  	value="1" />
	  <property name="param0" 		  	value="RACE_DAY" />	<!-- 경주일 yyyymmdd  -->
	  <property name="dao" 			  	value="rbmdao" />
	</activity>

  
 <!-- 경주개최 준비상황  조회  -->
  <activity name="searchRptPrepSitu"    class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="end" />
    <property name="resultkey"          value="dsRptPrepSitu" />
    <property name="sqlkey"             value="rbr1050_s01" />
    <property name="param-count"        value="2" />    
    <property name="param0"             value="RACE_DAY" />   	<!-- 경주일자       -->    
    <property name="param1"             value="BRNC_CD" />   	<!-- 지점 코드       -->    
    <property name="dao"                value="rbmdao" />
  </activity>
  
    <!-- 경주개최 준비상황 저장  -->
  <activity name="saveRptPrepSitu"      class="snis.rbm.business.rbr1050.activity.SaveRptPrepSitu">
    <transition name="success" 			value="searchRptPrepSitu" />
	<property name="dao" 				value="rbmdao" />
  </activity>  

  <!-- 전일 자료로 복사 -->
  <activity name="copyRptPrepSitu" 		class="snis.rbm.business.rbr1050.activity.CopyRptPrepSitu">
    <transition name="success" 			value="searchRptPrepSitu" />
	<property name="dao" 				value="rbmdao" />
  </activity>

  <transaction-manager id="tx_rbm" commit="true" />

</service>