<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbo1010" initial="SetResultKeys">

  <activity name="SetResultKeys" 			class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile" 	value="resultkey.properties" />
    <property name="resultKeyList" 			value="dsProfitMana|dsTms" />
    <transition name="success" 				value="EventRouter" />
  </activity>

  <activity name="EventRouter" 				class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchProfitMana"  	value="searchProfitMana" />   <!-- 입장인원 조회  -->
    <transition name="searchTms"            value="searchTms" />          <!-- 회차 조회  -->
    <transition name="saveProfitMana"   	value="saveProfitMana" />     <!-- 입장인원 저장  -->
    <transition name="searchTms"            value="searchTms" />          <!-- 회차 조회  -->
  </activity>

  <!-- 입장인원 조회 -->
   <activity name="searchProfitMana"    class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 			value="end" />

    <property name="resultkey" 			value="dsProfitMana" />
    <property name="sqlkey"				value="rbo1010_s01" />

    <property name="param-count" 		value="3" />
    
    <property name="param0" 			value="GBN" />           <!-- 구분  -->
    <property name="param1" 			value="GEN_DT_FROM" />   <!-- 경주일From -->
    <property name="param2" 			value="GEN_DT_TO" />     <!-- 경주일To   -->
    
    <property name="dao" 				value="rbmdao" />

  </activity>  
  
  <!-- 입장인원 저장 -->
  <activity name="saveProfitMana" 		class="snis.rbm.business.rbo1010.activity.SaveProfitMana">
    <transition name="success" 			value="end" />
  </activity>	 

  <!-- 회차 조회 -->
   <activity name="searchTms"           class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="end" />

    <property name="resultkey"          value="dsTms" />
    <property name="sqlkey"             value="rbo1010_s03" />

    <property name="param-count"        value="1" />
    
    <property name="param0"             value="RACE_DT" />           <!-- 경주일  -->
    
    <property name="dao"                value="rbmdao" />
  </activity> 
    
  <!-- 회차 조회 -->
   <activity name="searchTms"           class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="end" />

    <property name="resultkey"          value="dsTms" />
    <property name="sqlkey"             value="rbo1010_s03" />

    <property name="param-count"        value="1" />
    
    <property name="param0"             value="RACE_DT" />  <!-- 경주일자  -->
    
    <property name="dao"                value="rbmdao" />

  </activity>
  
  <transaction-manager id="tx_rbm" commit="true" />
</service>