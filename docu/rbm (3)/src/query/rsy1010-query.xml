<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="RSY1010(코드등록)">
    <query id="rsy1010_s01" desc="그룹코드체크" fetchSize="10">
        <![CDATA[
			SELECT  /* rsy1010_s01 */
			     GRP_CD          --그룹코드
			  FROM  TBRK_GRP_CD  --마스터코드
			 WHERE  1=1      
			   AND  GRP_CD = ?   --그룹코드
        ]]>
    </query> 

    <query id="rsy1010_s03" desc="그룹코드조회" fetchSize="10">
        <![CDATA[
			SELECT /* rsy1010_s03 */
					    '0' AS CHK
					    , GRP_CD      --그룹코드
					    , GRP_NM      --그룹명
					    , RMK         --비고
					    , DEL_YN      --삭제여부
					    , INST_ID     --작성자

					    , INST_DT     --작성일시
					    , UPDT_ID     --수정자
					    , UPDT_DT     --수정일시

			  FROM  TBRK_GRP_CD   --마스터코드
			 WHERE 	1=1
			   AND  DEL_YN = ?   --삭제여부
  			   AND  GRP_NM LIKE '%' || NVL(?, GRP_NM) || '%'  --그룹명
			   AND  GRP_CD IN (SELECT GRP_CD FROM TBRK_SPEC_CD WHERE CD_NM LIKE '%' || NVL(?, CD_NM) || '%') --그룹코드
          ORDER BY 	GRP_CD  --그룹코드
        ]]>
    </query>       
    
    <query id="rsy1010_s02" desc="상세코드체크" fetchSize="10">
        <![CDATA[
			SELECT 	/* rsy1010_s02 */
			        CD            --상세코드

			  FROM 	TBRK_SPEC_CD  --상세코드
			 WHERE  1=1
			   AND 	GRP_CD = ?    --그룹코드
			   AND 	CD     = ?    --상세코드
        ]]>
    </query> 

    <query id="rsy1010_s04" desc="상세코드조회" fetchSize="10">
        <![CDATA[
			SELECT   /* rsy1010_s04 */
					    '0' AS CHK
					    , A.GRP_CD     --그룹코드
					    , A.CD         --상세코드
					    , A.CD_NM      --상세코드명
					    , A.CD_NM2     --상세코드명2
					    , A.CD_TERM1   --조회조건1

					    , A.CD_TERM2   --조회조건2
					    , A.CD_TERM3   --조회조건3
					    , A.CD_TERM4   --조회조건4
					    , A.CD_TERM5   --조회조건5
					    , A.ORD_NO     --정렬순서

					    , A.RMK        --비고
					    , A.DEL_YN     --삭제여부
					    , A.INST_ID    --작성자
					    , A.INST_DT    --작성일시
					    , A.UPDT_ID    --수정자

					    , A.UPDT_DT    --수정일시
					    , B.GRP_NM     --그룹이름

              FROM 	TBRK_SPEC_CD A  --상세코드
				   ,TBRK_GRP_CD  B  --마스터코드
				   
             WHERE 	1=1
               AND  A.GRP_CD = B.GRP_CD
			   AND  A.GRP_CD = ?         --그룹코드
        ]]>
    </query> 

    <query id="rsy1010_i01" desc="그룹코드입력" fetchSize="10">
        <![CDATA[
			INSERT INTO TBRK_GRP_CD ( --마스터코드
			        /* rsy1010_i01 */
			      GRP_CD    --그룹코드
			    , GRP_NM    --그룹이름
			    , DEL_YN    --삭제여부
			    , INST_ID   
			    , INST_DT

			    , UPDT_ID
			    , UPDT_DT
			    , RMK       --비고

			) VALUES (
			      ?             -- GRP_CD
			    , ?             -- GRP_NM
			    , ?             -- DEL_YN
			    , ?             -- INST_ID
			    , SYSDATE       -- INST_DT

			    , ?             -- UPDT_ID
			    , SYSDATE		-- UPDT_DT
			    , ?				-- RMK
			)
        ]]>
    </query> 

    <query id="rsy1010_u01" desc="그룹코드수정" fetchSize="10">
        <![CDATA[
			UPDATE  TBRK_GRP_CD --마스터코드
			     /* rsy1010_u01 */
			   
			   SET  
			      GRP_NM 	= ?   --그룹이름
				, DEL_YN	= ?   --삭제여부
				, UPDT_ID 	= ?
				, UPDT_DT	= SYSDATE
				, RMK		= ?   --비고

			 WHERE  1=1
			   AND  GRP_CD = ?  --그룹코드
        ]]>
    </query>    

    <query id="rsy1010_d01" desc="그룹코드삭제" fetchSize="10">
        <![CDATA[
			UPDATE  TBRK_GRP_CD --마스터코드
			        /* rsy1010_d01 */
			   SET 
				  DEL_YN  = ?   --삭제여부
				, UPDT_ID = ?
				, UPDT_DT = SYSDATE		
			 WHERE  1=1
			   AND  GRP_CD = ?  --그룹코드
        ]]>
    </query>  

    <query id="rsy1010_i02" desc="상세코드입력" fetchSize="10">
        <![CDATA[
			INSERT INTO TBRK_SPEC_CD ( --상세코드
			         /* rsy1010_i02 */ 
			      GRP_CD      --그룹코드
			    , CD          --상세코드
			    , CD_NM       --상세코드명
			    , CD_NM2      --상세코드명2
			    , CD_TERM1    --조회조건1
			    
			    , CD_TERM2    --조회조건2
			    , CD_TERM3    --조회조건3
			    , CD_TERM4    --조회조건4
			    , CD_TERM5    --조회조건5
			    , ORD_NO      --정렬순서
			    
			    , DEL_YN      --삭제여부
			    , INST_ID
			    , INST_DT
			    , UPDT_ID
			    , UPDT_DT

			    , RMK         --비고

			) VALUES (
			      ?             -- GRP_CD
			    , ?             -- CD
			    , ?             -- CD_NM
			    , ?             -- CD_NM2
			    , ?             -- CD_TERM1
			    
			    , ?             -- CD_TERM2
			    , ?             -- CD_TERM3
			    , ?             -- CD_TERM4
			    , ?             -- CD_TERM5			    
			    , ?             -- ORD_NO
			    
			    , ?             -- DEL_YN
			    , ?             -- INST_ID
			    , SYSDATE       -- INST_DT
			    , ?             -- UPDT_ID
			    , SYSDATE       -- UPDT_DT
			    
			    , ? 			-- RMK
			)
        ]]>
    </query>        
    <query id="rsy1010_i03" desc="소모품코드입력" fetchSize="10">
        <![CDATA[
			INSERT INTO TBRK_SPEC_CD ( --상세코드
			         /* rsy1010_i03 */ 
			      GRP_CD      --그룹코드
			    , CD          --상세코드
			    , CD_NM       --상세코드명(소모품명)
			    , CD_NM2      --상세코드명(제조사)
			    , CD_TERM1    --조회조건1
			    , DEL_YN      --삭제여부
			    , INST_ID
			    , INST_DT
			    , ORD_NO
			) VALUES (
			      ?             -- GRP_CD
			    ,(SELECT TRIM(TO_CHAR(TO_NUMBER(MAX(CD))+1,'000')) FROM TBRK_SPEC_CD WHERE GRP_CD = '031')     -- CD
			    , ?             -- CD_NM
			    , ?             -- CD_NM2
			    , ?             -- CD_TERM1			    
			    , 'N'           -- DEL_YN
			    , ?             -- INST_ID
			    , SYSDATE       -- INST_DT
			    ,  (SELECT TO_NUMBER(TRIM(TO_CHAR(TO_NUMBER(MAX(CD))+1,'000'))) FROM TBRK_SPEC_CD WHERE GRP_CD = '031')
			)
        ]]>
    </query>        
    <query id="rsy1010_u02" desc="상세코드수정" fetchSize="10">
        <![CDATA[
			UPDATE TBRK_SPEC_CD --상세코드
			     /* rsy1010_u02 */
			   SET 
				  CD_NM 	= ?  --상세코드명
				, CD_NM2 	= ?  --상세코드명2
				, CD_TERM1 	= ?  --조회조건1
				, CD_TERM2 	= ?  --조회조건2
				, CD_TERM3 	= ?  --조회조건3
				
				, CD_TERM4 	= ?  --조회조건4
				, CD_TERM5 	= ?  --조회조건5
				, ORD_NO 	= ?  --정렬순서
				, DEL_YN	= ?  --삭제여부
				, UPDT_ID 	= ?

				, UPDT_DT	= SYSDATE
				, RMK		= ?  --비고

			 WHERE  1=1
			   AND  GRP_CD = ?  --그룹코드
			   AND  CD     = ?  --상세코드
        ]]>
    </query>       

    <query id="rsy1010_d02" desc="상세코드삭제" fetchSize="10">
        <![CDATA[
			DELETE  /* rsy1010_d02 */ 
			  FROM  TBRK_SPEC_CD  --상세코드
			 WHERE  1=1
			   AND  GRP_CD = ?           --그룹코드
			   AND  CD     = ?  --상세코드
        ]]>
    </query>       
    
    
    <query id="rsy1010_s06" desc="좌석그룹코드조회" fetchSize="10">
        <![CDATA[
            SELECT /* rsy1010_s06 */
                        '0' AS CHK
                        , GRP_CD      --그룹코드
                        , GRP_NM      --그룹명
                        , RMK         --비고
                        , DEL_YN      --삭제여부
                        , INST_ID     --작성자

                        , INST_DT     --작성일시
                        , UPDT_ID     --수정자
                        , UPDT_DT     --수정일시

              FROM  TBRK_GRP_CD   --마스터코드
             WHERE  1=1
               AND  DEL_YN = ?   --삭제여부
               AND  GRP_NM LIKE '%' || NVL(?, GRP_NM) || '%'  --그룹명
               AND  GRP_CD IN (SELECT GRP_CD FROM TBRK_SPEC_CD WHERE CD_NM LIKE '%' || NVL(?, CD_NM) || '%') --그룹코드
               AND  GRP_CD IN ('037','038','039')
          ORDER BY  GRP_CD  --그룹코드
        ]]>
    </query>     
</queryMap>