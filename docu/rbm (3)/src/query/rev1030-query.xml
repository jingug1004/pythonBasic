<?xml version="1.0" encoding='EUC-KR'?>


<queryMap desc="REV1030(종합평가등급기준)">
    
    <query id="rev1030_cb" desc="년도-회차  콤보조회  " fetchSize="10">
        <![CDATA[
			SELECT   /* rev1030_cb */
			         ESTM_YEAR || LPAD(ESTM_NUM,2,'0') AS CD,
			         ESTM_YEAR || '년 ' || ESTM_NUM|| '차' AS DATA,
			         ESTM_YEAR,
			         ESTM_NUM,
			         LAST_ESTM_END_YN
			FROM     TBRF_EV_MASTER
			ORDER BY CD DESC
        ]]>
    </query>   
	<query id="rev1030_s01" desc="종합평가등급기준조회 " fetchSize="10">
        <![CDATA[
			SELECT   /* rev1030_s01 */
			         '0' AS CHK,
			         ESTM_YEAR,
			         ESTM_NUM,
			         CNTR_ITM_IN,    -- 평가보직분야코드
			         CNTR_ITM_NM,  -- 평가보직분야명
			         CNTR_ITM_CD,  -- 평가보직분야명
			         CNTR_JOB_NM
		    FROM     TBRF_EV_JOB_ITEM
		    WHERE    ESTM_YEAR = ?       -- 평가년도
		    AND      ESTM_NUM = ?        -- 평가회차
		    AND      ESTM_ITEM_CD = '0'
		    ORDER BY CNTR_ITM_CD
        ]]>
    </query>
    
    <query id="rev1030_s02" desc="종합평가등급기준조회 " fetchSize="10">
        <![CDATA[
			SELECT   /* rev1030_s02 */
			         ESTM_YEAR,
			         ESTM_NUM,
			         S_RATE,             -- S등급
			         A_RATE,             -- A등급
			         B_RATE,             -- B등급
			         C_RATE,             -- C등급
			         D_RATE              -- D등급
		    FROM     TBRF_EV_ITEM_GRD
		    WHERE    1 = 1
		    AND      ESTM_YEAR = ?       -- 평가년도
		    AND      ESTM_NUM = ?        -- 평가회차
		    AND      ESTM_ITEM_CD = '0'
		    ORDER BY ESTM_NUM
        ]]>
    </query>
    
    <query id="rev1030_i01" desc="평가보직분야 입력" fetchSize="10">
        <![CDATA[
        
	        INSERT   /* rev1030_i01  */ 
	        INTO     TBRF_EV_JOB_ITEM
	        (	         
	         ESTM_YEAR,      -- 평가년도
	         ESTM_NUM,       -- 평가회차
	         CNTR_ITM_CD,      -- 평가보직분야코드
	         CNTR_ITM_IN,      -- 평가보직분야in코드
	         CNTR_ITM_NM,   -- 평가보직분야명
	         CNTR_JOB_NM,
	         ESTM_ITEM_CD,
	         INST_ID,         -- 작성자   
	         INST_DT         -- 작성일
	        ) VALUES (
			      ?,             -- 1.평가년도
			      ?,             -- 2.평가회차
			      ?,
			      ?,             -- 7.평가보직분야in코드
				  ?,             -- 8.평가보직분야명
				  ?,
				  '0',
			      ?,         -- 9.작성자
			      SYSDATE
			)
        ]]>
    </query>       

    <query id="rev1030_u01" desc="평가보직분야 수정" fetchSize="10">
        <![CDATA[
			UPDATE   /* rev1030_u01 */
			         TBRF_EV_JOB_ITEM
			SET      CNTR_ITM_IN = ?,	    -- 1. 평가보직분야in코드 		  
				     CNTR_ITM_NM = ?,       -- 2. 평가보직분야
				     CNTR_JOB_NM = ?,
				     UPDT_ID   = ?,		-- 3. 사용자 ID		
					 UPDT_DT   = SYSDATE
			WHERE    ESTM_YEAR    = ?     -- 4.평가년도
			AND      ESTM_NUM     = ?     -- 5.평가회차
			AND      CNTR_ITM_CD   = ?     -- 6.평가분야코
			AND      ESTM_ITEM_CD = '0'
        ]]>
    </query>
    
    <query id="rev1030_d01" desc="평가배분표삭제" fetchSize="10">
        <![CDATA[
			DELETE   /* rev1030_d01 */ 
			         TBRF_EV_JOB_ITEM
			WHERE    ESTM_YEAR    = ?   -- 1.평가년도
			AND      ESTM_NUM     = ?   -- 2.평가회차
			AND      CNTR_ITM_CD     = ?   -- 3.평가보직분야코드
			AND      ESTM_ITEM_CD = '0'
        ]]>
    </query>
    
    <query id="rev1030_i02" desc="평가보직분야 입력" fetchSize="10">
        <![CDATA[
        
	        INSERT   /* rev1030_i02  */ 
	        INTO     TBRF_EV_ITEM_GRD
	        (	         
	         ESTM_YEAR,      -- 평가년도
	         ESTM_NUM,       -- 평가회차
	         ESTM_ITEM_CD,      -- 평가보직분야코드
	         S_RATE,
	         A_RATE,
	         B_RATE,
	         C_RATE,
	         D_RATE,
	         INST_ID,
	         INST_DT
	        ) VALUES (
			      ?,             -- 1.평가년도
			      ?,             -- 2.평가회차
			      '0',
			      ?,
				  ?,
			      ?,
			      ?,
			      ?,
			      ?,
			      SYSDATE
			)
        ]]>
    </query>       

    <query id="rev1030_u02" desc="평가보직분야 수정" fetchSize="10">
        <![CDATA[
			UPDATE   /* rev1030_u02 */
			         TBRF_EV_ITEM_GRD
			SET      S_RATE = ? ,        -- 1. S등급배분율
			         A_RATE = ? ,        -- 2. A등급배분율
			         B_RATE = ? ,        -- 3. B등급배분율
			         C_RATE = ? ,        -- 4. C등급배분율
			         D_RATE = ? ,        -- 5. D등급배분율
				     UPDT_ID   = ?,		-- 6. 사용자 ID		
					 UPDT_DT   = SYSDATE
			WHERE    ESTM_YEAR    = ?     -- 7.평가년도
			AND      ESTM_NUM     = ?     -- 8.평가회차
			AND      ESTM_ITEM_CD   = '0'
        ]]>
    </query>
    
    <query id="rev1030_d02" desc="평가보직분야 수정" fetchSize="10">
        <![CDATA[
			DELETE   /* rev1030_d02 */ 
			         TBRF_EV_ITEM_GRD
			WHERE    ESTM_YEAR    = ?   -- 1.평가년도
			AND      ESTM_NUM     = ?   -- 2.평가회차
        ]]>
    </query>
</queryMap>