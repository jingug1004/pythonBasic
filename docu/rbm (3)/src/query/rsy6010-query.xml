<?xml version="1.0" encoding='EUC-KR'?>

<queryMap desc="RSY6010(배치로그 조회)">
    <query id="rsy6010_s01" desc="배치로그 조회" fetchSize="10">
      <![CDATA[
 			SELECT /* rsy6010_s01 */
                 BTC_CD     --배치코드
                ,LOG_DT     --로그일자
                ,LOG_TM     --로그시간
                ,LOG_SEQ    --로그순번
                ,LOG_CD     --로그구분                
                ,PROGRAM    --프로그램
                ,LOG_DESC   --로그내용
                ,WORK_DESC  --작업내용
                ,(SELECT  CD_NM
                    FROM  TBRK_SPEC_CD --상세코드
                   WHERE  1=1
                     AND  GRP_CD = '045'
                     AND  CD     = A.BTC_CD) AS BTC_NM --배치코드 이름
                ,(SELECT  CD_NM
                    FROM  TBRK_SPEC_CD --상세코드
                   WHERE  1=1
                     AND  GRP_CD = '046'
                     AND  CD     = A.LOG_CD) AS LOG_NM --로그코드 이름
              FROM  TBRK_BTC_LOG A   --배치로그            
             WHERE  1=1
               AND  LOG_DT   BETWEEN  ? AND ?                         --로그일자
               AND  BTC_CD      LIKE  '%' || NVL(? , BTC_CD) || '%'   --배치코드
               AND  LOG_CD      LIKE  '%' || NVL(? , LOG_CD) || '%'   --로그구분        
               AND  PROGRAM     LIKE  '%' || UPPER(?) || '%'   			  --프로그램명        
          --ORDER BY  LOG_DT DESC, LOG_SEQ DESC, LOG_SERL_NO DESC
          ORDER BY  LOG_DT DESC, LOG_TM DESC
        ]]>
    </query>
</queryMap>