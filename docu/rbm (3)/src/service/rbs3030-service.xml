<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbs3030" initial="SetResultKeys">

  <activity name="SetResultKeys"            class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile"    value="resultkey.properties" />
    <property name="resultKeyList"          value="dsSupplReq|dsSupplRegi|dsQty" />
    <transition name="success"              value="EventRouter" />
  </activity>

  <activity name="EventRouter"              class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchSupplReq"       value="searchSupplReq" />     <!-- 소모품신청현황  조회 -->
    <transition name="searchQty"            value="searchQty" />          <!-- 소모품에 대한 수량  조회 -->
    <transition name="searchSupplRegi"      value="searchSupplRegi" />    <!-- 소모품대장  조회 -->
    <transition name="saveSupplReqRegi"     value="saveSupplReqRegi" />   <!-- 소모품신청,대장 저장  -->
  </activity>
  
  <!-- 소모품신청현황 조회 -->
  <activity name="searchSupplReq"      class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="searchSupplRegi" />
    
    <property name="resultkey"          value="dsSupplReq" />
    <property name="sqlkey"             value="rbs3030_s01" />

    <property name="param-count"        value="4" />
    
    <property name="param0"             value="REQ_DT_FROM" />  <!-- 신청일자From -->
    <property name="param1"             value="REQ_DT_TO" />    <!-- 신청일자To   -->
    <property name="param2"             value="PROG_STAT_CD" /> <!-- 신청내용   -->   
    <property name="param3"             value="BIZ_GBN" /> 		<!-- 소모품 분류   -->   
    
    
    <property name="dao"                value="rbmdao" />
  </activity>
  
  <!-- 소모품에 대한 수량  조회 -->
  <activity name="searchQty"            class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="end" />
    
    <property name="resultkey"          value="dsQty" />
    <property name="sqlkey"             value="rbs3030_s02" />

    <property name="param-count"        value="1" />
    
    <property name="param0"             value="SUPPL_CD" />  <!-- 소모품 코드 -->  
    
    <property name="dao"                value="rbmdao" />
  </activity>
  
  <!-- 소모품대장  조회 -->
  <activity name="searchSupplRegi"      class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success"          value="end" />
    
    <property name="resultkey"          value="dsSupplRegi" />
    <property name="sqlkey"             value="rbs3030_s05" />

    <property name="param-count"        value="3" />
    
    <property name="param0"             value="REQ_DT" />    <!-- 신청일자 -->  
    <property name="param1"             value="REQ_ID" />  <!-- 신청자사번 -->  
    <property name="param2"             value="SEQ" />       <!-- 순번 -->  
               
    <property name="dao"                value="rbmdao" />
  </activity>
  
  <!-- 소모품신청현황 저장 -->
  <activity name="saveSupplReqRegi"     class="snis.rbm.business.rbs3030.activity.SaveSupplReqRegi">
    <transition name="success"          value="end" />
  </activity>
  
  <transaction-manager id="tx_rbm" commit="true" /> 
</service>