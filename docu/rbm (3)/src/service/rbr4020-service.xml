<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbr4020" initial="SetResultKeys">

  <activity name="SetResultKeys" 			class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile" 	value="resultkey.properties" />   
    <property name="resultKeyList" 			value="dsEvntMana|dsEvntHistMana|dsUploadFile" />
    <transition name="success" 				value="EventRouter" />
  </activity>

  <activity name="EventRouter" 				class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchEvntMana"  		value="searchEvntMana" />		<!-- 사건목록  조회 -->
    <transition name="searchEvntHistMana"  	value="searchEvntHistMana" />	<!-- 사건이력 조회  -->
  	<transition name="searchFileMana"   	value="searchFileMana" />		<!-- 첨부파일 조회  -->
    <transition name="saveEvntHistMana"   	value="saveEvntHistMana" />     <!-- 사건이력 저장   -->
  </activity>
 
  <!-- 사건 조회 -->
   <activity name="searchEvntMana" 		class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 			value="end" />

    <property name="resultkey" 			value="dsEvntMana" />
    <property name="sqlkey"				value="rbr4020_s01" />

    <property name="param-count" 		value="5" />
    
    <property name="param0" 			value="GEN_DT_FROM" />   <!-- 발생일자From -->
    <property name="param1" 			value="GEN_DT_TO" />     <!-- 발생일자To   -->
    <property name="param2" 			value="BRNC_CD" />       <!-- 지점코드          -->
    <property name="param3" 			value="EVNT_NM" />       <!-- 사건명             -->
    <property name="param4" 			value="END_YN" />        <!-- 종료여부          -->
    
    <property name="dao" 				value="rbmdao" />
  </activity>
  
  
  
  <!-- 사건이력 조회 --> 
  <activity name="searchEvntHistMana"	class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 			value="end" />

    <property name="resultkey" 			value="dsEvntHistMana" />
    <property name="sqlkey"				value="rbr4020_s02" />

    <property name="param-count" 		value="2" />
    
    <property name="param0" 			value="BRNC_CD" />   <!-- 지점코드  -->
    <property name="param1" 			value="EVNT_SEQ" />  <!-- 사건순번  -->
    
    <property name="dao" 				value="rbmdao" />

  </activity>
  
  
  <!-- 사건 이력저장 -->
  <activity name="saveEvntHistMana"		class="snis.rbm.business.rbr4020.activity.SaveEvntHistMana">
    <transition name="success" 			value="end" />
  </activity>	  

  <!-- 첨부파일   조회 -->
  <activity name="searchFileMana" 		class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 			value="end" />

    <property name="resultkey" 			value="dsUploadFile" />
    <property name="sqlkey"				value="common_file_s01" />

    <property name="param-count" 		value="1" />

    <property name="param0" 			value="ATT_FILE_KEY" />  <!-- 첨부파일키 -->

    <property name="dao" 				value="rbmdao" />
  </activity> 
  
  <transaction-manager id="tx_rbm" commit="true" />
</service>