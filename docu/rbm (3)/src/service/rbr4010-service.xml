<?xml version="1.0" encoding="EUC-KR"?>

<service name="rbr4010" initial="SetResultKeys">

  <activity name="SetResultKeys" 			class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
    <property name="staticResultKeyFile" 	value="resultkey.properties" />
    <property name="resultKeyList" 			value="dsEvntMana|dsCnt" />
    <transition name="success" 				value="EventRouter" />
  </activity>

  <activity name="EventRouter" 				class="com.posdata.glue.biz.activity.PosDefaultRouter">
    <transition name="searchEvntMana"  		value="searchEvntMana" />      <!-- 사건조회                                  -->
    <transition name="CheckEvntHistMana"  	value="CheckEvntHistMana" />   <!-- 사건에 대한 사건이력 개수 검사 -->
    <transition name="saveEvntMana"   		value="saveEvntMana" />        <!-- 사건 저장                                 -->
  </activity>
  
  <!-- 사건 조회 -->
 
  <activity name="searchEvntMana" 		class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 			value="end" />

    <property name="resultkey" 			value="dsEvntMana" />
    <property name="sqlkey"				value="rbr4010_s01" />

    <property name="param-count" 		value="4" />
    <property name="param0" 			value="GEN_DT_FROM" />   <!-- 발생일자 From -->
    <property name="param1" 			value="GEN_DT_TO" />     <!-- 발생일자 To   -->
    <property name="param2" 			value="EVNT_NM" />       <!-- 사건명              -->
    <property name="param3" 			value="END_YN" />        <!-- 종료여부           -->
    
    <property name="dao" 				value="rbmdao" />
  </activity>  
 
   <!-- 사건에 대한 사건이력 개수 검사 -->
  <activity name="CheckEvntHistMana"	class="com.posdata.glue.miplatform.biz.activity.PosSearch">
    <transition name="success" 			value="end" />
    
    <property name="resultkey" 			value="dsCnt" />
    <property name="sqlkey"				value="rbr4010_s02" />

    <property name="param-count" 		value="2" />
    <property name="param0" 			value="BRNC_CD" />       <!-- 지점코드  -->
    <property name="param1" 			value="EVNT_SEQ" />      <!-- 사건순번  -->
    
    <property name="dao" 				value="rbmdao" />
  </activity> 
   
  <!-- 사건 저장 -->
  <activity name="saveEvntMana" 		class="snis.rbm.business.rbr4010.activity.SaveEvntMana">
    <transition name="success" 			value="end" />
  </activity>	
 
  <transaction-manager id="tx_rbm" commit="true" />

</service>