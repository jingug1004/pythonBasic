<?xml version="1.0" encoding="EUC-KR"?>
 
<service name="rev1110" initial="SetResultKeys">

    <activity name="SetResultKeys"   class="com.posdata.glue.miplatform.biz.activity.PosSetResultKeyList">  
	    <property name="staticResultKeyFile"  value="resultkey.properties" />
	    <property name="resultKeyList" 		  value="dsEstmDept|dsEmp" />
	    <transition name="success" 			  value="EventRouter" />
	</activity>
  
    <activity name="EventRouter" 	 class="com.posdata.glue.biz.activity.PosDefaultRouter">
	    <transition name="searchEstmDept"    value="searchEstmDept" />
	    <transition name="searchDeptEmp"   	 value="searchDeptEmp" />
	    <transition name="saveEstmDept"      value="saveEstmDept" />
	    <transition name="saveSrvKCSI"       value="saveSrvKCSI" />
	    <transition name="savePrmSales"      value="savePrmSales" />
	    <transition name="success" 			 value="end" />
	</activity>
	
	<!-- 그리드 조회 -->
	<activity name="searchEstmDept" 	  class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="searchDeptEmp" />
		<property name="resultkey" 		  value="dsEstmDept" />
		<property name="sqlkey" 		  value="rev1110_s01" />
		<property name="param-count" 	  value="2" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />  
		<property name="dao" 			  value="rbmdao" />
	</activity>
  	
	<!-- 그리드 조회 -->
	<activity name="searchDeptEmp" 	     class="com.posdata.glue.miplatform.biz.activity.PosSearch">
		<transition name="success" 		  value="end" />
		<property name="resultkey" 		  value="dsEmp" />
		<property name="sqlkey" 		  value="rev1110_s02" />
		<property name="param-count" 	  value="6" />
		<property name="param0" 		  value="ESTM_YEAR" />
		<property name="param1" 		  value="ESTM_NUM" />  
		<property name="param2" 		  value="ESTM_YEAR" />
		<property name="param3" 		  value="ESTM_NUM" />  
		<property name="param4" 		  value="ESTM_YEAR" />
		<property name="param5" 		  value="ESTM_NUM" />  
		<property name="dao" 			  value="rbmdao" />
	</activity>
	
	<!-- KCSI평가점수 저장 -->
  	<activity name="saveEstmDept" 		      	class="snis.rbm.business.rev1110.activity.SaveEstmDept">
    	<transition name="success" 			value="end" />
  	</activity>
  	
  	<!-- 평가점수 적용 : 서비스 평가 적용후 처리해야 함  -->
    <activity name="saveSrvKCSI"        	class="snis.rbm.business.rev1110.activity.SaveSrvKCSI">
        <transition name="success"          value="savePrmSales" />
    </activity>
    
    <!-- 평가점수 적용 : 근무실적 평가 적용후 처리해야 함  -->
    <activity name="savePrmSales"        	class="snis.rbm.business.rev1110.activity.SavePrmSales">
        <transition name="success"          value="end" />
    </activity>
    
    
  <transaction-manager id="tx_rbm" commit="true" />
</service>