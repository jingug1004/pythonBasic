<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbdb_strt_time_dist(개인별기록평가)">
    <query id="tbdb_indv_rec_estm_fb001" desc="조회" fetchSize="10">
        <![CDATA[
	        SELECT	'0'	CHK,
					TIRE.ESTM_DT,						--평가일자
					TIRE.CNT,							--회수
			        TIRE.CAND_NO,						--등록번호
			        TCI.NM_KOR,							--선수명
			        TIRE.TIME_200M,						--200M 기록
			        TIRE.TIME_400M,						--400M 기록
			        TIRE.TIME_1000M,					--1000M 기록
			        TIRB_200.GRD	AS TIME_200M_GRD,	--200M 평가
			        TIRB_400.GRD	AS TIME_400M_GRD,	--400M 평가
			        TIRB_1000.GRD	AS TIME_1000M_GRD,	--1000M 평가
			        TIRE.ESTM_GRD						--등급
			FROM	TBDB_INDV_REC_ESTM	TIRE
			INNER JOIN
					TBDB_CAND_IDENT		TCI
			ON		TIRE.CAND_NO = TCI.CAND_NO
			LEFT JOIN
					TBDB_INDV_REC_BASIS	TIRB_200
			ON		TIRE.TIME_200M >= TIRB_200.FROM_TIME
			AND		TIRE.TIME_200M <= TIRB_200.TO_TIME
			AND		TIRB_200.RACELEN = 200
			LEFT JOIN
					TBDB_INDV_REC_BASIS	TIRB_400
			ON		TIRE.TIME_400M >= TIRB_400.FROM_TIME
			AND		TIRE.TIME_400M <= TIRB_400.TO_TIME
			AND		TIRB_400.RACELEN = 400
			LEFT JOIN
					TBDB_INDV_REC_BASIS	TIRB_1000
			ON		TIRE.TIME_1000M >= TIRB_1000.FROM_TIME
			AND		TIRE.TIME_1000M <= TIRB_1000.TO_TIME
			AND		TIRB_1000.RACELEN = 1000
			WHERE	TIRE.ESTM_DT >= NVL(?, '19000101')
			AND		TIRE.ESTM_DT <= NVL(?, '99990101')
			AND		(TCI.NM_KOR LIKE ? || '%' OR ? IS NULL)
		]]>
    </query>
    <query id="tbdb_indv_rec_estm_ib001" desc="등록" fetchSize="10">
        <![CDATA[
			INSERT 
				INTO TBDB_INDV_REC_ESTM
				(
					ESTM_DT,
					CNT,
					CAND_NO,
					TIME_200M,
					TIME_400M,
					TIME_1000M,
					ESTM_GRD,
					INST_ID,
					INST_DTM
				)
				VALUES
				(
					?,
					?,
					?,
					?,
					?,
					?,
					?,
					?, 
					SYSDATE
				)
		]]>
    </query>
    <query id="tbdb_indv_rec_estm_ub001" desc="수정" fetchSize="10">
        <![CDATA[
			UPDATE	TBDB_INDV_REC_ESTM
			SET		TIME_200M	= ?,
					TIME_400M	= ?,
					TIME_1000M	= ?,
					ESTM_GRD	= ?,
					UPDT_ID		= ?, 
					UPDT_DTM	= SYSDATE
			WHERE	ESTM_DT		= ?
			AND		CNT			= ?
			AND		CAND_NO		= ? 
		]]>
    </query>
    <query id="tbdb_indv_rec_estm_db001" desc="삭제" fetchSize="10">
        <![CDATA[
			DELETE
			FROM	TBDB_INDV_REC_ESTM
			WHERE	ESTM_DT		= ?
			AND		CNT			= ?
			AND		CAND_NO		= ?  
		]]>
    </query>
</queryMap>