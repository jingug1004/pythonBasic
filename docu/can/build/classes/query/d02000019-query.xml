<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbdb_strt_mesur_mngr(체력측정)">

    <query id="tbdb_strt_mesur_fb001" desc="기수 조회" fetchSize="10">
        <![CDATA[

			SELECT CD_NM AS RACER_PERIO_NO
			FROM TBDA_SPEC_CD	
			WHERE GRP_CD = 'A10001'
			ORDER BY CD DESC			 	
		]]>
    </query>
        
    <query id="tbdb_strt_mesur_fb002" desc="체력측정 조회" fetchSize="10">
        <![CDATA[
			SELECT 
				A2.*
				,? AS EXAM_CD
				,'004' AS ITEM_GBN_CD
				,'' AS ITEM_CD			
			FROM
			(
				SELECT 
					A1.NM_KOR
					,A1.RACER_PERIO_NO
					,A1.CAND_NO
					,A1.DT
					,A1.GRIP_LEFT_REC
					,A1.GRIP_RIGHT_REC
					,A1.LEG_LEFT_REC
					,A1.LEG_RIGHT_REC
					,A1.LEG_LEFT_REC2
					,A1.LEG_RIGHT_REC2
					,A1.BELLY_REC
					,A1.MAX_PWR_REC
					,AVG_PWR_REC
					,TIRE_IDX_REC
				FROM
				(	
					SELECT 	
							A.NM_KOR AS NM_KOR
							,A.RACER_PERIO_NO AS RACER_PERIO_NO 
							,A.CAND_NO AS CAND_NO
							,(	SELECT  NVL(MAX(C.DT), null) AS DT
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS DT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'401', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_LEFT_REC	
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'402', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_RIGHT_REC
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'403', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT_REC
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'404', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT_REC
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'405', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT_REC2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'406', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT_REC2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'407', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BELLY_REC
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'408', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS MAX_PWR_REC
							, ( SELECT	MAX(DECODE(C.ITEM_CD,'409', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS AVG_PWR_REC
							, ( SELECT	MAX(DECODE(C.ITEM_CD,'410', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS TIRE_IDX_REC
					FROM	TBDB_CAND_IDENT A, TBDB_PERIO_EXAM B
					WHERE	A.RACER_PERIO_NO = B.RACER_PERIO_NO(+)
					AND		A.CAND_NO = B.CAND_NO(+)
					AND		A.RACER_PERIO_NO = NVL(?, A.RACER_PERIO_NO)
					AND     A.DEL_YN = 'N'
					AND		A.GRDU_GBN NOT IN('004','005')
					GROUP BY A.RACER_PERIO_NO,A.CAND_NO,A.NM_KOR
				)A1
				GROUP BY A1.NM_KOR, A1.RACER_PERIO_NO, A1.CAND_NO, A1.DT
				,A1.GRIP_LEFT_REC, A1.GRIP_RIGHT_REC 
				,A1.LEG_LEFT_REC, A1.LEG_RIGHT_REC
				,A1.LEG_LEFT_REC2, A1.LEG_RIGHT_REC2
				,A1.BELLY_REC, A1.MAX_PWR_REC , AVG_PWR_REC, TIRE_IDX_REC
			)A2
			ORDER BY A2.CAND_NO	 			 
	    ]]>
    </query>
        
    <query id="tbdb_strt_mesur_fb003" desc="회차별 비교 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					A1.RACER_PERIO_NO
					,A1.CAND_NO
					,A1.NM_KOR
					,A1.BOF_GRIP_LEFT
					,A1.CUR_GRIP_LEFT
					,(NVL(A1.CUR_GRIP_LEFT,0) - NVL(A1.BOF_GRIP_LEFT,0))/100 AS GAP_GRIP_LEFT
					,A1.BOF_GRIP_RIGHT
					,A1.CUR_GRIP_RIGHT
					,(NVL(A1.CUR_GRIP_RIGHT,0) - NVL(A1.BOF_GRIP_RIGHT,0))/100 AS GAP_GRIP_RIGHT
					,A1.BOF_LEG_LEFT
					,A1.CUR_LEG_LEFT
					,(NVL(A1.CUR_LEG_LEFT,0) - NVL(A1.BOF_LEG_LEFT,0))/100  AS GAP_LEG_LEFT
					,A1.BOF_LEG_RIGHT
					,A1.CUR_LEG_RIGHT
					,(NVL(A1.CUR_LEG_RIGHT,0) - NVL(A1.BOF_LEG_RIGHT,0))/100 AS GAP_LEG_RIGHT
					,A1.BOF_LEG_LEFT2
					,A1.CUR_LEG_LEFT2
					,(NVL(A1.CUR_LEG_LEFT2,0) - NVL(A1.BOF_LEG_LEFT2,0))/100 AS GAP_LEG_LEFT2
					,A1.BOF_LEG_RIGHT2
					,A1.CUR_LEG_RIGHT2
					,(NVL(A1.CUR_LEG_RIGHT2,0) - NVL(A1.BOF_LEG_RIGHT2,0))/100 AS GAP_LEG_RIGHT2
					,A1.BOF_BELLY
					,A1.CUR_BELLY
					,(NVL(A1.CUR_BELLY,0) - NVL(A1.BOF_BELLY ,0))/100 AS GAP_BELLY
					,A1.BOF_MAX_PWR
					,A1.CUR_MAX_PWR
					,(NVL(A1.CUR_MAX_PWR,0) - NVL(A1.BOF_MAX_PWR,0))/100 AS GAP_MAX_PWR
					,A1.BOF_AVG_PWR
					,A1.CUR_AVG_PWR
					,(NVL(A1.CUR_AVG_PWR,0) - NVL(A1.BOF_AVG_PWR,0))/100 AS GAP_AVG_PWR
					,A1.BOF_TIRE_IDX
					,A1.CUR_TIRE_IDX 
					,(NVL(A1.CUR_TIRE_IDX,0) -  NVL(A1.BOF_TIRE_IDX,0))/100 AS GAP_TIRE_IDX 
					,'' AS ITEM_CD
					,'' AS EXAM_CD
					,'' AS ITEM_GBN_CD
			FROM
				(	
					SELECT 	
							A.RACER_PERIO_NO AS RACER_PERIO_NO 
							,A.CAND_NO AS CAND_NO
							,A.NM_KOR AS NM_KOR
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'401', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_GRIP_LEFT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'401', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_GRIP_LEFT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'402', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_GRIP_RIGHT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'402', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_GRIP_RIGHT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'403', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_LEG_LEFT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'403', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_LEG_LEFT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'404', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_LEG_RIGHT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'404', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_LEG_RIGHT
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'405', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_LEG_LEFT2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'405', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_LEG_LEFT2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'406', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_LEG_RIGHT2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'406', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_LEG_RIGHT2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'407', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_BELLY
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'407', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_BELLY
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'408', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_MAX_PWR
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'408', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_MAX_PWR
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'409', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_AVG_PWR
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'409', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_AVG_PWR
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'410', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BOF_TIRE_IDX
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'410', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS CUR_TIRE_IDX
					FROM	TBDB_CAND_IDENT A, TBDB_PERIO_EXAM B
					WHERE	A.RACER_PERIO_NO = B.RACER_PERIO_NO(+)
					AND		A.CAND_NO = B.CAND_NO(+)
					AND		A.RACER_PERIO_NO = NVL(?, A.RACER_PERIO_NO)
					AND 	A.DEL_YN = 'N'
					AND		A.GRDU_GBN NOT IN('004','005')
					GROUP BY A.RACER_PERIO_NO,A.CAND_NO,A.NM_KOR
			)A1
			GROUP BY A1.NM_KOR, A1.RACER_PERIO_NO, A1.CAND_NO
					 ,A1.BOF_GRIP_LEFT ,A1.CUR_GRIP_LEFT ,A1.BOF_GRIP_RIGHT ,A1.CUR_GRIP_RIGHT
					 ,A1.BOF_LEG_LEFT ,A1.CUR_LEG_LEFT ,A1.BOF_LEG_RIGHT ,A1.CUR_LEG_RIGHT
					 ,A1.BOF_LEG_LEFT2 ,A1.CUR_LEG_LEFT2 ,A1.BOF_LEG_RIGHT2 ,A1.CUR_LEG_RIGHT2
					 ,A1.BOF_BELLY ,A1.CUR_BELLY ,A1.BOF_MAX_PWR ,A1.CUR_MAX_PWR
					 ,A1.BOF_AVG_PWR ,A1.CUR_AVG_PWR ,A1.BOF_TIRE_IDX ,A1.CUR_TIRE_IDX 
			ORDER BY CAND_NO								 
	    ]]>
    </query>
    
    <query id="tbdb_strt_mesur_fb004" desc="종합 비교 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					A1.RACER_PERIO_NO
					,A1.CAND_NO
					,A1.NM_KOR
					,A1.GRIP_LEFT_1
					,A1.GRIP_LEFT_2
					,A1.GRIP_LEFT_3
					,A1.GRIP_RIGHT_1
					,A1.GRIP_RIGHT_2
					,A1.GRIP_RIGHT_3
					,A1.LEG_LEFT_1
					,A1.LEG_LEFT_2
					,A1.LEG_LEFT_3
					,A1.LEG_RIGHT_1
					,A1.LEG_RIGHT_2
					,A1.LEG_RIGHT_3
					,A1.LEG_LEFT2_1
					,A1.LEG_LEFT2_2
					,A1.LEG_LEFT2_3
					,A1.LEG_RIGHT2_1
					,A1.LEG_RIGHT2_2
					,A1.LEG_RIGHT2_3
					,A1.BELLY_1
					,A1.BELLY_2
					,A1.BELLY_3
					,A1.MAX_PWR_1
					,A1.MAX_PWR_2
					,A1.MAX_PWR_3
					,A1.AVG_PWR_1
					,A1.AVG_PWR_2
					,A1.AVG_PWR_3
					,A1.TIRE_IDX_1
					,A1.TIRE_IDX_2
					,A1.TIRE_IDX_3
					,'' AS GRIP_LEFT_AVG
					,'' AS GRIP_RIGHT_AVG
					,'' AS LEG_LEFT_AVG
					,'' AS LEG_RIGHT_AVG
					,'' AS LEG_LEFT2_AVG
					,'' AS LEG_RIGHT2_AVG
					,'' AS BELLY_AVG
					,'' AS MAX_PWR_AVG
					,'' AS AVG_PWR_AVG
					,'' AS TIRE_IDX_AVG
					,'' AS ITEM_CD
					,'' AS EXAM_CD
					,'' AS ITEM_GBN_CD
			FROM
				(	
					SELECT 	
							A.RACER_PERIO_NO AS RACER_PERIO_NO 
							,A.CAND_NO AS CAND_NO
							,A.NM_KOR AS NM_KOR
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'401', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_LEFT_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'401', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_LEFT_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'401', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_LEFT_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'402', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_RIGHT_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'402', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_RIGHT_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'402', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS GRIP_RIGHT_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'403', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'403', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'403', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'404', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'404', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'404', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'405', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT2_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'405', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT2_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'405', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_LEFT2_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'406', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT2_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'406', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT2_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'406', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS LEG_RIGHT2_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'407', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BELLY_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'407', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BELLY_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'407', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS BELLY_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'408', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS MAX_PWR_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'408', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS MAX_PWR_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'408', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND		C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS MAX_PWR_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'409', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS AVG_PWR_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'409', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS AVG_PWR_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'409', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS AVG_PWR_3
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'410', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS TIRE_IDX_1
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'410', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS TIRE_IDX_2
							,(	SELECT	MAX(DECODE(C.ITEM_CD,'410', C.REC,''))
								FROM	TBDB_PERIO_EXAM C 
								WHERE 	C.RACER_PERIO_NO = A.RACER_PERIO_NO
								AND		C.CAND_NO = A.CAND_NO 
								AND		C.ITEM_GBN_CD = '004'
								AND	    C.EXAM_CD = NVL(?, C.EXAM_CD)
							) AS TIRE_IDX_3
					FROM	TBDB_CAND_IDENT A, TBDB_PERIO_EXAM B
					WHERE	A.RACER_PERIO_NO = B.RACER_PERIO_NO(+)
					AND		A.CAND_NO = B.CAND_NO(+)
					AND		A.RACER_PERIO_NO = NVL(?, A.RACER_PERIO_NO)
					AND 	A.DEL_YN = 'N'
					AND		A.GRDU_GBN NOT IN('004','005')
					GROUP BY A.RACER_PERIO_NO,A.CAND_NO,A.NM_KOR
			)A1
			GROUP BY A1.NM_KOR, A1.RACER_PERIO_NO, A1.CAND_NO 
			 		 ,A1.GRIP_LEFT_1, A1.GRIP_LEFT_2 ,A1.GRIP_LEFT_3
					 ,A1.GRIP_RIGHT_1 ,A1.GRIP_RIGHT_2 ,A1.GRIP_RIGHT_3
					 ,A1.LEG_LEFT_1 ,A1.LEG_LEFT_2 ,A1.LEG_LEFT_3 
					 ,A1.LEG_RIGHT_1 ,A1.LEG_RIGHT_2 ,A1.LEG_RIGHT_3
					 ,A1.LEG_LEFT2_1 ,A1.LEG_LEFT2_2 ,A1.LEG_LEFT2_3
					 ,A1.LEG_RIGHT2_1 ,A1.LEG_RIGHT2_2 ,A1.LEG_RIGHT2_3
					 ,A1.BELLY_1 ,A1.BELLY_2 ,A1.BELLY_3
					 ,A1.MAX_PWR_1 ,A1.MAX_PWR_2 ,A1.MAX_PWR_3
					 ,A1.AVG_PWR_1 ,A1.AVG_PWR_2 ,A1.AVG_PWR_3
					 ,A1.TIRE_IDX_1 ,A1.TIRE_IDX_2 ,A1.TIRE_IDX_3
			ORDER BY CAND_NO								 
	    ]]>
    </query>        
     
    <query id="tbdb_strt_mesur_ib001" desc="체력측정 입력" fetchSize="10">
  	<![CDATA[  				  
   				   MERGE INTO TBDB_PERIO_EXAM TPE
			            USING   DUAL
			            ON        (     TPE.RACER_PERIO_NO  		= ?     	
			            			AND TPE.EXAM_CD					= ?		  
			            			AND TPE.ITEM_GBN_CD   			= ?   	 	
									AND TPE.ITEM_CD  				= ? 
									AND TPE.CAND_NO			        = ? 
			                      )
						WHEN MATCHED THEN
						 UPDATE  SET
 						     REC                 = ?
						    , UPDT_ID             = ?
						    , UPDT_DTM            = SYSDATE
						 WHEN NOT MATCHED THEN
							INSERT (
									      RACER_PERIO_NO
									    , EXAM_CD
									    , ITEM_GBN_CD
									    , ITEM_CD
									    , CAND_NO
									    , REC		   
									    , INST_ID
									    , INST_DTM
										)VALUES (
											 ?
											,?
											,?
											,?
											,?
											,?
											,? 
											,SYSDATE								
										)
  		]]> 
  	</query>										 	
                  
    <query id="tbdb_strt_mesur_ib002" desc="체력측정 입력" fetchSize="10">
        <![CDATA[
			INSERT INTO TBDB_PERIO_EXAM (
			  
			     RACER_PERIO_NO
			    ,EXAM_CD 
			    ,ITEM_GBN_CD 
			    ,ITEM_CD 
			    ,CAND_NO 
			    ,DT 
			    ,REC
			    ,SCR
			    ,INST_ID
			    ,INST_DTM
			)VALUES (
				 ?
				,?
				,?
				,?
				,?
				,?
				,?
				,?
				,?
				,SYSDATE
			)    
		]]>
    </query>
    
    <query id="tbdb_strt_mesur_ub001" desc="체력측정 갱신" fetchSize="10">
        <![CDATA[
			UPDATE TBDB_PERIO_EXAM 
			SET
			       REC                 = ?
			       ,UPDT_ID            = ?  
			       ,UPDT_DTM           = SYSDATE
			WHERE 
				   RACER_PERIO_NO      = ?
			AND
				   EXAM_CD             = ?
			AND
				   ITEM_GBN_CD         = ?
			AND
				   ITEM_CD             = ?
			AND
				   DT                  = ?
			AND
				   SCR                 = ?	   
			AND
				   CAND_NO             = ?	   	   	   		   
				       
		]]>
    </query>
       
</queryMap>