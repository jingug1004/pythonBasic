<?xml version="1.0" encoding="EUC-KR" ?> <queryMap desc="tbdb_selt_rept_mngr(후보생선발접수)"> <query id="tbdb_selt_rept_fb001" desc="기수 조회" fetchSize="10"> <![CDATA[ 			SELECT CD_NM AS RACER_PERIO_NO			FROM TBDA_SPEC_CD				WHERE GRP_CD = 'A10001'			ORDER BY CD DESC	  ]]>   </query> <query id="tbdb_selt_rept_fb002" desc="지원자리스트조회 " fetchSize="10"> <![CDATA[ 			SELECT 			        RACER_PERIO_NO AS RACER_PERIO_NO,     					FC_DEC(RES_NO) AS RES_NO,					NM_KOR         AS NM_KOR,					ADDR || ' ' || DETL_ADDR AS ADDR,					POST_NO1 || '-' || POST_NO2 AS POST_NO,					REPT_NO			FROM					TBDB_SELT_REPT			WHERE 					RACER_PERIO_NO = ?			ORDER BY 					REPT_NO  ]]>   </query>  <query id="tbdb_selt_rept_fb003" desc="지원자 상세정보 조회 " fetchSize="10"> <![CDATA[ 			SELECT 			        RACER_PERIO_NO ,     					FC_DEC(RES_NO) AS RES_NO,										BIRTH_DT,					REPT_NO,					NM_KOR,					NM_CHN,					POST_NO1,					POST_NO2,					ADDR,					DETL_ADDR,					PERMNT_POST_NO1,					PERMNT_POST_NO2,					PERMNT,					DETL_PERMNT,					PHONE1,					PHONE2,					PHONE3,					CELLPHONE1,					CELLPHONE2,					CELLPHONE3,					SPA_PHONE1,					SPA_PHONE2,					SPA_PHONE3,					EMAIL,					MTARY_GBN,					ARMY_TPE,					BRNCH,					MLT_CLS,					SVCE_TERM1,					SVCE_TERM2,					SVCE_TERM_MM,					SVCE_TERM_BLNG,					ARMY_PATRIOTS,					HGHT,					WGHT,					SIGHT_LEFT,					SIGHT_RIGHT,					HEAL_SPEC_DESC,					MRRG_YN,					RELGN,					SPA_ABTY,					HOBY,					PTO_FILE,					PTO_URL,					DEL_YN,					JOIN_PATH,					LAST_SCHL,			        SCHL_CARR_STAT,			        RACER_TPE			FROM					TBDB_SELT_REPT			WHERE 					RACER_PERIO_NO = ?					AND REPT_NO = ?  ]]>   </query>        <query id="tbdb_selt_rept_ib001" desc="지원자 상세정보 입력 " fetchSize="10"> <![CDATA[ 			INSERT INTO TBDB_SELT_REPT(			        RACER_PERIO_NO ,     					RES_NO,					REPT_NO,					NM_KOR,					NM_CHN,					POST_NO1,					POST_NO2,					ADDR,					DETL_ADDR,					PERMNT_POST_NO1,					PERMNT_POST_NO2,					PERMNT,					DETL_PERMNT,					PHONE1,					PHONE2,					PHONE3,					CELLPHONE1,					CELLPHONE2,					CELLPHONE3,					SPA_PHONE1,					SPA_PHONE2,					SPA_PHONE3,					EMAIL,					MTARY_GBN,					ARMY_TPE,					BRNCH,					MLT_CLS,					SVCE_TERM1,					SVCE_TERM2,					SVCE_TERM_MM,					SVCE_TERM_BLNG,					ARMY_PATRIOTS,					HGHT,					WGHT,					SIGHT_LEFT,					SIGHT_RIGHT,					HEAL_SPEC_DESC,					MRRG_YN,					RELGN,					SPA_ABTY,					HOBY,					PTO_FILE,					PTO_URL,					JOIN_PATH,					DEL_YN,					RACER_TPE,					LAST_SCHL,			        SCHL_CARR_STAT,			        			        BIRTH_DT,					INST_ID,					INST_DTM,					UPDT_ID,					UPDT_DTM					)			VALUES					(					?,   					FC_ENC(?),  					?,						?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					?,					'N',					?,?,?,					?,					?,					SYSDATE,					?,					SYSDATE					)  ]]>   </query>    <query id="tbdb_selt_rept_ub001" desc="지원자 상세정보 수정 " fetchSize="10"> <![CDATA[ 			UPDATE						TBDB_SELT_REPT 			SET 					NM_KOR=?,					NM_CHN=?,					POST_NO1=?,					POST_NO2=?,					ADDR=?,					DETL_ADDR=?,					PERMNT_POST_NO1=?,					PERMNT_POST_NO2=?,					PERMNT=?,					DETL_PERMNT=?,					PHONE1=?,					PHONE2=?,					PHONE3=?,					CELLPHONE1=?,					CELLPHONE2=?,					CELLPHONE3=?,					SPA_PHONE1=?,					SPA_PHONE2=?,					SPA_PHONE3=?,					EMAIL=?,					MTARY_GBN=?,					ARMY_TPE=?,					BRNCH=?,					MLT_CLS=?,					SVCE_TERM1=?,					SVCE_TERM2=?,					SVCE_TERM_MM=?,					SVCE_TERM_BLNG=?,					ARMY_PATRIOTS=?,					HGHT=?,					WGHT=?,					SIGHT_LEFT=?,					SIGHT_RIGHT=?,					HEAL_SPEC_DESC=?,					MRRG_YN=?,					RELGN=?,					SPA_ABTY=?,					HOBY=?,					PTO_FILE = ?,					PTO_URL = ?,					JOIN_PATH = ?,					DEL_YN = ?,					RACER_TPE   = ?,					LAST_SCHL   = ?,			        SCHL_CARR_STAT  = ?,			        BIRTH_DT  = ?,					UPDT_ID = ?,					UPDT_DTM=SYSDATE			WHERE					RACER_PERIO_NO = ?					AND REPT_NO = ?					--AND RES_NO = FC_ENC(?)  ]]>   </query>    <query id="tbdb_selt_rept_db001" desc="기수 삭제" fetchSize="10"> <![CDATA[ 			DELETE FROM TBDB_SELT_REPT			WHERE 1=1			AND RACER_PERIO_NO = ?			AND REPT_NO = ?			--AND RES_NO = FC_ENC(?)			  ]]>   </query>  <query id="tbdb_selt_fmly_fb001" desc="지원자 상세정보 조회(가족사항) " fetchSize="10">	<![CDATA[   			SELECT  					RACER_PERIO_NO,			        REPT_NO,			        SEQ,			        FMLY_RELN,			        NM_KOR,			        LUNSOL,			        BIRTH_DT,			        NATY_SCHL,			        OFFC_NM,			        FLOC,			        LODGE_YN			FROM    					TBDB_SELT_FMLY			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?	]]>	</query>    <query id="tbdb_selt_fmly_ib001" desc="가족사항 입력" fetchSize="10"> <![CDATA[ 			INSERT			INTO					TBDB_SELT_FMLY(					RACER_PERIO_NO,					REPT_NO,					SEQ,					FMLY_RELN,					NM_KOR,					LUNSOL,					BIRTH_DT,					NATY_SCHL,					OFFC_NM,					FLOC,					LODGE_YN,					INST_ID,					INST_DTM,					UPDT_ID,					UPDT_DTM					)			VALUES	( 					?					,?					,(	SELECT 								NVL(MAX(SEQ),0)+1 						FROM 								TBDB_SELT_FMLY 						WHERE 								RACER_PERIO_NO=? 								AND REPT_NO=?					)					,?					,?					,?					,?					,?					,?					,?					,?					,?					,SYSDATE					,?					,SYSDATE					)  ]]>   </query>    <query id="tbdb_selt_fmly_ub001" desc="가족사항 수정" fetchSize="10"> <![CDATA[ 			UPDATE					TBDB_SELT_FMLY			SET					FMLY_RELN=?					,NM_KOR=?					,LUNSOL=?					,BIRTH_DT=?					,NATY_SCHL=?					,OFFC_NM=?					,FLOC=?					,LODGE_YN=?					,UPDT_ID = ?					,UPDT_DTM = SYSDATE			WHERE						RACER_PERIO_NO = ?					AND REPT_NO=?					AND SEQ=?  ]]>   </query>     <query id="tbdb_selt_fmly_db001" desc="가족사항 삭제" fetchSize="10"> <![CDATA[ 			DELETE 			FROM					TBDB_SELT_FMLY			WHERE						RACER_PERIO_NO = ?					AND REPT_NO=?					AND SEQ=?  ]]>   </query>                            <query id="tbdb_selt_schl_carr_fb001" desc="학력사항 조회 " fetchSize="10">	<![CDATA[   			SELECT  					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,LAST_SCHL_NM			        ,MTRIC_SCHL_DT			        ,GRDU_SCHL_DT			        ,MJR			        ,GRDU_GBN			        ,THIS_SCHL_GBN			        ,DAY_GBN			        ,LAST_SCHL_AREA			FROM    					TBDB_SELT_SCHL_CARR			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?	]]>	</query>		<query id="tbdb_selt_schl_carr_ib001" desc="학력사항 입력" fetchSize="10">	<![CDATA[   			INSERT			INTO					TBDB_SELT_SCHL_CARR(  					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,LAST_SCHL_NM			        ,MTRIC_SCHL_DT			        ,GRDU_SCHL_DT			        ,MJR			        ,GRDU_GBN			        ,THIS_SCHL_GBN			        ,DAY_GBN			        ,LAST_SCHL_AREA			        ,INST_ID			        ,INST_DTM			        ,UPDT_ID			        ,UPDT_DTM			        )			VALUES					(					?					,?					,	(						SELECT 	NVL(MAX(SEQ),0)+1						FROM	TBDB_SELT_SCHL_CARR						WHERE	RACER_PERIO_NO = ?								AND REPT_NO = ?						)					,?					,?					,?					,?					,?					,?					,?					,?					,?					,SYSDATE					,?					,SYSDATE					)	]]>	</query>		<query id="tbdb_selt_schl_carr_ub001" desc="학력사항 수정" fetchSize="10">	<![CDATA[   			UPDATE					TBDB_SELT_SCHL_CARR			SET			        LAST_SCHL_NM = ?			        ,MTRIC_SCHL_DT = ?			        ,GRDU_SCHL_DT = ?			        ,MJR = ?			        ,GRDU_GBN = ?			        ,THIS_SCHL_GBN = ?			        ,DAY_GBN = ?			        ,LAST_SCHL_AREA = ?			        ,UPDT_ID = ?			        ,UPDT_DTM = SYSDATE			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>		<query id="tbdb_selt_schl_carr_db001" desc="학력사항 삭제" fetchSize="10">	<![CDATA[   			DELETE  			FROM    					TBDB_SELT_SCHL_CARR			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>	<query id="tbdb_selt_detl_carr_fb001" desc="주요활동 조회" fetchSize="10">	<![CDATA[   			SELECT  					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,STR_DT			        ,END_DT			        ,GROUP_NM			        ,FRES			        ,DETL_CNTNT			FROM    					TBDB_SELT_DETL_CARR			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?	]]>	</query>		<query id="tbdb_selt_detl_carr_ib001" desc="주요활동 입력" fetchSize="10">	<![CDATA[   			INSERT			INTO					TBDB_SELT_DETL_CARR					(					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,STR_DT			        ,END_DT			        ,GROUP_NM			        ,FRES			        ,DETL_CNTNT			        ,INST_ID			        ,INST_DTM			        ,UPDT_ID			        ,UPDT_DTM			        )			VALUES					(					?					,?					,(						SELECT 	NVL(MAX(SEQ),0)+1						FROM	TBDB_SELT_DETL_CARR 						WHERE	RACER_PERIO_NO = ?								AND REPT_NO = ?					)					,?					,?					,?					,?					,?					,?					,SYSDATE					,?					,SYSDATE					)	]]>	</query>		<query id="tbdb_selt_detl_carr_ub001" desc="주요활동 수정" fetchSize="10">	<![CDATA[   			UPDATE  					TBDB_SELT_DETL_CARR			SET			        STR_DT = ?			        ,END_DT = ?			        ,GROUP_NM = ?			        ,FRES = ?			        ,DETL_CNTNT = ?			        ,UPDT_ID = ?			        ,UPDT_DTM = SYSDATE			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>		<query id="tbdb_selt_detl_carr_db001" desc="주요활동 삭제" fetchSize="10">	<![CDATA[   			DELETE  			FROM    					TBDB_SELT_DETL_CARR			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>	<query id="tbdb_selt_carr_fb001" desc="경력사항 조회" fetchSize="10">	<![CDATA[   			SELECT  					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,STR_DT			        ,END_DT			        ,CARR_TERM			        ,OFFC_NM			        ,FLOC			        ,CHA_FLD			        ,LEAVE_RSN			FROM    					TBDB_SELT_CARR			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?	]]>	</query>		<query id="tbdb_selt_carr_ib001" desc="경력사항 입력" fetchSize="10">	<![CDATA[   			INSERT 			INTO					TBDB_SELT_CARR					(					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,STR_DT			        ,END_DT			        ,CARR_TERM			        ,OFFC_NM			        ,FLOC			        ,CHA_FLD			        ,LEAVE_RSN			        ,INST_ID			        ,INST_DTM			        ,UPDT_ID			        ,UPDT_DTM			        )			VALUES	(					?					,?					,(						SELECT 	NVL(MAX(SEQ),0)+1						FROM	TBDB_SELT_CARR						WHERE	RACER_PERIO_NO = ?			        			AND REPT_NO = ?					)					,?					,?					,?					,?					,?					,?					,?					,?					,SYSDATE					,?					,SYSDATE					)	]]>	</query>		<query id="tbdb_selt_carr_ub001" desc="경력사항 수정" fetchSize="10">	<![CDATA[   			UPDATE					TBDB_SELT_CARR			SET  			        STR_DT = ?			        ,END_DT = ?			        ,CARR_TERM = ?			        ,OFFC_NM = ?			        ,FLOC = ?			        ,CHA_FLD = ?			        ,LEAVE_RSN = ?			        ,UPDT_ID = ?			        ,UPDT_DTM = SYSDATE			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>		<query id="tbdb_selt_carr_db001" desc="경력사항 삭제" fetchSize="10">	<![CDATA[   			DELETE  			FROM    					TBDB_SELT_CARR			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>	<query id="tbdb_selt_cert_fb001" desc="자격면허 조회" fetchSize="10">	<![CDATA[   			SELECT  					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,CERT_NM			        ,CERT_NO			        ,REG_DT			        ,CERT_GRD			FROM    					TBDB_SELT_CERT			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?	]]>	</query>		<query id="tbdb_selt_cert_ib001" desc="자격면허 입력" fetchSize="10">	<![CDATA[   			INSERT			INTO					TBDB_SELT_CERT					(					RACER_PERIO_NO			        ,REPT_NO			        ,SEQ			        ,CERT_NM			        ,CERT_NO			        ,REG_DT			        ,CERT_GRD			        ,INST_ID			        ,INST_DTM			        ,UPDT_ID			        ,UPDT_DTM			        )			VALUES					(					?					,?					,(	SELECT	NVL(MAX(SEQ),0)+1						FROM	TBDB_SELT_CERT						WHERE	RACER_PERIO_NO = ?								AND REPT_NO = ?						)					,?					,?					,?					,?					,?					,SYSDATE					,?					,SYSDATE										)	]]>	</query>		<query id="tbdb_selt_cert_ub001" desc="자격면허 수정" fetchSize="10">	<![CDATA[   			UPDATE					TBDB_SELT_CERT			SET			        CERT_NM = ?			        ,CERT_NO = ?			        ,REG_DT = ?			        ,CERT_GRD = ?			        ,UPDT_ID = ?			        ,UPDT_DTM = SYSDATE			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>		<query id="tbdb_selt_cert_db001" desc="자격면허 삭제" fetchSize="10">	<![CDATA[   			DELETE  			FROM    					TBDB_SELT_CERT			WHERE   					RACER_PERIO_NO = ?			        AND REPT_NO = ?			        AND SEQ = ?	]]>	</query>		<query id="d02000005_fb001" desc="경륜 선발접수 키조회" fetchSize="10">	<![CDATA[   			-- SELECT  TO_CHAR(SYSDATE,'YYYY')||LPAD(NVL(SUBSTR(MAX(REPT_NO),5,8),0)+1,4,'0') AS SEQ            -- FROM    TBDB_SELT_REPT             -- WHERE   SUBSTR(REPT_NO,1,4) = TO_CHAR(SYSDATE,'YYYY')            	        SELECT A.RMK||LPAD(SUBSTR(NVL(MAX(B.REPT_NO),'00000000'),5,8)+1,4,'0') AS SEQ	        FROM	        TBDA_SPEC_CD A,	        (	        	SELECT RACER_PERIO_NO, REPT_NO FROM TBDB_SELT_REPT	        ) B			WHERE A.CD_NM = B.RACER_PERIO_NO(+)			AND A.GRP_CD = 'A10001'			AND TRIM(A.CD_NM) = ?			GROUP BY RMK	]]>	</query>    <query id="d02000005_fa002" desc="파일정보가져오기쿼리" fetchSize="10">        <![CDATA[			SELECT	RACER_PERIO_NO					,REPT_NO					,FILE_SEQ				    ,FILE_TITLE				    ,FILE_NAME				    ,FILE_URL				    ,FILE_SIZE				    ,0 AS CHK			FROM	TBDB_SELT_REPT_FILE			WHERE	RACER_PERIO_NO = ?					AND REPT_NO = ?        ]]>    </query>    <query id="d02000005_ia001" desc="파일입력" fetchSize="10">        <![CDATA[			INSERT				INTO	TBDB_SELT_REPT_FILE (					RACER_PERIO_NO					,REPT_NO					,FILE_SEQ				    ,FILE_TITLE				    ,FILE_NAME				    ,FILE_URL				    ,FILE_SIZE				    ,INST_ID				    ,INST_DTM					) VALUES (			         ?			        ,?			        ,(SELECT	NVL(MAX(FILE_SEQ),0) + 1			          FROM		TBDB_SELT_REPT_FILE			          WHERE  	RACER_PERIO_NO = ?			          			AND REPT_NO = ?			         )			        ,?			        ,?			        ,?			        ,?			        ,?			        ,SYSDATE			)        ]]>    </query>    <query id="d02000005_ua001" desc="파일수정" fetchSize="10">        <![CDATA[			UPDATE	TBDB_SELT_REPT_FILE			SET		FILE_TITLE = ?				    ,FILE_NAME = ?				    ,FILE_URL = ?				    ,FILE_SIZE = ?			WHERE	RACER_PERIO_NO = ?					AND REPT_NO = ?					AND FILE_SEQ = ?        ]]>    </query>        <query id="d02000005_da001" desc="파일 삭제쿼리" fetchSize="10">        <![CDATA[			DELETE	FROM TBDB_SELT_REPT_FILE			WHERE 	RACER_PERIO_NO = ?					AND REPT_NO = ?					AND	FILE_SEQ = NVL(?, FILE_SEQ)        ]]>    </query>   </queryMap>