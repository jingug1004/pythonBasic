<?xml version="1.0" encoding="euc-kr"?>
<Window>
	<Form Height="360" Id="D02000036_01" Left="8" OnLoadCompleted="D02000032_01_OnLoadCompleted" PidAttrib="7" Title="위반행위" Top="8" Ver="1.0" Width="802" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="dsTbdbViolAct">
				<Contents>
					<colinfo id="RACE_YY" size="256" type="STRING"/>
					<colinfo id="ROUND" size="256" type="STRING"/>
					<colinfo id="RACE_NO" size="256" type="STRING"/>
					<colinfo id="BACK_NO" size="256" type="STRING"/>
					<colinfo id="CAND_NO" size="256" type="STRING"/>
					<colinfo id="SEQ" size="256" type="STRING"/>
					<colinfo id="WHEEL_NO" size="256" type="STRING"/>
					<colinfo id="VIOL_PLC" size="256" type="STRING"/>
					<colinfo id="VIOL_JO1" size="256" type="STRING"/>
					<colinfo id="VIOL_HANG1" size="256" type="STRING"/>
					<colinfo id="VIOL_HO1" size="256" type="STRING"/>
					<colinfo id="VIOL_JO2" size="256" type="STRING"/>
					<colinfo id="VIOL_HANG2" size="256" type="STRING"/>
					<colinfo id="VIOL_HO2" size="256" type="STRING"/>
					<colinfo id="VIOL_CD" size="256" type="STRING"/>
					<colinfo id="GBN" size="256" type="STRING"/>
					<colinfo id="REFE" size="256" type="STRING"/>
					<colinfo id="REPORT_DT" size="256" type="STRING"/>
					<colinfo id="VIOL_DESC" size="256" type="STRING"/>
					<colinfo id="CAND_NM" size="256" type="STRING"/>
					<colinfo id="CHK" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="dsOutGbn">
				<Contents>
					<colinfo id="CD" size="256" type="STRING"/>
					<colinfo id="CD_NM" size="256" type="STRING"/>
					<record>
						<CD>0</CD>
						<CD_NM>무</CD_NM>
					</record>
					<record>
						<CD>1</CD>
						<CD_NM>유</CD_NM>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="dsOutViolCd">
				<Contents>
					<colinfo id="GRP_CD" size="256" type="STRING"/>
					<colinfo id="CD" size="256" type="STRING"/>
					<colinfo id="CD_NM" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="dsOutViolPlc">
				<Contents>
					<colinfo id="GRP_CD" size="256" type="STRING"/>
					<colinfo id="CD" size="256" type="STRING"/>
					<colinfo id="CD_NM" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="dsInComCd">
				<Contents>
					<colinfo id="DSNAME" size="20" type="STRING"/>
					<colinfo id="CD_GRP_ID" size="6" type="STRING"/>
					<colinfo id="QUERY_ID" size="256" type="STRING"/>
					<colinfo id="DESCRIPTION" size="256" type="STRING"/>
					<colinfo id="ALL_YN" size="1" type="STRING"/>
					<record>
						<ALL_YN></ALL_YN>
						<CD_GRP_ID>D10082</CD_GRP_ID>
						<DESCRIPTION>위반행위지점</DESCRIPTION>
						<DSNAME>dsOutViolPlc</DSNAME>
						<QUERY_ID></QUERY_ID>
					</record>
					<record>
						<ALL_YN></ALL_YN>
						<CD_GRP_ID>D10083</CD_GRP_ID>
						<DESCRIPTION>위반행위</DESCRIPTION>
						<DSNAME>dsOutViolCd</DSNAME>
						<QUERY_ID></QUERY_ID>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="dsOutGoalGbn">
				<Contents>
					<colinfo id="GRP_CD" size="256" type="STRING"/>
					<colinfo id="CD" size="256" type="STRING"/>
					<colinfo id="CD_NM" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="dsOutGoalGbn_0">
				<Contents>
					<colinfo id="GRP_CD" size="256" type="STRING"/>
					<colinfo id="CD" size="256" type="STRING"/>
					<colinfo id="CD_NM" size="256" type="STRING"/>
				</Contents>
			</Dataset>
		</Datasets>
		<Shape BKColor="user2" Bottom="298" Height="75" Id="Shape1" Left="373" LineColor="user3" Right="799" RoundHeight="5" RoundUnit="Pixel" RoundWidth="5" TabOrder="35" Top="223" Type="RoundRect" Width="426"></Shape>
		<Shape BKColor="user2" Bottom="298" Height="75" Id="Shape0" Left="1" LineColor="user3" Right="371" RoundHeight="5" RoundUnit="Pixel" RoundWidth="5" TabOrder="34" Top="223" Type="RoundRect" Width="370"></Shape>
		<Shape BKColor="user2" Bottom="330" Height="28" Id="Shape3" Left="1" LineColor="user3" Right="799" RoundHeight="5" RoundUnit="Pixel" RoundWidth="5" TabOrder="32" Top="302" Type="RoundRect" Width="798"></Shape>
		<Image Height="30" Id="Image2" ImageID="pop_bg" LeftMargin="25" TabOrder="13" Width="800"></Image>
		<Static Height="20" Id="Static9" Left="26" Style="snis_pop_title" TabOrder="14" Text="위반행위" Top="8" VAlign="Middle" Width="207"></Static>
		<TextArea BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_DESC" Height="24" Id="TextArea0" ImeMode="native" Left="6" MaxLength="2000" Style="snis_m_input01" TabOrder="3" Top="249" Width="361"></TextArea>
		<Combo BindDataset="dsTbdbViolAct" Border="Flat" CodeColumn="CD" Column="VIOL_PLC" DataColumn="CD_NM" Height="20" Id="cboViolPlc" ImeMode="none" InnerDataset="dsOutViolPlc" Left="202" Style="snis_m_input01" TabOrder="2" Top="226" Width="112"></Combo>
		<Radio BindDataset="dsTbdbViolAct" Border="None" CodeColumn="CD" Column="GBN" ColumnCount="2" DataColumn="CD_NM" Height="20" Id="rdGbn" INDEX="0" InnerDataset="dsOutGbn" Left="128" Style="snis_m_radio" TabOrder="12" Top="307" Width="86">
			<Contents>
				<Layout code="M" height="20" left="5" text="무" top="0" width="40"/>
				<Layout code="W" height="20" left="45" text="유" top="0" width="30"/>
			</Contents>
		</Radio>
		<Static Align="Right" Border="Flat" Height="20" Id="Static14" Left="5" Style="snis_m_lable" TabOrder="15" Text="적기구분&#32;" Top="306" VAlign="Middle" Width="110"></Static>
		<Static Align="Center" Height="20" Id="Static0" Left="12" Style="snis_txt" TabOrder="16" Text="상기자는&#32;" Top="227" VAlign="Middle" Width="76"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="WHEEL_NO" Height="20" Id="edWheelNo" Left="90" MaxLength="1" Style="snis_m_input01" TabOrder="1" Top="227" Width="41"></Edit>
		<Static Align="Center" Height="20" Id="Static1" Left="134" Style="snis_txt" TabOrder="17" Text="바퀴&#32;째에" Top="227" VAlign="Middle" Width="60"></Static>
		<Static Align="Center" Height="20" Id="Static2" Left="316" Style="snis_txt" TabOrder="18" Text="부근에서" Top="227" VAlign="Middle" Width="48"></Static>
		<Static Align="Center" Height="20" Id="Static3" Left="376" Style="snis_txt" TabOrder="19" Text="따라서,&#32;경기규칙&#32;제" Top="227" VAlign="Middle" Width="115"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_JO1" Height="20" Id="Edit1" Left="493" MaxLength="3" Style="snis_m_input01" TabOrder="5" Top="228" Width="34"></Edit>
		<Static Align="Center" Height="20" Id="Static4" Left="530" Style="snis_txt" TabOrder="20" Text="조" Top="227" VAlign="Middle" Width="15"></Static>
		<Static Align="Center" Height="20" Id="Static5" Left="549" Style="snis_txt" TabOrder="21" Text="제" Top="227" VAlign="Middle" Width="15"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_HANG1" Height="20" Id="Edit2" Left="566" MaxLength="3" Style="snis_m_input01" TabOrder="6" Top="229" Width="34"></Edit>
		<Static Align="Center" Height="20" Id="Static6" Left="603" Style="snis_txt" TabOrder="22" Text="항" Top="227" VAlign="Middle" Width="15"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_HO1" Height="20" Id="Edit3" Left="640" MaxLength="3" Style="snis_m_input01" TabOrder="7" Top="228" Width="34"></Edit>
		<Static Align="Center" Height="20" Id="Static7" Left="622" Style="snis_txt" TabOrder="23" Text="제" Top="227" VAlign="Middle" Width="15"></Static>
		<Static Align="Center" Height="20" Id="Static8" Left="676" Style="snis_txt" TabOrder="24" Text="호에&#32;규정에&#32;저축되어" Top="227" VAlign="Middle" Width="119"></Static>
		<Static Align="Center" Height="20" Id="Static10" Left="376" Style="snis_txt" TabOrder="25" Text="&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;경기규칙&#32;제" Top="252" VAlign="Middle" Width="115"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_JO2" Height="20" Id="Edit4" Left="493" MaxLength="3" Style="snis_m_input01" TabOrder="8" Top="252" Width="34"></Edit>
		<Static Align="Center" Height="20" Id="Static11" Left="530" Style="snis_txt" TabOrder="26" Text="조" Top="252" VAlign="Middle" Width="15"></Static>
		<Static Align="Center" Height="20" Id="Static12" Left="549" Style="snis_txt" TabOrder="27" Text="제" Top="252" VAlign="Middle" Width="15"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_HANG2" Height="20" Id="Edit5" Left="566" MaxLength="3" Style="snis_m_input01" TabOrder="9" Top="252" Width="34"></Edit>
		<Static Align="Center" Height="20" Id="Static13" Left="603" Style="snis_txt" TabOrder="28" Text="항" Top="252" VAlign="Middle" Width="15"></Static>
		<Static Align="Center" Height="20" Id="Static15" Left="622" Style="snis_txt" TabOrder="29" Text="제" Top="252" VAlign="Middle" Width="15"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="VIOL_HO2" Height="20" Id="Edit6" Left="639" MaxLength="3" Style="snis_m_input01" TabOrder="10" Top="252" Width="34"></Edit>
		<Static Align="Center" Height="20" Id="Static16" Left="676" Style="snis_txt" TabOrder="30" Text="호에&#32;규칙에&#32;의거" Top="252" VAlign="Middle" Width="92"></Static>
		<Combo BindDataset="dsTbdbViolAct" Border="Flat" CodeColumn="CD" Column="VIOL_CD" DataColumn="CD_NM" Height="20" Id="Combo0" InnerDataset="dsOutViolCd" Left="423" Style="snis_m_input01" TabOrder="11" Top="274" Width="152"></Combo>
		<Static Align="Center" Height="20" Id="Static17" Left="577" Style="snis_txt" TabOrder="31" Text="로&#32;판정하였습니다." Top="276" VAlign="Middle" Width="104"></Static>
		<Grid AutoEnter="TRUE" AutoFit="TRUE" AutoFitEndLine="Hide" BindDataset="dsTbdbViolAct" BKColor="user15" BkColor2="user16" BkSelColor="user17" BoldHead="true" Border="Flat" BorderColor="user22" Bottom="221" Editable="TRUE" Enable="true" EndLineColor="default" FillArea="TRUE" HeadBorder="Flat" HeadHeight="20" Height="168" Id="grdTbdbViolAct" InputPanel="FALSE" LineColor="user18" MinWidth="100" Right="799" SelColor="user19" Style="snis_grid" TabOrder="33" TabStop="true" Top="53" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="default" WheelScrollRow="1" Width="799">
			<contents>
				<format id="Default">
					<columns>
						<col width="30"/>
						<col width="46"/>
						<col width="84"/>
						<col width="54"/>
						<col width="85"/>
						<col width="270"/>
						<col width="36"/>
						<col width="36"/>
						<col width="36"/>
						<col width="36"/>
						<col width="36"/>
						<col width="36"/>
						<col width="132"/>
						<col width="84"/>
						<col width="84"/>
					</columns>
					<head>
						<cell bkcolor="user20" col="0" display="text" rowspan="2"/>
						<cell bkcolor="user20" col="1" color="user21" display="text" font="굴림,9,Bold" rowspan="2" text="배번"/>
						<cell bkcolor="user20" col="2" color="user21" display="text" font="굴림,9,Bold" rowspan="2" text="선수명"/>
						<cell bkcolor="user20" col="3" display="text" rowspan="2" text="몇바퀴"/>
						<cell bkcolor="user20" col="4" display="text" rowspan="2" text="부근" Valign="Center"/>
						<cell bkcolor="user20" col="5" display="text" rowspan="2" text="내용"/>
						<cell bkcolor="user20" col="6" colspan="3" display="text" text="적용규정"/>
						<cell bkcolor="user20" col="9" colspan="3" display="text" text="의거규칙"/>
						<cell bkcolor="user20" col="12" display="text" rowspan="2" text="위반판정"/>
						<cell bkcolor="user20" col="13" display="text" rowspan="2" text="적기구분"/>
						<cell bkcolor="user20" col="14" display="text" rowspan="2" text="심판위원"/>
						<cell bkcolor="user20" col="6" display="text" row="1" text="조"/>
						<cell bkcolor="user20" col="7" display="text" row="1" text="항"/>
						<cell bkcolor="user20" col="8" display="text" row="1" text="호"/>
						<cell bkcolor="user20" col="9" display="text" row="1" text="조"/>
						<cell bkcolor="user20" col="10" display="text" row="1" text="항"/>
						<cell bkcolor="user20" col="11" display="text" row="1" text="호"/>
					</head>
					<body>
						<cell col="0" colid="CHK" combotext="CHK" display="checkbox" edit="checkbox"/>
						<cell bkcolor="blanchedalmond" col="1" colid="BACK_NO" display="text"/>
						<cell bkcolor="blanchedalmond" col="2" colid="CAND_NM" display="text"/>
						<cell align="center" col="3" colid="WHEEL_NO" display="text"/>
						<cell col="4" colid="VIOL_PLC" combocol="CD" combodataset="dsOutViolPlc" combodisplayrowcnt="15" combotext="CD_NM" display="combo"/>
						<cell col="5" colid="VIOL_DESC" display="text" imemode="native"/>
						<cell align="center" col="6" colid="VIOL_JO1" display="text"/>
						<cell align="center" col="7" colid="VIOL_HANG1" display="text"/>
						<cell align="center" col="8" colid="VIOL_HO1" display="text"/>
						<cell align="center" col="9" colid="VIOL_JO2" display="text"/>
						<cell align="center" col="10" colid="VIOL_HANG2" display="text"/>
						<cell align="center" col="11" colid="VIOL_HO2" display="text"/>
						<cell col="12" colid="VIOL_CD" combocol="CD" combodataset="dsOutViolCd" combotext="CD_NM" display="combo"/>
						<cell align="center" col="13" colid="GBN" combocol="CD" combodataset="dsOutGbn" combotext="CD_NM" display="combo"/>
						<cell col="14" colid="REFE" display="text"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Button Align="Left" ButtonStyle="TRUE" Height="20" Id="btnClose" ImageID="btn_txt_02" Left="747" LeftMargin="15" OnClick="btnClose_OnClick" Style="snis_btn" TabOrder="36" Text="닫기" Top="333" Transparent="TRUE" Width="50"></Button>
		<Button Align="Left" ButtonStyle="TRUE" Height="20" Id="btnSave" ImageID="btn_txt_02" Left="693" LeftMargin="15" OnClick="btnSave_OnClick" Style="snis_btn" TabOrder="37" Text="저장" Top="333" Transparent="TRUE" Width="50"></Button>
		<Div Height="20" Id="divBtnRow" Left="751" TabOrder="38" Text="Div0" Top="32" Url="common::comButtonRow.xml" Width="42">
			<Contents></Contents>
		</Div>
		<Static Align="Center" Height="20" Id="Static18" Left="11" Style="snis_txt" TabOrder="39" Text="심판위원" Top="277" VAlign="Middle" Width="76"></Static>
		<Edit BindDataset="dsTbdbViolAct" Border="Flat" Column="REFE" Height="20" Id="Edit0" ImeMode="native" Left="92" MaxLength="5" Style="snis_m_input01" TabOrder="4" Top="275" Width="225"></Edit>
	</Form>
	<Script><![CDATA[/***************************************************************************************************
*   Form Common Script        
*   화면명 : 경주기록측정 popup 창 (위반행위 입력)
*   작성자 : 임지헌
*   작성일 : 2008.3.20    
***************************************************************************************************/

/***************************************************************************************************
*                                         공통 Script Include                                      *
***************************************************************************************************/
#include "lib::can_common_script.js";
#include "lib::can_app_script.js";

/***************************************************************************************************
*                                          화면 변수 선언부                                        *
***************************************************************************************************/
var sFormId       = 'D02000032';
var sBUTTONLIST   = 'TTFTFT';                          //공통기능정의(버튼순으로 T or F)
var sUSERAUTH     = '';                                //사용자별 프로그램 사용 권한
var sFORMCAPTION  = '';                                //Form의 Title 정보
var sFORMLOCATION = '';                                //Form의 Location 정보
var sUSERLAVEL    = '';                                //Form의 사용  Level
var vREVOBJ       = Array(9);                          //결과값 처리를 위한 오브젝트 
var sGRDTIT       = "";                                //그리드 제목
var sCUROBJ       ;                                    //현재 LOST FOCUS 오브젝트

var sRACE_YY      = ""; 
var sROUND        = ""; 
var sRACE_NO      = ""; 
var sBACK_NO      = ""; 
var sCAND_NO      = ""; 
var sCAND_NM      = ""; 
var sReturn       = 0; 
var sUser = "";


function D02000032_01_OnLoadCompleted(obj)
{
	var		filter_str;

	// 변수가 없으면 그냥 Return

	if( (IsExistVar("RACE_YY") == false)&&(IsExistVar("ROUND") == false)&& (IsExistVar("RACE_NO") == false)&& (IsExistVar("BACK_NO") == false)&& (IsExistVar("CAND_NO") == false)&& (IsExistVar("CAND_NM") == false))    // GUBUN  값 -  1 : 전회상황, 2 : 금회상황  
		return;
	
	sRACE_YY  = RACE_YY;   // 기준년도 
	sROUND    = ROUND;     //  회차
	sRACE_NO  = RACE_NO;   // 경주번호
	sBACK_NO  = BACK_NO;   // 배번
	sCAND_NO  = CAND_NO;   // 후보생번호
	sCAND_NM  = CAND_NM;   // 후보생명
    sUser = gdsUser.GetColumn(0,"USER_NM");
    fcd_GetComboDs(dsInComCd);
}
/*-------------------------------------------------------------------------------------------------+
>>  화면 종료(닫기) 버튼 클릭 時 처리
+-------------------------------------------------------------------------------------------------*/
function btnClose_OnClick() {
	//화면 종료
	Close(sReturn);	
}

/*-------------------------------------------------------------------------------------------------+
>>  행추가 버튼 클릭 時 처리
+-------------------------------------------------------------------------------------------------*/
function fcAddRow(obj) {
	//DataSet의 Header 정보가 있을 때  Add 처리
	if ( obj.GetForm().id == "divBtnRow" ) {
            
       dsTbdbViolAct.addrow();
       dsTbdbViolAct.setColumn(dsTbdbViolAct.Currow, "RACE_YY", sRACE_YY);
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "ROUND",   sROUND); 
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "RACE_NO", sRACE_NO); 
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "BACK_NO", sBACK_NO); 
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "CAND_NO", sCAND_NO); 
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "CAND_NM", sCAND_NM); 
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "VIOL_JO1",'103');
       dsTbdbViolAct.SetColumn(dsTbdbViolAct.Currow, "REFE", sUser);
       edWheelNo.SetFocus(); 
   }        
}
/*-------------------------------------------------------------------------------------------------+
>>  행삭제 버튼 클릭 時 처리
+-------------------------------------------------------------------------------------------------*/
function fcDelRow(obj) {
	//DataSet의 Header 정보가 있을 때  Add 처리 	
	if ( obj.GetForm().id == "divBtnRow" ) {
            var sArg = "";

			if ( !fnc_DeleteCheck(dsTbdbViolAct, "CHK", "1") ) return;

	//		dsOutEduAssign_OnRowPosChanged();  	
	} 
}

/*-------------------------------------------------------------------------------------------------+
>>  단축키 처리(Form KeyDown)
+-------------------------------------------------------------------------------------------------*/
function fcHotKey(obj,objSenderObj,nChar,bShift,bControl,bAlt,nLLParam,nHLParam) {

	//Return Key Press時 Next Component focus
	if ( nChar == 13 ) {
		var oFocusComponent = GetNextComponent(true);
		oFocusComponent.setfocus();
		return;
	}

	//Control Key가 눌려져 있다면 단축키 처리
	//if (bControl) fnc_HotKey(this, nChar);
}

/*-------------------------------------------------------------------------------------------------+
>>  Transaction 후 처리 해야 할 내용!
+-------------------------------------------------------------------------------------------------*/

function fcCallBack(sServiceName, ErrorCode, ErrorMSG) {

    if ( !fnc_result(ErrorCode, ErrorMSG) ) return;
	
    switch(sServiceName) {
    
        // TBDB_VIOL_ACT  위반사항 조회 
        case "common-service:searchCode" :
            fcSearch(this); //조회             
            break;
    
        case "d02000032-service:saveTbdbViolAct" :      
            sReturn = 1;        
            break;
            
        case "d02000032-service:searchTbdbViolAct_Now" : 
            break;         
        
        default :
            break;
    }
    
    //오류가 없이 정상 처리되었다면...
	fcPostProcess(sServiceName);
}

/*-------------------------------------------------------------------------------------------------+
>>  조회 버튼 클릭 時 처리
+-------------------------------------------------------------------------------------------------*/
function fcSearchCheck(obj) {

	return true;
}

function fcSearch(obj) {
    if ( !fcSearchCheck(obj) ) return;

	var sServiceName = "";
    var sInDataSet   = "";
    var sOutDataSet  = "'";

	sServiceName = "d02000032-service:searchTbdbViolAct_Now";
	sInDataSet   = "";
	sOutDataSet  = "dsTbdbViolAct=dsTbdbViolAct";
      
	fcd_AddParam(Trim("RACE_YY"), sRACE_YY);
	fcd_AddParam(Trim("ROUND"),   sROUND);
	fcd_AddParam(Trim("RACE_NO"), sRACE_NO);
	fcd_AddParam(Trim("BACK_NO"), sBACK_NO);
	fcd_AddParam(Trim("CAND_NO"), sCAND_NO);
	
	fcd_SendTransaction(sServiceName, sInDataSet, sOutDataSet, "fcCallBack", false);

}

/*-------------------------------------------------------------------------------------------------+
>>  저장 버튼 클릭 時 처리
+-------------------------------------------------------------------------------------------------*/
function fcSaveCheck(obj) {

	//변경된 자료가 있는지 체크
	if ( !fnc_DatasetChangeCheck(dsTbdbViolAct) )
	{
		//저장 할 자료가 없음
		fnc_Message(SNIS_COM_1006, "N");
		return false;
	}

	// 경륜경주기록측정마스타 필수항목체크

	oDataSet          = "dsTbdbViolAct";
	sMandatoryColID   = "RACE_YY|ROUND|RACE_NO|BACK_NO|CAND_NO";
	sMandatoryColName = "기준년도|회차|경주번호|배번|후보생번호";
	oGrid             = "";
	
	if ( fnc_GetMandatoryViolateRow(oDataSet, sMandatoryColID, sMandatoryColName, oGrid) > -1 ) {
	    return false;
	}
	
/*
	if ( dsTbdbViolAct.RowCount() == 0 ) {
		fnc_Message(SNIS_COM_1035, "N", "위반사항");
        return false;
    }
    */
	for ( var i = 0; i < dsTbdbViolAct.RowCount(); i++ ) {
		dsTbdbViolAct.SetColumn(i, "SEQ", i + 1);
	}	
    return true;
}



function btnSave_OnClick(obj) {

    var sServiceName = "";
    var sInDataSet   = "";   
    var sOutDataSet  = "";
    
    if ( !fcSaveCheck(obj) ) return;


	sServiceName = "d02000032-service:saveTbdbViolAct";
	sInDataSet   = "dsTbdbViolAct=dsTbdbViolAct:u";   
	sOutDataSet  = "dsTbdbViolAct=dsTbdbViolAct";
    //fnc_DataSetPrint(dsTbdbViolAct);
	fcd_SendTransaction(sServiceName, sInDataSet, sOutDataSet, "fcCallBack");
	
}

]]></Script>
</Window>