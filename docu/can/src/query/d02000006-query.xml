<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbdb_exam_bas_mngr(시험별기준등록)"> 
    <query id="tbdb_exam_bas_item_gbn_fb001" desc="종목구분 조회" fetchSize="10">
		<![CDATA[
			SELECT   
					'0' CHK	
					,RACER_PERIO_NO
					,EXAM_CD			
					,ITEM_GBN_CD		
					,FST_ASSIGN_SCR_RATE	
				--	,SND_ASSIGN_SCR_RATE	
					,RMK				
			FROM	TBDB_EXAM_BAS_ITEM_GBN
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)
			AND		EXAM_CD = NVL(?, EXAM_CD)						
			AND		ITEM_GBN_CD = NVL(?, ITEM_GBN_CD)		
			ORDER BY RACER_PERIO_NO, EXAM_CD,ITEM_GBN_CD 	
	    ]]>
    </query>
    
    <query id="tbdb_exam_bas_item_fb001" desc="종목 조회" fetchSize="10">
		<![CDATA[
			SELECT   
					'0' CHK
					,RACER_PERIO_NO
					,EXAM_CD		
					,ITEM_GBN_CD	
					,ITEM_CD		
					,FST_ESTM_YN	
					,SND_ESTM_YN	
					,ARRAY_ORD		
					,RMK						
			FROM	TBDB_EXAM_BAS_ITEM
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)	
			AND		EXAM_CD = NVL(?, EXAM_CD)
			AND		ITEM_GBN_CD = NVL(?, ITEM_GBN_CD)
			AND		ITEM_CD = NVL(?, ITEM_CD)	
			ORDER BY EXAM_CD,ARRAY_ORD ASC		
	    ]]>
    </query>   
    
    <query id="tbdb_exam_bas_chng_bas_fb001" desc="환산기준표 조회" fetchSize="10">
		<![CDATA[
			SELECT   
					'0' CHK
					,RACER_PERIO_NO
					,EXAM_CD
					,ITEM_GBN_CD
					,ITEM_CD
					,BAS_SCR
					,START_REC
					,END_REC
					,RATE
			FROM	TBDB_EXAM_BAS_CHNG
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)	
			AND		EXAM_CD = NVL(?, EXAM_CD)						
			AND		ITEM_GBN_CD = NVL(?, ITEM_GBN_CD)
			AND		ITEM_CD = NVL(?, ITEM_CD)	
			ORDER BY RACER_PERIO_NO,EXAM_CD,ITEM_GBN_CD,ITEM_CD,BAS_SCR DESC	
	    ]]>
    </query>  
	
    <query id="tbdb_exam_bas_item_gbn_fb002" desc="전기수복사 종목구분 조회" fetchSize="10">
		<![CDATA[
			SELECT   
					'0' CHK
					,RACER_PERIO_NO		
					,EXAM_CD			
					,ITEM_GBN_CD		
					,FST_ASSIGN_SCR_RATE	
					--,SND_ASSIGN_SCR_RATE	
					,RMK				
			FROM	TBDB_EXAM_BAS_ITEM_GBN
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)			
	    ]]>
    </query>
    
    <query id="tbdb_exam_bas_item_fb002" desc="전기수복사 종목 조회" fetchSize="10">
		<![CDATA[
			SELECT   
					'0' CHK
					,RACER_PERIO_NO	
					,EXAM_CD		
					,ITEM_GBN_CD	
					,ITEM_CD		
					,FST_ESTM_YN	
	--				,SND_ESTM_YN	
					,ARRAY_ORD		
					,RMK						
			FROM	TBDB_EXAM_BAS_ITEM
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)				
	    ]]>
    </query>   
    
    <query id="tbdb_exam_bas_chng_bas_fb002" desc="전기수복사 환산기준표 조회" fetchSize="10">
		<![CDATA[
			SELECT   
					'0' CHK
					,RACER_PERIO_NO
					,EXAM_CD
					,ITEM_GBN_CD
					,ITEM_CD
					,BAS_SCR
					,START_REC
					,END_REC
					,RATE
			FROM	TBDB_EXAM_BAS_CHNG
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)	
			ORDER BY EXAM_CD,ITEM_GBN_CD,ITEM_CD,BAS_SCR DESC		
	    ]]>
    </query>  
 	<query id="tbdb_selt_bas_fb001" desc="선발인원1/2차" fetchSize="10">
		<![CDATA[
			SELECT   
					RACER_PERIO_NO
					,DT_FST_SELT
					,DT_FST_SELT_END
					,DT_SND_SELT
					,DT_SND_SELT_END
					,CNT_FST_SELT
					,CNT_SND_SELT 
			FROM TBDB_SELT_BAS
			WHERE	RACER_PERIO_NO = NVL(?, RACER_PERIO_NO)			
	    ]]>
    </query>  
    <query id="tbdb_PerioNo_fb001" desc="기수조회" fetchSize="10">
        <![CDATA[
			SELECT CD_NM AS RACER_PERIO_NO
			,CD_NM AS RACER_PERIO_NM
			FROM TBDA_SPEC_CD	
			WHERE GRP_CD = 'A10001'
			ORDER BY CD DESC		
		]]>
    </query>  
    
    <query id="item_code" desc="종목코드 조회" fetchSize="10">
        <![CDATA[
			SELECT 
			        TGC.GRP_CD      -- 그룹코드
			      , TGC.GRP_NM      -- 그룹명
			      , TSC.CD          -- 코드
			      , TSC.CD_NM       -- 코드명
			      , TSC.RMK         -- 비고
			FROM    TBDA_GRP_CD  TGC
			      , TBDA_SPEC_CD TSC
			WHERE TGC.GRP_CD = TSC.GRP_CD
			AND   TSC.DEL_YN = 'N'
			AND   TGC.GRP_CD IN ('D10063','D10028','D10058','D10065')
        ]]>
    </query> 
    
    <query id="item_gbn_code" desc="종목구분코드 조회" fetchSize="10">
        <![CDATA[
			SELECT 
			        TGC.GRP_CD      -- 그룹코드
			      , TGC.GRP_NM      -- 그룹명
			      , TSC.CD          -- 코드
			      , TSC.CD_NM       -- 코드명
			      , TSC.RMK         -- 비고
			FROM    TBDA_GRP_CD  TGC
			      , TBDA_SPEC_CD TSC
			WHERE TGC.GRP_CD = TSC.GRP_CD
			AND   TSC.DEL_YN = 'N'
			AND   TGC.GRP_CD = 'D10093'
        ]]>
    </query>            
    <query id="tbdb_selt_bas_ib001" desc="선발인원저장/수정" fetchSize="10">
    <![CDATA[
    
       MERGE INTO TBDB_SELT_BAS TSB
			            USING   DUAL
			            ON       (     TSB.RACER_PERIO_NO  		= ?     	
			                      )
						WHEN MATCHED THEN
						 UPDATE  SET
							  DT_FST_SELT		  = ?
							, DT_FST_SELT_END	  = ?
							, DT_SND_SELT	  	  = ?
							, DT_SND_SELT_END	  = ?
							, CNT_FST_SELT        = ?
						    , CNT_SND_SELT        = ?
						    , UPDT_ID             = ?
						    , UPDT_DTM            = SYSDATE
						 WHEN NOT MATCHED THEN
							INSERT (
									  RACER_PERIO_NO 
									,DT_FST_SELT		
									,DT_FST_SELT_END	 
									,DT_SND_SELT	  	
									,DT_SND_SELT_END		     
								    ,CNT_FST_SELT
									,CNT_SND_SELT     
									,INST_ID           
								    ,INST_DTM                
								)VALUES
								(			
									 ?
									,?
									,?
									,?
									,?
									,?
									,?
									,?
									,SYSDATE								
								)
		]]>
	</query>       
    <query id="tbdb_exam_bas_item_gbn_ib001" desc="종목구분 입력" fetchSize="10">
        <![CDATA[
        
            MERGE INTO  TBDB_EXAM_BAS_ITEM_GBN TEBIG
            			 USING   DUAL
			             ON (        TEBIG.RACER_PERIO_NO  		= ?  
								 AND TEBIG.EXAM_CD				= ?
								 AND TEBIG.ITEM_GBN_CD			= ?   	
			                 )
			             WHEN MATCHED THEN
						 UPDATE  SET
								 FST_ASSIGN_SCR_RATE= ?
								,RMK				= ?
								,UPDT_ID        	= ?
								,UPDT_DTM       	= SYSDATE
						 WHEN NOT MATCHED THEN
						 INSERT (
							    RACER_PERIO_NO     
							    ,EXAM_CD           
							    ,ITEM_GBN_CD       
							    ,FST_ASSIGN_SCR_RATE
							    ,RMK
								,INST_ID           
							    ,INST_DTM                
							)VALUES
							(			
								 ?
								,?
								,?
								,?
								,?
								,?
								,SYSDATE								
							)
		]]>
    </query> 
    <query id="tbdb_exam_bas_item_gbn_ub001" desc="종목구분 수정" fetchSize="10">
        <![CDATA[
			UPDATE TBDB_EXAM_BAS_ITEM_GBN 
			SET
					EXAM_CD				= ?
					,ITEM_GBN_CD		= ?
					,FST_ASSIGN_SCR_RATE= ?
					,RMK				= ?
					,UPDT_ID        	= ?
					,UPDT_DTM       	= SYSDATE
			WHERE	RACER_PERIO_NO		= ?
			AND		EXAM_CD				= ?
			AND		ITEM_GBN_CD			= ?
		]]>
    </query>
    
          
    <query id="tbdb_exam_bas_item_gbn_db001" desc="종목구분 삭제" fetchSize="10">
        <![CDATA[
			DELETE 
			FROM   	TBDB_EXAM_BAS_ITEM_GBN 
			WHERE	RACER_PERIO_NO		= ?
			AND		EXAM_CD				= ?
			AND		ITEM_GBN_CD			= ?  
		]]>
    </query>

    <query id="tbdb_exam_bas_item_ib001" desc="종목 입력" fetchSize="10">
        <![CDATA[
        
         MERGE INTO  TBDB_EXAM_BAS_ITEM TEBI
            			 USING   DUAL
			             ON (        TEBI.RACER_PERIO_NO  		= ?  
								 AND TEBI.EXAM_CD				= ?
								 AND TEBI.ITEM_GBN_CD			= ? 
								 AND TEBI.ITEM_CD 				= ? 	
			                 )
			             WHEN MATCHED THEN
						 UPDATE  SET
								 FST_ESTM_YN		= ?
								,ARRAY_ORD			= ?
								,RMK				= ?
								,UPDT_ID        	= ?
								,UPDT_DTM       	= SYSDATE
						 WHEN NOT MATCHED THEN
						 INSERT (
				 				 RACER_PERIO_NO			
							    ,EXAM_CD      
							    ,ITEM_GBN_CD  
							    ,ITEM_CD      
							    ,FST_ESTM_YN   
							    ,ARRAY_ORD    
							    ,RMK          
							    ,INST_ID      
							    ,INST_DTM                   
							)VALUES
							(			
								 ?
								,?
								,?
								,?
								,?
								,?
								,?
								,?
								,SYSDATE								
							)
			             
		]]>
    </query>

         
    <query id="tbdb_exam_bas_item_ub001" desc="종목 수정" fetchSize="10">
        <![CDATA[
			UPDATE TBDB_EXAM_BAS_ITEM 
			SET
					EXAM_CD				= ?
					,ITEM_GBN_CD		= ?
					,ITEM_CD			= ?
					,FST_ESTM_YN		= ?
					,SND_ESTM_YN		= ?
					,ARRAY_ORD			= ?
					,RMK				= ?
					,UPDT_ID        	= ?
					,UPDT_DTM       	= SYSDATE
			WHERE	RACER_PERIO_NO		= ?
			AND		EXAM_CD				= ?
			AND		ITEM_GBN_CD			= ?
			AND		ITEM_CD				= ?
		]]>
    </query>
    

	<query id="tbdb_exam_bas_item_db001" desc="종목 삭제" fetchSize="10">
        <![CDATA[
			DELETE 
			FROM   	TBDB_EXAM_BAS_ITEM 
			WHERE	RACER_PERIO_NO		= ?
			AND		EXAM_CD				= ?
			AND		ITEM_GBN_CD			= ?
			AND		ITEM_CD				= ? 
		]]>
    </query>   

    <query id="tbdb_exam_bas_chng_bas_ib001" desc="환산기준표 입력" fetchSize="10">
        <![CDATA[
			INSERT INTO TBDB_EXAM_BAS_CHNG(		
				RACER_PERIO_NO			
				,EXAM_CD		
				,ITEM_GBN_CD  
				,ITEM_CD      
				,BAS_SCR
				,START_REC
				,END_REC
				,RATE 
				,INST_ID      
				,INST_DTM     
			)VALUES
			(			
				?,?,?,?,?,?,?,?,?
				,SYSDATE
			)
		]]>
    </query>

         
    <query id="tbdb_exam_bas_chng_bas_ub001" desc="환산기준표 수정" fetchSize="10">
        <![CDATA[
			UPDATE TBDB_EXAM_BAS_CHNG
			SET
					 START_REC			= ?
					,END_REC			= ?
					,RATE 				= ?
					,UPDT_ID        	= ?
					,UPDT_DTM       	= SYSDATE
			WHERE	RACER_PERIO_NO		= ?
			AND		EXAM_CD				= ?
			AND		ITEM_GBN_CD			= ?
			AND		ITEM_CD				= ?
			AND     BAS_SCR				= ?
		]]>
    </query>


	<query id="tbdb_exam_bas_chng_bas_db001" desc="환산기준표 삭제" fetchSize="10">
        <![CDATA[
			DELETE 
			FROM   	TBDB_EXAM_BAS_CHNG
			WHERE	RACER_PERIO_NO		= ?
			AND		EXAM_CD				= ?
			AND		ITEM_GBN_CD			= ?
			AND		ITEM_CD				= ? 
			AND     BAS_SCR				= ?
		]]>
    </query>  

    
</queryMap>