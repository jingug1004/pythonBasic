<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbdb_detl_race_mngr(세부시행일정)">

    <query id="tbdb_detl_race_fb001" desc="년도 조회" fetchSize="10">
        <![CDATA[

			SELECT TRIM(RMK) AS RACE_YY
			FROM TBDA_SPEC_CD	
			WHERE GRP_CD = 'A10001'
			ORDER BY CD DESC	
		]]>
    </query>  
    
    <query id="tbdb_detl_race_fb002" desc="세부시행일정" fetchSize="10">
        <![CDATA[
			SELECT 
			       RACE_YY
			      ,ROUND
			      ,MAT_METH
			      ,RACE_METH
			      ,RACE_CNT
			      ,RACE_DT
			      ,AM_PM_GBN
			      ,RACER_CNT
			      ,SELT_ROUND 
			      ,'0' CHK
			FROM  TBDB_DETL_RACE_SCHE 
			WHERE RACE_YY = ?
			ORDER BY ROUND DESC
		     ]]>
    </query>   
    <query id="tbdb_detl_race_fb003" desc="대진표 코드" fetchSize="10">
        <![CDATA[			
			SELECT DISTINCT MAT_CD 
			FROM TBDB_ENFOR_RACE_GRD
			ORDER BY MAT_CD		
		]]>
    </query>
    <query id="tbdb_detl_race_fb004" desc="대진표 등급코드" fetchSize="10">
        <![CDATA[
        	SELECT 
        		 RACE_YY
			    ,ROUND
        		,MAT_CD
        		,GRD 
        		,0 as CHK 
        	FROM TBDB_DETL_MAT
			WHERE  RACE_YY = ?
			AND ROUND = ?
        ]]>
    </query> 
    <query id="tbdb_detl_race_ib001" desc="세부시행일정등록" fetchSize="10">
        <![CDATA[
			INSERT INTO TBDB_DETL_RACE_SCHE 
		    (
			  RACE_YY
			     ,ROUND
			     ,MAT_METH
			     ,RACE_METH
			     ,RACE_CNT
			     ,RACE_DT
			     ,AM_PM_GBN
			     ,RACER_CNT
			     ,SELT_ROUND
				 ,INST_ID
				 ,INST_DTM
			 )VALUES(
				 ?,?,?,?
				 ,?,?,?,?		 
			     ,?,?,SYSDATE
			 )
    		     ]]>
    </query> 
    <query id="tbdb_detl_race_ib002" desc="등급코드등록" fetchSize="10">
        <![CDATA[
		    INSERT INTO TBDB_DETL_MAT(
			   RACE_YY
			   ,ROUND
			   ,MAT_CD
			   ,GRD
			   ,INST_ID
			   ,INST_DTM
			   )VALUES(
			   ?,?,?,?,?,SYSDATE
			   )
	    		  ]]>
    </query> 
    <query id="tbdb_detl_race_ub001" desc="세부시행일정수정" fetchSize="10">
        <![CDATA[
			 UPDATE  TBDB_DETL_RACE_SCHE 
			 SET 
				  MAT_METH				= ?
			 	 ,RACE_METH				= ?
				 ,RACE_CNT				= ?
				 ,RACE_DT   			= ?
				 ,AM_PM_GBN		  		= ?
				 ,RACER_CNT				= ?
				 ,SELT_ROUND			= ?
				 ,UPDT_ID				= ?
				 ,UPDT_DTM				= SYSDATE
			 WHERE
				  RACE_YY 		= ?
			 AND  ROUND 				= ?
	    	 ]]>
    </query> 
    <query id="tbdb_detl_race_ub002" desc="등급코드수정" fetchSize="10">
        <![CDATA[
			  UPDATE TBDB_DETL_MAT
				SET
				    GRD	   = ?
				   ,UPDT_ID = ?
				   ,UPDT_DTM = SYSDATE
				WHERE
   					RACE_YY 	= ?
				AND ROUND		    = ?
				AND MAT_CD			= ?
	    	 ]]>
    </query> 
     <query id="tbdb_detl_race_db001" desc="세부시행일정삭제" fetchSize="10">
        <![CDATA[
        	DELETE FROM TBDB_DETL_RACE_SCHE 
        	WHERE 
        	RACE_YY 		= ?
			AND  ROUND 			= ?
         ]]>
    </query> 
         <query id="tbdb_detl_race_db002" desc="등급코드삭제" fetchSize="10">
        <![CDATA[
        	DELETE FROM TBDB_DETL_MAT
        	WHERE 
        	RACE_YY 		= ?
			AND  ROUND 			= ?
			AND MAT_CD			= ?
         ]]>
    </query> 
</queryMap>