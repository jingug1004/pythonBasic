<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="출주표"> 
    <query id="tbdn_cand_race_detl_fn001" desc="기수 조회" fetchSize="10">
		<![CDATA[
			   SELECT  CD  RACER_PERIO_NO
				 FROM  TBDM_SPEC_CD
				 WHERE GRP_CD  = 'D10000'
				 ORDER BY CD DESC
	    ]]>
    </query>
    
    <query id="tbdp_equip_detl_1_fb001" desc="장비 조회" fetchSize="10">
		<![CDATA[
		 
		  SELECT  EQUIP_GBN								 EQUIP_GBN
                 ,EQUIP_NO								 EQUIP_NO 
                 ,RACE_CNT 								 RACE_CNT
                 ,STATE									 STATE
                 ,TO_CHAR(TO_DATE(ENT_DT),'YYYY-MM-DD')  ENT_DT
                 ,RMK									 RMK
			FROM TBDP_EQUIP_DETL
			WHERE EQUIP_GBN  = ?
			AND STATE 		!= '004'
			ORDER BY EQUIP_GBN, EQUIP_NO
	    
	    ]]>
    </query>
    
    <query id="tbdp_equip_detl_motor_fp001" desc="모터 조회" fetchSize="10">
		<![CDATA[
			SELECT	  EQUIP_GBN								 EQUIP_GBN
	                 ,EQUIP_NO								 EQUIP_NO 
	                 ,RACE_CNT 								 RACE_CNT
	                 ,STATE									 STATE
	                 ,TO_CHAR(TO_DATE(ENT_DT),'YYYY-MM-DD')  ENT_DT
	                 ,RMK									 RMK
			FROM TBDP_EQUIP_DETL
			WHERE EQUIP_GBN  = '001'
			AND STATE 		!= '004'
			ORDER BY EQUIP_GBN, EQUIP_NO
	    ]]>
    </query>
    
    <query id="tbdp_equip_detl_boat_fp001" desc="보트 조회" fetchSize="10">
		<![CDATA[
		  SELECT  EQUIP_GBN								 EQUIP_GBN
                 ,EQUIP_NO								 EQUIP_NO 
                 ,RACE_CNT 								 RACE_CNT
                 ,STATE									 STATE
                 ,TO_CHAR(TO_DATE(ENT_DT),'YYYY-MM-DD')  ENT_DT
                 ,RMK									 RMK
			FROM TBDP_EQUIP_DETL
			WHERE EQUIP_GBN  = '002'
			AND STATE 		!= '004'
			ORDER BY EQUIP_GBN,EQUIP_NO
	    ]]>
    </query>
    
    
    <query id="tbdn_cand_race_detl_cand_fn001" desc="후보생 조회" fetchSize="10">
		<![CDATA[
		    SELECT   RACER_PERIO_NO
      				,CAND_NO
      				,NM_KOR
    		FROM TBDN_CAND_IDENT 
    		WHERE RACER_PERIO_NO      = ?
    		  AND NVL(DEL_YN(+),'N')   = 'N' 
	    ]]>
    </query>
    
    <query id="tbdn_cand_race_detl_fb001" desc="출주 조회" fetchSize="10">
		<![CDATA[
			select  ''CHK, RACE_SEQ, a.RACER_PERIO_NO, DT, ROUND, GBN, 
			        CCIT_CNT, BOAT_TIME, TEAM_NO, a.CAND_NO, b.NM_KOR,
			        MOTOR_NO, BOAT_NO, 
			        RACE_NO1, RACE_COURSE1, RACE_TIME1,
			        RACE_NO2, RACE_COURSE2, RACE_TIME2,
			        RACE_NO3, RACE_COURSE3, RACE_TIME3,
			        RACE_NO4, RACE_COURSE4, RACE_TIME4,
			        RACE_NO5, RACE_COURSE5, RACE_TIME5,
			        RACE_NO6, RACE_COURSE6, RACE_TIME6,
			        RACE_NO7, RACE_COURSE7, RACE_TIME7,
			        ARRIV_ORD, a.STRATEGY, VIOL, VIOL_CNTNT, RACE_CNTNT
			from TBDN_CAND_RACE_DETL a, TBDB_CAND_IDENT b
			where a.RACER_PERIO_NO = b.RACER_PERIO_NO 
			and a.CAND_NO = b.CAND_NO
			and a.RACER_PERIO_NO = ?
			and a.ROUND = ? 
	    ]]>
    </query>
    
    <query id="tbdn_cand_race_detl_un001" desc="출주 수정" fetchSize="10">
		<![CDATA[
			update  TBDN_CAND_RACE_DETL
			set
        		RACER_PERIO_NO=?, DT=?, ROUND=?, GBN=?,                       
                CCIT_CNT=?, BOAT_TIME=?, TEAM_NO=?, CAND_NO=?,               
                MOTOR_NO=?, BOAT_NO=?,                                       
                RACE_NO1=?, RACE_COURSE1=?, RACE_TIME1=?,                    
                RACE_NO2=?, RACE_COURSE2=?, RACE_TIME2=?,                    
                RACE_NO3=?, RACE_COURSE3=?, RACE_TIME3=?,                    
                RACE_NO4=?, RACE_COURSE4=?, RACE_TIME4=?,                    
                RACE_NO5=?, RACE_COURSE5=?, RACE_TIME5=?,                    
                RACE_NO6=?, RACE_COURSE6=?, RACE_TIME6=?,                    
                RACE_NO7=?, RACE_COURSE7=?, RACE_TIME7=?,                    
                ARRIV_ORD=?, STRATEGY=?, VIOL=?, VIOL_CNTNT=?, RACE_CNTNT=?,
                UPDT_ID=?, UPDT_DTM=sysdate
			where RACE_SEQ = ?
	    ]]>
    </query>
    
    <query id="tbdn_cand_race_detl_in001" desc="출주 입력" fetchSize="10">
		<![CDATA[
			insert into  TBDN_CAND_RACE_DETL (
				RACE_SEQ       ,                                                                                                                                                                          
				RACER_PERIO_NO ,                                                                                                                                                                          
				DT             ,                                                                                                                                                                          
				ROUND          ,                                                                                                                                                                          
				GBN            ,                                                                                                                                                                          
				CCIT_CNT       ,                                                                                                                                                                          
				BOAT_TIME      ,                                                                                                                                                                          
				TEAM_NO        ,                                                                                                                                                                          
				CAND_NO        ,                                                                                                                                                                          
				MOTOR_NO       ,                                                                                                                                                                          
				BOAT_NO        ,                                                                                                                                                                          
				RACE_NO1       ,                                                                                                                                                                          
				RACE_COURSE1   ,                                                                                                                                                                          
				RACE_TIME1     ,                                                                                                                                                                          
				RACE_TIME2     ,                                                                                                                                                                          
				RACE_NO2       ,                                                                                                                                                                          
				RACE_COURSE2   ,                                                                                                                                                                          
				RACE_NO3       ,                                                                                                                                                                          
				RACE_COURSE3   ,                                                                                                                                                                          
				RACE_TIME3     ,                                                                                                                                                                          
				RACE_NO4       ,                                                                                                                                                                          
				RACE_COURSE4   ,                                                                                                                                                                          
				RACE_TIME4     ,                                                                                                                                                                          
				RACE_NO5       ,                                                                                                                                                                          
				RACE_COURSE5   ,                                                                                                                                                                          
				RACE_TIME5     ,                                                                                                                                                                          
				RACE_NO6       ,                                                                                                                                                                          
				RACE_COURSE6   ,                                                                                                                                                                          
				RACE_TIME6     ,                                                                                                                                                                          
				RACE_NO7       ,                                                                                                                                                                          
				RACE_COURSE7   ,                                                                                                                                                                          
				RACE_TIME7     ,                                                                                                                                                                          
				ARRIV_ORD      ,                                                                                                                                                                          
				STRATEGY       ,                                                                                                                                                                          
				VIOL           ,                                                                                                                                                                          
				VIOL_CNTNT     ,                                                                                                                                                                          
				RACE_CNTNT     ,                                                                                                                                                                          
				INST_ID        ,                                                                                                                                                                          
				INST_DTM                                                                                                                                                                                 
			)               
			select 
				NVL(MAX(RACE_SEQ), 0) + 1 ,
				?,?,?,?,?,
				?,?,?,?,?,
				?,?,?,?,?,
				?,?,?,?,?,
				?,?,?,?,?,
				?,?,?,?,?,
				?,?,?,?,?,
				?,?,
				sysdate
			from TBDN_CAND_RACE_DETL
	    ]]>
    </query>
    
    <query id="tbdn_cand_race_detl_dn001" desc="출주 삭제" fetchSize="10">
		<![CDATA[
			delete TBDN_CAND_RACE_DETL
			where RACE_SEQ = ? 
	    ]]>
    </query>

</queryMap>