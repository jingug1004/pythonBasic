<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="출주표"> 
    <query id="tbdn_cand_race_fn601" desc="기수 조회" fetchSize="10">
		<![CDATA[
            SELECT
			         TCI .RACER_PERIO_NO     -- 기수      
			       , TCI .CAND_NO            -- 후보생번호
			       , TCI .NM_KOR             -- 후보생명
			       , SUM(TCR .BOAT_TIME)                          BOAT_TIME
                   , MIN(DECODE(TCR .GBN, '001', TCR .BOAT_TIME)) BOAT_TIME_1
                   , MIN(DECODE(TCR .GBN, '002', TCR .BOAT_TIME)) BOAT_TIME_2
                   , MIN(DECODE(TCR .GBN, '003', TCR .BOAT_TIME)) BOAT_TIME_3
                   , MIN(DECODE(TCR .GBN, '004', TCR .BOAT_TIME)) BOAT_TIME_4
                   , MIN(DECODE(TCR .GBN, '005', TCR .BOAT_TIME)) BOAT_TIME_5
                   , MIN(DECODE(TCR .GBN, '006', TCR .BOAT_TIME)) BOAT_TIME_6
            FROM     (

                        SELECT
                                 TCRO.CAND_NO
                               , TCR .GBN
                               , SUM(BOAT_TIME) BOAT_TIME
                        FROM     TBDN_CAND_RACE_ORGAN TCRO
                               , TBDN_CAND_RACE_RACE  TCR
            			WHERE  TCR .RACER_PERIO_NO   = TCRO.RACER_PERIO_NO       -- 기수      
            			AND    TCR .DAY_NO           = TCRO.DAY_NO               -- 출주번호  
            			AND    TCR .ROUND            = TCRO.ROUND                -- 라운드    
            			AND    TCRO.RACER_PERIO_NO   = ?                         -- 기수      
                        GROUP BY TCRO.CAND_NO                                    -- 훈련생번호
                               , TCR .GBN
                     ) TCR
                   , TBDN_CAND_IDENT TCI
            WHERE  TCI .CAND_NO          = TCR .CAND_NO(+)
			AND    TCI .RACER_PERIO_NO   = ?       -- 기수
            GROUP BY 
			         TCI .RACER_PERIO_NO     -- 기수      
			       , TCI .CAND_NO            -- 후보생번호
			       , TCI .NM_KOR             -- 후보생명
            ORDER BY TCI .CAND_NO
	    ]]>
    </query>
</queryMap>