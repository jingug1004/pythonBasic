<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="TBDM_PERSONAL_MN_AUTH_HIST(개인정보처리권한관리)">
     
      <query id="d05000009_s01" desc="메뉴조회" fetchSize="10">
        <![CDATA[
			SELECT C.SEQ_NO,              --연번
			       C.PERSONAL_MN_ID,      --메뉴
			       (SELECT TM.MN_NM FROM TBDM_MN TM WHERE TM.MN_ID = C.PERSONAL_MN_ID) AS PERSONAL_MN_NM,   --메뉴명
			       A.DEPT_CD,             --부서
			       A.DEPT_NM,             --부서명
			       C.USER_ID,             --사용자
			       (SELECT VU.USER_NM FROM VWEA_USER VU WHERE VU.USER_ID = C.USER_ID) AS USER_NM,           --사용자명
			       A.FLOC,                --직위
			       A.FGRADE,              --직위명
			       DECODE(C.PERSONAL_AUTH_CHK, 'Y', '부여', 'N', '말소') AS PERSONAL_AUTH_CHK,                --권한
			       C.PERSONAL_MN_IP,      --허용IP
			       TO_CHAR(TO_DATE(C.PERSONAL_AUTH_DT, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI') AS PERSONAL_AUTH_DT,    --권한부여일
			       C.PERSONAL_AUTH_ID,    --권한부여자
			       (SELECT VU.USER_NM FROM VWEA_USER VU WHERE VU.USER_ID = C.PERSONAL_AUTH_ID) AS PERSONAL_AUTH_NM  --권한부여자명
			  FROM VWEA_USER A, TBDM_MN B, TBDM_PERSONAL_MN_AUTH_HIST C
			 WHERE A.USER_ID = C.USER_ID
			   AND B.MN_ID = C.PERSONAL_MN_ID
			   AND B.UP_MN_ID LIKE '%' || NVL(?, B.UP_MN_ID) || '%'
			   AND A.TEAM_NM LIKE '%' || NVL(?, A.TEAM_NM) || '%'
			   AND A.USER_NM LIKE '%' || NVL(?, A.USER_NM) || '%'
			   AND C.PERSONAL_AUTH_CHK LIKE '%' || NVL(?, C.PERSONAL_AUTH_CHK) || '%'
			ORDER BY C.PERSONAL_AUTH_DT DESC, C.PERSONAL_MN_ID, A.DEPT_CD, A.FLOC   
        ]]>
    </query>
    
          
</queryMap>