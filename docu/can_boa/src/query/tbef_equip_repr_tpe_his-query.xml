<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbef_equip_repr_his 장비 정비 이력(정비유형 ) ">
	<query id="tbef_equip_repr_tpe_his_if001" desc="장비 정이력 (정비유형 등록) " fetchSize="50">
        <![CDATA[
            -- 장비 정비이력 정비 유형 등록 
			INSERT INTO TBEF_EQUIP_REPR_TPE_HIS (
			   STND_YEAR, 
			   REPR_SEQ, 
			   REPR_TPE_CD
			   ) 
			VALUES ( ?, DECODE(?, NULL, (SELECT NVL(MAX(TP.REPR_SEQ),0) REPR_SEQ 
               		   FROM TBEF_EQUIP_REPR_HIS TP
            		   	WHERE TP.STND_YEAR = ? ), ?), ?)
        ]]>
    </query> 
    <query id="tbef_equip_repr_tpe_his_df001" desc="장비 정이력 (정비유형 등록) 삭제  " fetchSize="50">
        <![CDATA[
			 -- 장비 정비이력 정비 유형 삭제  
			DELETE FROM TBEF_EQUIP_REPR_TPE_HIS
				WHERE STND_YEAR = ?
			    AND REPR_SEQ = DECODE(?, NULL, (SELECT NVL(MAX(TP.REPR_SEQ),0) REPR_SEQ 
               		   FROM TBEF_EQUIP_REPR_HIS TP
            		   	WHERE TP.STND_YEAR = ? ), ?)
        ]]>
    </query> 
   
    <query id="tbef_equip_repr_parts_df001" desc="장비부품내역 전체 삭제  " fetchSize="50">
        <![CDATA[
			 -- 장비부품내역 삭제 tbef_equip_parts_repr_df001 
			DELETE FROM TBEF_DELV
				WHERE STND_YEAR = ?
			      AND MBR_CD = ?
			      AND DELV_SEQ = ?
        ]]>
    </query> 
   
    <query id="tbef_equip_parts_repr_df002" desc="장비부품내역 부분삭제  " fetchSize="50">
        <![CDATA[
			 -- 장비부품내역 삭제 tbef_equip_parts_repr_df002  
			DELETE FROM TBEF_DELV_PARTS_REPR
				WHERE STND_YEAR = ?
			      AND MBR_CD = ?
			      AND DELV_SEQ = ?
			      AND PARTS_CD = ?
			      AND PARTS_YEAR = ?
        ]]>
    </query> 
   
</queryMap>