<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="출주표"> 
    <query id="tbdn_cand_race_equip_fn001" desc="기수별 출주장비 조회" fetchSize="10">
		<![CDATA[
			SELECT
			  RACER_PERIO_NO
			, CAND_NO
			, (SELECT NM_KOR FROM TBDN_CAND_IDENT WHERE CAND_NO = A.CAND_NO) NM_KOR
			, MOTOR_NO
			, BOAT_NO
			FROM  TBDN_CAND_RACE_EQUIP A
			WHERE RACER_PERIO_NO  = ?
			UNION ALL
			SELECT
			  RACER_PERIO_NO
			, CAND_NO
			, NM_KOR
			, '' MOTOR_NO
			, '' BOAT_NO
			FROM  TBDN_CAND_IDENT B
			WHERE RACER_PERIO_NO  = ?
			AND CAND_NO NOT IN (
				SELECT CAND_NO
				FROM  TBDN_CAND_RACE_EQUIP
				WHERE RACER_PERIO_NO  = ?
			)
	    ]]>
    </query>
   
    <query id="tbdn_cand_race_equip_ins001" desc="기수별 출주장비 입력" fetchSize="10">
		<![CDATA[
			INSERT INTO TBDN_CAND_RACE_EQUIP
			(
			         RACER_PERIO_NO  -- 기수
			       , CAND_NO         -- 후보생번호
			       , MOTOR_NO        -- 모터번호
			       , BOAT_NO         -- 보트번호
			       , INST_ID         -- 작성자ID  
			       , INST_DTM        -- 작성일자  
			       , UPDT_ID         -- 수정자ID  
			       , UPDT_DTM        -- 수정일자  
			) VALUES (
			         ?               -- 기수
			       , ?               -- 후보생번호
			       , ?               -- 모터번호
			       , ?               -- 보트
			       , ?               -- 작성자ID  
			       , SYSDATE         -- 작성일자  
			       , ?               -- 수정자ID  
			       , SYSDATE         -- 수정일자  
			)
	    ]]>
    </query>
    <query id="tbdn_cand_race_equip_ups001" desc="기수별 출주장비 수정" fetchSize="10">
		<![CDATA[
			UPDATE TBDN_CAND_RACE_EQUIP SET
			         MOTOR_NO       = ?       -- 모터번호
			       , BOAT_NO        = ?       -- 보트번호
			       , UPDT_ID        = ?       -- 수정자ID  
			       , UPDT_DTM       = SYSDATE -- 수정일자  
			WHERE  RACER_PERIO_NO   = ?       -- 기수
			AND    CAND_NO          = ?       -- 후보생번호
	    ]]>
    </query>
  </queryMap>