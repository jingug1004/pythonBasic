<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="(평가관리 신체검사)"> 
    <query id="tbdn_mesur_body_insp_fn001" desc="목록조회" fetchSize="10">
        <![CDATA[
			SELECT   
				 ? AS RACER_PERIO_NO
				,? AS ROUND
				,B.CAND_NO
				,B.NM_KOR
				,A.HGHT
				,A.WGHT
				,A.BLOD_PRES
				,A.ECG
				,A.RSLT
				,A.RMK
			FROM	TBDN_MESUR_BODY_INSP A, TBDN_CAND_IDENT B
            WHERE 1=1
            AND B.RACER_PERIO_NO  = A.RACER_PERIO_NO(+)
            AND B.CAND_NO         = A.CAND_NO(+)
            AND NVL(B.DEL_YN,'N') = 'N' 
            AND B.TH_STAT NOT IN ('004','005')  
            AND B.RACER_PERIO_NO  = ?
            AND A.ROUND(+) 		  = ?
            ORDER BY B.CAND_NO
		]]>
    </query>     

	<query id="tbdn_mesur_body_insp_fn002" desc="신체검사일 조회" fetchSize="10">    
     <![CDATA[
			SELECT   
				 RACER_PERIO_NO
				,ROUND
				,MAX(DT) AS DT
			FROM	TBDN_MESUR_BODY_INSP
            WHERE 1=1
            AND RACER_PERIO_NO  = ?
            AND ROUND    		= ?
            GROUP BY RACER_PERIO_NO, ROUND
		]]>
    </query>     
  
  	<query id="tbdn_mesur_body_insp_in001" desc="신체검사  등록" fetchSize="10">
        <![CDATA[
        	INSERT INTO TBDN_MESUR_BODY_INSP
        	(
        		 RACER_PERIO_NO
        		,ROUND
        		,CAND_NO
        		,HGHT
        		,WGHT
        		,BLOD_PRES
				,ECG
        		,RSLT				
        		,INST_ID
				,INST_DTM    
        	
        	)
        	VALUES
        	(	
        		 ?
        		,?
        		,?
        		,?
        		,?
        		,?
        		,?
        		,?
        		,?        		
        		,SYSDATE
        	)
		]]>
    </query>
    
    <query id="tbdn_mesur_body_insp_un001" desc="신체검사 수정" fetchSize="10">
        <![CDATA[
			UPDATE TBDN_MESUR_BODY_INSP
			SET 
				 HGHT      = ?
        		,WGHT      = ?
        		,BLOD_PRES = ?
				,ECG       = ?
        		,RSLT	   = ?		
				,UPDT_ID   = ?
				,UPDT_DTM  = SYSDATE
			WHERE	1=1
			AND RACER_PERIO_NO  = ?
			AND ROUND           = ?
			AND CAND_NO         = ?
		]]>
    </query>
    
    <query id="tbdn_mesur_body_insp_dn001" desc="신체검사 삭제" fetchSize="10">
        <![CDATA[
			DELETE FROM TBDN_MESUR_BODY_INSP
			WHERE  1=1
			AND RACER_PERIO_NO = NVL(?,RACER_PERIO_NO)
			AND ROUND          = NVL(?,ROUND        )
			
		]]>
    </query>
    
    <query id="tbdn_mesur_body_insp_un002" desc="신체검사일 수정" fetchSize="10">
        <![CDATA[
			UPDATE TBDN_MESUR_BODY_INSP 
			SET
      				DT					= ?
			WHERE	RACER_PERIO_NO		= ?
			AND		ROUND				= ?
		]]>
    </query>
</queryMap>