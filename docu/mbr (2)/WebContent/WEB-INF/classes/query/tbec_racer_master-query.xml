<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbec_racer_master(선수정보)">
    <query id="tbeb_racer_perio_no_reg_term_fc001" desc="기수정보 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					RACER_PERIO_NO 
			FROM 	TBEB_RACER_PERIO_NO
			GROUP BY RACER_PERIO_NO
			ORDER BY TO_NUMBER(RACER_PERIO_NO)
        ]]>
    </query>
    <query id="tbec_racer_master_fc001" desc="선수리스트정보 조회" fetchSize="10">
        <![CDATA[
            SELECT 
                    TRM.RACER_NO
                    ,TRM.NM_KOR
                    ,TRM.RACER_GRD_CD
                    ,TRD.NATV_PLAC_CD
                    ,TRD.HOME_PHONE_NO
                    ,TRD.CELPON_NO
                    ,TRD.POST_NO
                    ,TRD.ADD1_HOME||' '||ADD2_HOME ADD_HOME
                    ,GET_DEC(TRD.RES_NO) RES_NO
            FROM 	TBEC_RACER_MASTER TRM
					,TBEC_RACER_DETAIL TRD
            WHERE TRM.RACER_NO =  TRD.RACER_NO(+)
              AND TRM.RACER_GRD_CD = NVL(?, RACER_GRD_CD)
              AND TRM.RACER_STAT_CD = NVL(?, RACER_STAT_CD)
            ORDER BY TO_NUMBER(TRM.RACER_PERIO_NO),TRM.RACER_NO
        ]]>
    </query> 
    <query id="tbec_racer_detail_fc001" desc="선수상세정보 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					TRM.RACER_NO			-- 선수번호
					,TRM.RACER_GRD_CD		-- 선수등급코드
					,TRM.NM_KOR				-- 성명 - 한글
					,TRM.RACER_STAT_CD		-- 선수구분_코드
					,TRM.FAVOR_COURSE_CD	-- 선호코스_코드
					,TRM.EMAIL_ADDR			-- 이메일주소
					,TRM.RACER_PERIO_NO		-- 선수기수			
					,TRD.BIRTH_DT			-- 생년월일
					,TRD.LUNSOL_CD			-- 음양구분코드
					,TRD.MRRG_CD			-- 결혼코드
                    ,TRD.WEDDING_DT			-- 결혼기념일
					,GET_DEC(TRD.RES_NO) RES_NO	-- 주민등록번호
					,TRD.CELPON_NO			-- 휴대폰 번호
					,TRD.HOMEPAGE_ADDR		-- 홈페이지 주소
					,TRD.HOME_PHONE_NO		-- 집전화번호
					,TRD.CAR_NO				-- 차량번호
					,TRD.NM_CHN				-- 성명 - 한자
					,TRD.NM_ENG				-- 성명 - 영문
					,TRD.NATV_PLAC_CD		-- 출신지코드
					,TRD.NATY_SCHL			-- 출신고
					,TRD.NATY_UNIV			-- 출신대학교
					,TRD.NATY_GRAD			-- 출신대학원
					,TRD.POST_NO			-- 우편번호
					,TRD.ADD1_HOME			-- 주소 1
					,TRD.ADD2_HOME			-- 주소 2
					,TRD.BORN_ADDR			-- 본적지
					,TRD.PTO_NM				-- 논리 사진파일명
					,TRD.PTO_PATH			-- 물리 사진파일명
                    ,''  PTO_UPDATE			-- 사진 수정여부
					,TRD.CNL_RSN			-- 취소사유
					,TRD.CNL_DT				-- 취소일자
					,TRD.SIGHT_LEFT			-- 시력 - 좌
					,TRD.SIGHT_RIGT			-- 시력 - 우
					,TRD.BLOD_TPE			-- 혈액형
					,TRD.DRINK				-- 주량
					,TRD.SMOKING			-- 흡연량
					,TRD.RELGN_CD			-- 종교코드
					,TRD.HOBY				-- 취미
					,TRD.SPA_ABTY			-- 특기
					,TRD.HGHT				-- 신장
					,TRD.WGHT				-- 체중
					,TRD.SHOE_SIZE			-- 신발
					,TRD.SHOULDER_SIZE		-- 어깨
					,TRD.ARM_SIZE			-- 팔
					,TRD.BACK_SIZE			-- 등길이
					,TRD.UP_BODY_SIZE		-- 총장
					,TRD.BREAST_SIZE		-- 가슴
					,TRD.WGHT_SIZE			-- 허리
					,TRD.ABDOMEN_SIZE		-- 하동
					,TRD.INNER_SUIT_SIZE	-- 안기장
					,TRD.SUIT_SIZE			-- 기장
					,THIGH_SIZE			    -- 허벅지
					,TRD.ARMY_TPE_CD		-- 군별코드
					,TRD.ARMY_CLAS_CD		-- 역종코드
					,TRD.SPEC_INFO			-- 특이사항
                    ,TRCI.BK_CD             -- 거래은행코드
                    ,GET_DEC(TRCI.BK_ACCUNT) BK_ACCUNT  -- 계좌번호
                    ,TRD.NATY_RACER_YN		-- 선수출신여부
                    ,TRD.NATY_RACER_ITEM	-- 선수출신종목
			FROM 	TBEC_RACER_MASTER TRM
					,TBEC_RACER_DETAIL TRD
                    ,TBEG_RACER_COM_INFO TRCI
			WHERE TRM.RACER_NO =  TRD.RACER_NO(+)
            AND TRM.RACER_NO =  TRCI.RACER_NO(+)
			AND TRM.RACER_NO = ?
        ]]>
    </query>
    <query id="tbec_racer_family_fc001" desc="선수가족사항 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					SEQ				-- 일련번호
					,RELN_CD			-- 관계코드
					,NM					-- 성명
					,BIRTH_DT			-- 생년월일
					,SCHL_TPE_CD		-- 최종학력코드
					,RMK				-- 비고
					,JOB_INFO			-- 직장정보
			FROM TBEC_RACER_FAMILY
			WHERE RACER_NO = ?
        ]]>
    </query>      
    <query id="tbec_racer_academic_fc001" desc="선수학력사항 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					SEQ				-- 일련번호
					,SCHL_TPE_CD		-- 학력코드
					,SCHL_NM			-- 학교명
					,GRDU_CD			-- 졸업코드
					,MTRIC_YY			-- 입학년도
					,GRDU_YY			-- 졸업년도
					,MJR				-- 전공학과
					,RMK				-- 비고
			FROM TBEC_RACER_ACADEMIC
			WHERE RACER_NO = ?
        ]]>
    </query>          
    <query id="tbec_racer_relation_fc001" desc="선수관계정보 조회" fetchSize="10">
        <![CDATA[
            SELECT 
					SEQ					    			-- 일련번호
					,TRR.RELA_RACER_CD					-- 선수관계코드
					,TRR.RELA_RACER_NO					-- 관계선수번호
                    ,TRM.NM_KOR AS RELA_RACER_NM      	-- 관계선수성명
					,TRR.RELA_GRD_CD					-- 관계등급코드
			FROM     TBEC_RACER_RELATION TRR
                    ,TBEC_RACER_MASTER TRM
			WHERE TRR.RACER_NO = ?
            AND TRR.RELA_RACER_NO = TRM.RACER_NO
        ]]>
    </query>    
    <query id="tbec_racer_relation_fc003" desc="선수관계정보 조회" fetchSize="10">
        <![CDATA[
            SELECT 
					TRR.RACER_NO					-- 선수번호
                  , TRM1.NM_KOR AS RACER_NM      	-- 선수성명
				  , SEQ					    		-- 일련번호
				  , TSC1.CD_NM  AS RELA_NM			-- 선수관계코드
				  , TRR.RELA_RACER_NO				-- 관계선수번호
                  , TRM2.NM_KOR AS RELA_RACER_NM    -- 관계선수성명
				  , TSC2.CD_NM  AS RELA_GRD_NM		-- 관계등급코드
			FROM    TBEC_RACER_RELATION TRR
                  , TBEC_RACER_MASTER TRM1
				  , TBEC_RACER_MASTER TRM2
				  , TBEA_SPEC_CD TSC1
				  , TBEA_SPEC_CD TSC2
			WHERE   TRR.RACER_NO = NVL(?, TRR.RACER_NO)
            AND     TRR.RACER_NO = TRM1.RACER_NO
            AND     TRR.RELA_RACER_NO = TRM2.RACER_NO
            AND     TRR.RELA_RACER_CD = TSC1.CD(+)
			AND     TSC1.GRP_CD(+) = 'E00019'
            AND     TRR.RELA_GRD_CD = TSC2.CD(+)
			AND     TSC2.GRP_CD(+) = 'E00084'
			ORDER BY TRR.RACER_NO, SEQ
        ]]>
    </query>    
    <query id="tbeb_organ_fc001" desc="선수입/포상사항 조회" fetchSize="10">
        <![CDATA[
            SELECT 
                              STND_YEAR    -- 기준년도
                            , TMS          -- 회차
                            , DAY_ORD      -- 일차
                            , RACE_DAY     -- 경주일자
                            , RACE_NO      -- 경주번호
                            , RACE_REG_NO  -- 정번번호
                            , RACER_NO     -- 선수번호
                            , RACE_DGRE_CD -- 경주등급코드
                            , RANK         -- 순위
                            , RMK          -- 상명칭
                            , GBN          -- 입/포상 구분            
            FROM
                (
                    SELECT /*입상*/
                              TRT .STND_YEAR    -- 기준년도
                            , TRT .TMS          -- 회차
                            , TRDO.DAY_ORD      -- 일차
                            , TRDO.RACE_DAY     -- 경주일자
                            , TR  .RACE_NO      -- 경주번호
                            , TOR .RACE_REG_NO  -- 정번번호
                            , TOR .RACER_NO     -- 선수번호
                            , TR  .RACE_DGRE_CD -- 경주등급코드
                            , TOR .RANK         -- 순위
                            , TRT .TMS_NM  RMK  -- 회차명
                            --, SUBSTR(TRT .RMK,INSTR(TRT.RMK,',')+1, LENGTH(TRT .RMK))  RMK          -- 비고
                            , '002' AS GBN        -- 입/포상 구분
                    FROM     TBEB_RACE_TMS     TRT
                           , TBEB_RACE_DAY_ORD TRDO
                           , TBEB_RACE         TR
                           , TBEB_ORGAN        TOR
                           , TBEB_CFRNT_METH   TCM
                    WHERE  TRT .STND_YEAR       = TRDO.STND_YEAR
                    AND    TRT .TMS             = TRDO.TMS
                    AND    TRDO.STND_YEAR       = TR  .STND_YEAR
                    AND    TRDO.TMS             = TR  .TMS
                    AND    TRDO.DAY_ORD         = TR  .DAY_ORD
                    AND    TR  .STND_YEAR       = TOR .STND_YEAR
                    AND    TR  .TMS             = TOR .TMS
                    AND    TR  .DAY_ORD         = TOR .DAY_ORD
                    AND    TR  .RACE_NO         = TOR .RACE_NO
                    AND    TRT .TMS       BETWEEN NVL(?,TRT .TMS)
                                              AND NVL(?,TRT .TMS)
                    AND    TOR .RANK      BETWEEN 1
                                              AND 3
                    AND    TOR  .RACER_NO       = ? 
                    AND    TCM.RACE_KINDS_CD 	!= '001' 
                    AND    TRT.CFRNT_CD        	= TCM.CFRNT_CD                         
                    AND    TR.RACE_DGRE_CD      LIKE '9%'        
                    UNION
                    SELECT  /*포상*/
                              SUBSTR(AWARD_DT,0,4) AS STND_YEAR       	-- 기준년도
                            , 0 AS TMS              					-- 회차
                            , 0 AS DAY_ORD          					-- 일차
                            , AWARD_DT AS RACE_DAY  					-- 경주일자
                            , '' AS RACE_NO         					-- 경주번호
                            , '' AS RACE_REG_NO     					-- 정번번호
                            , RACER_NO AS RACER_NO        				-- 선수번호
                            , '' AS RACE_DGRE_CD    					-- 경주등급코드
                            , AWARD_AMT AS RANK     					-- 상금액
                            , AWARD_DESC AS RMK      					-- 상명칭
                            , '001' AS GBN            					-- 입/포상 구분
                    FROM TBEG_RACER_AWARD_HIS TRAH
                    WHERE TRAH.RACER_NO = ? 
                    ORDER BY RACE_DAY DESC
                           , TMS       DESC
                           , DAY_ORD   ASC
                           , RACE_NO   ASC
                           , RANK      ASC
                           , RMK DESC
                )
           WHERE GBN = NVL(?, GBN    ) 
           ORDER BY RACE_DAY DESC
        ]]>
    </query>     
    <query id="tbec_racer_injury_fc001" desc="선수부상사항 조회" fetchSize="10">
        <![CDATA[
			SELECT 
					SEQ					-- 일련번호
					,IJRY_DT			-- 부상일자
					,IJRY_PART			-- 부상부위
					,IJRY_STAT			-- 부상상태
					,DIAGNS_WK			-- 진단주
					,EHOSP_DT			-- 입원일
					,RESIGN_DT			-- 퇴원일
					,RESIGN_DT - EHOSP_DT AS HOSP_DAY	-- 입원일수
					,RMK				-- 비고
					,HOMEPAGE_NOTI_SDT||'~'||HOMEPAGE_NOTI_EDT	HOMEPAGE_NOTI_DT -- 홈페이지 공시일
			FROM TBEC_RACER_INJURY
			WHERE RACER_NO = ?
        ]]>
    </query> 
    <query id="tbee_racer_sanc_fc001" desc="선수제재사항 조회" fetchSize="10">
        <![CDATA[
			SELECT	A.RACER_NO, 		--선수등록번호
					A.SEQ, 				--일련번호
					A.STND_YEAR, 		--기준년도
					A.SANC_ISSUE_NO,	--발급번호 
					A.SANC_BASIS_CD,	--양정코드
					A.SANC_TERM, 		--제재처분기간
					A.SANC_RSN_CD,		--사유코드
					(SELECT CD_NM FROM TBEA_SPEC_CD WHERE GRP_CD ='E00071' AND CD = A.SANC_RSN_CD) SANC_RSN_CD_NM, --사유코드명
					A.SANC_RSN, 		--사유내역
					A.SANC_ACT_DT, 		--처분일자
					A.INST_ID,			--입력자
					B.RACER_GRD_CD,		--등급
					B.NM_KOR,			--선수성명
					C.SMRY,				--관련근거
					A.UNIT, 			--단위
					D.CD_NM	AS UNIT_NM	--단위이름
			FROM    TBEE_RACER_SANC A, TBEC_RACER_MASTER B, TBEE_SANC_BASIS C, TBEA_SPEC_CD D
			WHERE	A.RACER_NO = B.RACER_NO
			  AND 	A.SANC_BASIS_CD = C.SANC_BASIS_CD
			  AND 	A.UNIT = D.CD(+)
			  AND 	'E00116' = D.GRP_CD(+)
			  AND	A.RACER_NO  = ?
			ORDER BY A.SANC_ISSUE_NO DESC
        ]]>
    </query>     
    <query id="tbee_racer_fair_fc001" desc="선수공정사항 조회" fetchSize="10">
        <![CDATA[
			SELECT 
                    TRF.RACER_NO
                    ,TRF.SPEC_INFO			-- 공정_특이사항
                    ,TRF.FORTUNE			-- 공정_재산사항
                    ,''  HELMET_UPDATE1		-- 공정_헬멧1 수정여부
                    ,TRF.HELMET_PATH1		-- 공정_헬멧1
                    ,''  HELMET_UPDATE2		-- 공정_헬멧2 수정여부
                    ,TRF.HELMET_PATH2		-- 공정_헬멧2
                    ,''  HELMET_UPDATE3		-- 공정_헬멧3 수정여부
                    ,TRF.HELMET_PATH3		-- 공정_헬멧3
                    ,''  HELMET_UPDATE4		-- 공정_헬멧4 수정여부
                    ,TRF.HELMET_PATH4		-- 공정_헬멧4
                    ,''  HELMET_UPDATE5		-- 공정_헬멧5 수정여부
                    ,TRF.HELMET_PATH5		-- 공정_헬멧5
                    ,TRF.CLUB
                    ,TRF.TWO_JOB
                    ,TRF.INSURANCE
			FROM 	TBEE_RACER_FAIR TRF
			WHERE   TRF.RACER_NO = ?
        ]]>
    </query>
    
    <query id="tbec_racer_master_ic001" desc="선수기준정보  저장" fetchSize="10">
        <![CDATA[
            /* 선수기준정보 입력 */
            MERGE INTO TBEC_RACER_MASTER TRM
            USING   DUAL
            ON        (    TRM.RACER_NO    = ?    --등록번호
                    )
            WHEN MATCHED THEN
                    UPDATE  SET
                        NM_KOR              	= ?        	-- 성명-한글 
                        ,RACER_GRD_CD        	= ?        	-- 선수등급
                        ,RACER_STAT_CD       	= ?			-- 비고
    			       	,FAVOR_COURSE_CD	    = ?			-- 선호코스
    			       	,RACER_PERIO_NO      	= ?			-- 선수기수
    			       	,EMAIL_ADDR		    	= ?			-- 이메일주소
    			       	,UPDT_ID    		    = ?			-- 수정자 ID
    			       	,UPDT_DTM   		    = SYSDATE	-- 수정일시    
            WHEN NOT MATCHED THEN
                    INSERT (
        				RACER_NO			-- 선수번호
        				,RACER_GRD_CD		-- 선수등급코드
        				,NM_KOR				-- 성명-한글
        				,RACER_STAT_CD		-- 선수구분코드
        				,FAVOR_COURSE_CD	-- 선호코스코드
        				,EMAIL_ADDR			-- 이메일주소
        				,RACER_PERIO_NO		-- 선수기수코드
        			   	,INST_ID 			-- 작성자 아이디
        			   	,INST_DTM 			-- 작성일시
        			   	,UPDT_ID 			-- 수정자 아이디
        			   	,UPDT_DTM) 			-- 수정일시
        			VALUES ( 
        				?,	-- 선수번호
        				?,	-- 선수등급코드
        				?,	-- 성명-한글
        				?,	-- 선수구분코드
        				?,	-- 선호코스코드
        				?,	-- 이메일주소
        				?,	-- 선수기수코드
        			   	?, 	-- 작성자 아이디
        			   	SYSDATE,
        			   	?, 	-- 수정자 아이디
        			   	SYSDATE
                    )
        ]]>
    </query> 
    <query id="tbec_racer_detail_ic001" desc="선수상세정보  저장" fetchSize="10">
        <![CDATA[
            /* 선수상세정보 입력 */
            MERGE INTO TBEC_RACER_DETAIL TRD
            USING   DUAL
            ON        (    TRD.RACER_NO    = ?			--등록번호
                    )
            WHEN MATCHED THEN
	                UPDATE  SET
	                    BIRTH_DT            = ?			-- 생년월일
	                    ,LUNSOL_CD          = ?			-- 음양구분
	                    ,MRRG_CD            = ?			-- 결혼코드
	                    ,WEDDING_DT         = ?			-- 결혼기념일
	                    ,RES_NO             = PUT_ENC(?)-- 주민등록번호
	                    ,CELPON_NO          = ?			-- 휴대폰 번호
	                    ,HOMEPAGE_ADDR      = ?			-- 홈페이지 주소
	                    ,HOME_PHONE_NO      = ?			-- 집전화번호
	                    ,CAR_NO             = ?			-- 차량번호
	                    ,NM_CHN             = ?			-- 성명 - 한자
	                    ,NM_ENG             = ?			-- 성명 - 영문
	                    ,NATV_PLAC_CD       = ?			-- 출신지코드
	                    ,NATY_SCHL          = ?			-- 출신고
	                    ,NATY_UNIV          = ?			-- 출신대학교
	                    ,NATY_GRAD          = ?			-- 출신대학원
	                    ,POST_NO            = ?			-- 우편번호
	                    ,ADD1_HOME          = ?			-- 주소 1
	                    ,ADD2_HOME          = ?			-- 주소 2
	                    ,BORN_ADDR          = ?			-- 본적지
	                    ,PTO_NM             = ?			-- 논리 사진파일명
	                    ,PTO_PATH           = ?			-- 물리 사진파일명
	                    ,CNL_RSN            = ?			-- 취소사유
	                    ,CNL_DT            	= ?			-- 취소일
	                    ,SIGHT_LEFT         = ?			-- 시력 - 좌
	                    ,SIGHT_RIGT         = ?			-- 시력 - 우
	                    ,BLOD_TPE           = ?			-- 혈액형
	                    ,DRINK              = ?			-- 주량
	                    ,SMOKING            = ?			-- 흡연량
	                    ,RELGN_CD           = ?			-- 종교코드
	                    ,HOBY               = ?			-- 취미
	                    ,SPA_ABTY           = ?			-- 특기
	                    ,HGHT               = ?			-- 신장
	                    ,WGHT               = ?			-- 체중
	                    ,SHOE_SIZE          = ?			-- 신발
	                    ,SHOULDER_SIZE      = ?			-- 어깨
	                    ,ARM_SIZE           = ?			-- 팔
	                    ,BACK_SIZE          = ?			-- 등길이
	                    ,UP_BODY_SIZE       = ?			-- 총장
	                    ,BREAST_SIZE        = ?			-- 가슴
	                    ,WGHT_SIZE          = ?			-- 허리
	                    ,ABDOMEN_SIZE       = ?			-- 하동
	                    ,INNER_SUIT_SIZE    = ?			-- 안기장
	                    ,SUIT_SIZE          = ?			-- 기장
						,THIGH_SIZE 		= ?			-- 허벅지
						,ARMY_TPE_CD 	    = ?			-- 군별코드
						,ARMY_CLAS_CD 	    = ?			-- 역종코드
						,SPEC_INFO 		    = ?			-- 특이사항
				       	,NATY_RACER_YN	    = ?			-- 선수출신여부
				       	,NATY_RACER_ITEM    = ?			-- 선수출신종목
				       	,UPDT_ID    		= ?			-- 수정자 ID
				       	,UPDT_DTM   		= SYSDATE	-- 수정일시    
            WHEN NOT MATCHED THEN
	                INSERT (
	                    RACER_NO            -- 선수번호
	                    ,BIRTH_DT           -- 생년월일
	                    ,MRRG_CD            -- 결혼코드
	                    ,WEDDING_DT         -- 결혼기념일
	                    ,RES_NO             -- 주민등록번호
	                    ,CELPON_NO          -- 휴대폰 번호
	                    ,HOMEPAGE_ADDR      -- 홈페이지 주소
	                    ,HOME_PHONE_NO      -- 집전화번호
	                    ,CAR_NO             -- 차량번호
	                    ,NM_CHN             -- 성명 - 한자
	                    ,NM_ENG             -- 성명 - 영문
	                    ,NATV_PLAC_CD       -- 출신지코드
	                    ,NATY_SCHL          -- 출신고
	                    ,NATY_UNIV          -- 출신대학교
	                    ,NATY_GRAD          -- 출신대학원
	                    ,POST_NO            -- 우편번호
	                    ,ADD1_HOME          -- 주소 1
	                    ,ADD2_HOME          -- 주소 2
	                    ,BORN_ADDR          -- 본적지
	                    ,PTO_NM             -- 논리 사진파일명
	                    ,PTO_PATH           -- 물리 사진파일명
	                	,CNL_RSN			-- 취소사유	                	
	                    ,CNL_DT            	-- 취소일
	    				,SIGHT_LEFT			-- 시력 - 좌
	    				,SIGHT_RIGT			-- 시력 - 우
	    				,BLOD_TPE			-- 혈액형
	    				,DRINK				-- 주량
	    				,SMOKING			-- 흡연량
	    				,RELGN_CD			-- 종교코드
	    				,HOBY				-- 취미
	    				,SPA_ABTY			-- 특기
	    				,HGHT				-- 신장
	    				,WGHT				-- 체중
	    				,SHOE_SIZE			-- 신발
	    				,SHOULDER_SIZE		-- 어깨
	    				,ARM_SIZE			-- 팔
	    				,BACK_SIZE			-- 등길이
	    				,UP_BODY_SIZE		-- 총장
	    				,BREAST_SIZE		-- 가슴
	    				,WGHT_SIZE			-- 허리
	    				,ABDOMEN_SIZE		-- 하동
	    				,INNER_SUIT_SIZE	-- 안기장
	    				,SUIT_SIZE			-- 기장
	    				,THIGH_SIZE			-- 허벅지
	    				,ARMY_TPE_CD		-- 군별코드
	    				,ARMY_CLAS_CD		-- 역종코드
	    				,SPEC_INFO			-- 특이사항
	    				,NATY_RACER_YN	    -- 선수출신여부
				       	,NATY_RACER_ITEM    -- 선수출신종목
	    				,INST_ID			-- 작성자ID
	    				,INST_DTM			-- 작성일시
	    			   	,UPDT_ID 			-- 수정자 아이디
	    			   	,UPDT_DTM) 			-- 수정일시
			    	VALUES ( 
	    				?,		-- 선수번호
	    				?,		-- 생년월일
	    				?,		-- 결혼코드
	    				?,		-- 결혼기념일
	    				PUT_ENC(?),	-- 주민등록번호
	    				?,		-- 휴대폰 번호
	    				?,		-- 홈페이지 주소
	    				?,		-- 집전화번호
	    				?,		-- 차량번호
	    				?,		-- 성명 - 한자
	    				?,		-- 성명 - 영문
	    				?,		-- 출신지코드
	    				?,		-- 출신고
	    				?,		-- 출신대학교
	    				?,		-- 출신대학원
	    				?,		-- 우편번호
	    				?,		-- 주소 1
	    				?,		-- 주소 2
	    				?,		-- 본적지
	    				?,		-- 논리 사진파일명
	    				?,		-- 물리 사진파일명
	    				?,		-- 취소사유	    				
	                    ?,      -- 취소일
	    				?,		-- 시력 - 좌
	    				?,		-- 시력 - 우
	    				?,		-- 혈액형
	    				?,		-- 주량
	    				?,		-- 흡연량
	    				?,		-- 종교코드
	    				?,		-- 취미
	    				?,		-- 특기
	    				?,		-- 신장
	    				?,		-- 체중
	    				?,		-- 신발
	    				?,		-- 어깨
	    				?,		-- 팔
	    				?,		-- 등길이
	    				?,		-- 총장
	    				?,		-- 가슴
	    				?,		-- 허리
	    				?,		-- 하동
	    				?,		-- 안기장
	    				?,		-- 기장
	    				?,		-- 허벅지
	    				?,		-- 군별코드
	    				?,		-- 역종코드
	    				?,		-- 특이사항
	    				?,		-- 선수출신여부
				       	?,		-- 선수출신종목
	    			   	?, 	    -- 작성자 아이디
	    			   	SYSDATE,
	    			   	?, 	    -- 수정자 아이디
	    			   	SYSDATE)
        ]]>
    </query>     
    <query id="tbee_racer_detail_fair_ie001" desc="선수상세_공정정보  수정" fetchSize="10">
        <![CDATA[
            /* 선수상세공정정보 수정 */
            MERGE INTO TBEE_RACER_FAIR TRF
            USING   DUAL
            ON        (    TRF.RACER_NO = ?			-- 선수번호
                    )
            WHEN MATCHED THEN
	                UPDATE  SET
						SPEC_INFO		= ?			-- 공정특이사항
						, FORTUNE		= ?			-- 공정재산사항
						, HELMET_PATH1	= ?			-- 공정헬멧사진1
						, HELMET_PATH2	= ?			-- 공정헬멧사진2
						, HELMET_PATH3	= ?			-- 공정헬멧사진3
						, HELMET_PATH4	= ?			-- 공정헬멧사진4
						, HELMET_PATH5	= ?			-- 공정헬멧사진5
						, CLUB          = ?			-- 동호회
						, TWO_JOB       = ?         -- 복수직업
						, INSURANCE     = ?         -- 개인보험
						, UPDT_ID		= ?			-- 수정자 ID
						, UPDT_DTM		= SYSDATE	-- 수정일시  
            WHEN NOT MATCHED THEN
	                INSERT (
	    				RACER_NO			-- 선수번호
	    				,SPEC_INFO			-- 공정특이사항
	    				,FORTUNE			-- 공정재산사항
	    				,HELMET_PATH1		--  공정헬멧사진1
	    				,HELMET_PATH2		--  공정헬멧사진2
	    				,HELMET_PATH3		--  공정헬멧사진3
	    				,HELMET_PATH4		--  공정헬멧사진4
	    				,HELMET_PATH5		--  공정헬멧사진5
	    				,CLUB				-- 동호회
	    				,TWO_JOB			-- 복수직업
	    				,INSURANCE			-- 개인보험
	    			   	,UPDT_ID 			-- 수정자 아이디
	    			   	,UPDT_DTM) 			-- 수정일시
	    			VALUES ( 
	    				?,		-- 선수번호
	    				?,		-- 공정특이사항
	    				?,		-- 공정재산사항
	    				?,		-- 공정헬멧사진1
	    				?,		-- 공정헬멧사진2
	    				?,		-- 공정헬멧사진3
	    				?,		-- 공정헬멧사진4
	    				?,		-- 공정헬멧사진5
	    				?,	    -- 동호회
	    				?,      -- 복수직업
	    				?,      -- 개인보험
	    			   	?, 		-- 수정자 아이디
	    			   	SYSDATE)
        ]]>
    </query>
    <query id="tbec_racer_family_ic001" desc="선수가족사항  저장" fetchSize="10">
        <![CDATA[
            /* 선수가족사항 입력 */
            MERGE INTO TBEC_RACER_FAMILY TRF
            USING   DUAL
            ON        (    TRF.RACER_NO		= ?		-- 선수번호
			                AND TRF.SEQ		= ?		-- 일련번호            
                    )
            WHEN MATCHED THEN
	                UPDATE  SET
						RELN_CD			    = ?		    -- 관계코드
						,NM				    = ?		    -- 성명
						,BIRTH_DT		    = ?		    -- 생년월일
						,SCHL_TPE_CD		= ?		    -- 최종학력코드
						,RMK				= ?		    -- 비고
						,JOB_INFO		    = ?		    -- 직장정보
				       	,UPDT_ID    		= ?		    -- 수정자 ID
				       	,UPDT_DTM   		= SYSDATE	-- 수정일시    
            WHEN NOT MATCHED THEN
	                INSERT (
	    				RACER_NO			-- 선수번호
	    				,SEQ				-- 일련번호
	    				,RELN_CD			-- 관계코드
	    				,NM					-- 성명
	    				,BIRTH_DT			-- 생년월일
	    				,SCHL_TPE_CD		-- 최종학력코드
	    				,RMK				-- 비고
	    				,JOB_INFO			-- 직장정보
	    				,INST_ID			-- 작성자ID
	    				,INST_DTM			-- 작성일시
	    			   	,UPDT_ID 			-- 수정자 아이디
	    			   	,UPDT_DTM) 			-- 수정일시
	    			VALUES ( 
	    				?,		-- 선수번호
	    				?,		-- 일련번호
	    				?,		-- 관계코드
	    				?,		-- 성명
	    				?,		-- 생년월일
	    				?,		-- 최종학력코드
	    				?,		-- 비고
	    				?,		-- 직장정보
	    			   	?, 	-- 작성자 아이디
	    			   	SYSDATE,
	    			   	?, 	-- 수정자 아이디
	    			   	SYSDATE)
        ]]>
    </query> 
    <query id="tbec_racer_academic_ic001" desc="선수학력사항  저장" fetchSize="10">
        <![CDATA[
            /* 선수학력사항 입력 */
            MERGE INTO TBEC_RACER_ACADEMIC TRA
            USING   DUAL
            ON        (    TRA.RACER_NO  		= ?		-- 선수번호
			                AND TRA.SEQ	        = ?		-- 일련번호            
                    )
            WHEN MATCHED THEN
                	UPDATE  SET
	                    SCHL_TPE_CD         = ?         -- 학력코드
	                    ,SCHL_NM            = ?         -- 학교명
	                    ,GRDU_CD			= ?		    -- 졸업코드
						,MTRIC_YY		    = ?		    -- 입학년도
						,GRDU_YY			= ?		    -- 졸업년도
						,MJR				= ?		    -- 전공학과
						,RMK				= ?		    -- 비고
				       	,UPDT_ID    		= ?		    -- 수정자 ID
				       	,UPDT_DTM   		= SYSDATE	-- 수정일시 
            WHEN NOT MATCHED THEN
                	INSERT (
	    				RACER_NO			-- 선수번호
	    				,SEQ				-- 일련번호
	    				,SCHL_TPE_CD		-- 학력코드
	    				,SCHL_NM			-- 학교명
	    				,GRDU_CD			-- 졸업코드
	    				,MTRIC_YY			-- 입학년도
	    				,GRDU_YY			-- 졸업년도
	    				,MJR				-- 전공학과
	    				,RMK				-- 비고
	    				,INST_ID			-- 작성자ID
	    				,INST_DTM			-- 작성일시
	    			   	,UPDT_ID 			-- 수정자 아이디
	    			   	,UPDT_DTM) 			-- 수정일시
	    			VALUES ( 
	    				?,		-- 선수번호
	    				?,		-- 일련번호
	    				?,		-- 학력코드
	    				?,		-- 학교명
	    				?,		-- 졸업코드
	    				?,		-- 입학년도
	    				?,		-- 졸업년도
	    				?,		-- 전공학과
	    				?,		-- 비고
	    			   	?, 	-- 작성자 아이디
	    			   	SYSDATE,
	    			   	?, 	-- 수정자 아이디
	    			   	SYSDATE)
        ]]>
    </query> 
    <query id="tbec_racer_relation_ic001" desc="선수관계정보  저장" fetchSize="10">
        <![CDATA[
            /* 선수관계정보 입력 */
            MERGE INTO TBEC_RACER_RELATION TRR
            USING   DUAL
            ON        (    TRR.RACER_NO  		= ?		-- 선수번호
			                AND TRR.SEQ	        = ?		-- 일련번호            
                    )
            WHEN MATCHED THEN
	                UPDATE  SET
				    	RELA_RACER_CD	    = ?		-- 선수관계코드
						,RELA_RACER_NO	    = ?		-- 관계선수번호
						,RELA_GRD_CD		= ?		-- 관계등급코드
				       	,UPDT_ID    		= ?		-- 수정자 ID
				       	,UPDT_DTM   		= SYSDATE	-- 수정일시 
            WHEN NOT MATCHED THEN
	                INSERT (
	    				RACER_NO			-- 선수번호
	    				,SEQ				-- 일련번호
	    				,RELA_RACER_CD		-- 선수관계코드
	    				,RELA_RACER_NO		-- 관계선수번호
	    				,RELA_GRD_CD		-- 관계등급코드
	    				,INST_ID			-- 작성자ID
	    				,INST_DTM			-- 작성일시
	    			   	,UPDT_ID 			-- 수정자 아이디
	    			   	,UPDT_DTM) 			-- 수정일시
	    			VALUES ( 
	    				?,		-- 선수번호
	    				?,		-- 일련번호
	    				?,		-- 선수관계코드
	    				?,		-- 관계선수번호
	    				?,		-- 관계등급코드
	    			   	?, 	-- 작성자 아이디
	    			   	SYSDATE,
	    			   	?, 	-- 수정자 아이디
	    			   	SYSDATE) 
        ]]>
    </query>

    <query id="tbec_racer_detail_uc002" desc="선수상세정보 몸무게  수정" fetchSize="10">
        <![CDATA[
            /* 선수상세정보 몸무게 수정 */
			UPDATE  TBEC_RACER_DETAIL 
			SET    	
					WGHT 			= ?,		-- 체중
			       	UPDT_ID    		= ?,		-- 수정자 ID
			       	UPDT_DTM   		= SYSDATE	-- 수정일시 
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query>     

    <query id="tbec_racer_master_dc001" desc="선수기준정보 삭제" fetchSize="10">
        <![CDATA[
            /* 선수기준정보 삭제 */
			DELETE 
			FROM TBEC_RACER_MASTER
			 WHERE 	RACER_NO  		= ?		-- 선수번호 
        ]]>
    </query> 
    <query id="tbec_racer_detail_dc001" desc="선수상세정보  삭제" fetchSize="10">
        <![CDATA[
            /* 선수상세정보 삭제 */
			DELETE 
			FROM TBEC_RACER_DETAIL 
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query>     
    <query id="tbec_racer_family_dc001" desc="선수가족사항  삭제" fetchSize="10">
        <![CDATA[
            /* 선수가족사항 삭제 */
			DELETE 
			FROM TBEC_RACER_FAMILY 
			 WHERE RACER_NO  		= ?		-- 선수번호
			 AND SEQ	= ?		-- 일련번호
        ]]>
    </query> 
    <query id="tbec_racer_academic_dc001" desc="선수학력사항  삭제" fetchSize="10">
        <![CDATA[
            /* 선수학력사항 삭제 */
			DELETE 
			FROM TBEC_RACER_ACADEMIC
			 WHERE RACER_NO  		= ?		-- 선수번호
			 AND SEQ	= ?		-- 일련번호
        ]]>
    </query> 
    <query id="tbec_racer_relation_dc001" desc="선수관계정보  삭제" fetchSize="10">
        <![CDATA[
            /* 선수관계정보 삭제 */
			DELETE 
			FROM TBEC_RACER_RELATION 
			 WHERE RACER_NO  		= ?		-- 선수번호
			 AND SEQ	= ?		-- 일련번호
        ]]>
    </query>  


    <query id="tbec_racer_family_dc002" desc="선수가족사항  삭제" fetchSize="10">
        <![CDATA[
            /* 선수가족사항 삭제 */
			DELETE 
			FROM TBEC_RACER_FAMILY 
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query> 
    <query id="tbec_racer_academic_dc002" desc="선수학력사항  삭제" fetchSize="10">
        <![CDATA[
            /* 선수학력사항 삭제 */
			DELETE 
			FROM TBEC_RACER_ACADEMIC
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query> 
    <query id="tbec_racer_relation_dc002" desc="선수관계정보  삭제" fetchSize="10">
        <![CDATA[
            /* 선수관계정보 삭제 */
			DELETE 
			FROM TBEC_RACER_RELATION 
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query>  
    
    <query id="tbec_racer_family_fc002" desc="선수가족사항  시퀀스조회" fetchSize="10">
        <![CDATA[
            /* 선수가족사항 시퀀스조회 */
			SELECT 											
    		NVL(MAX(SEQ)+1,1) SEQ		--시퀀스	
    		FROM 	TBEC_RACER_FAMILY							
    			WHERE RACER_NO =  ?
        ]]>
    </query> 
    <query id="tbec_racer_academic_fc002" desc="선수학력사항  시퀀스조회" fetchSize="10">
        <![CDATA[
            /* 선수학력사항 시퀀스조회 */
			SELECT 											
    		NVL(MAX(SEQ)+1,1) SEQ		--시퀀스	 
			FROM TBEC_RACER_ACADEMIC
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query> 
    <query id="tbec_racer_relation_fc002" desc="선수관계정보  시퀀스조회" fetchSize="10">
        <![CDATA[
            /* 선수관계정보 시퀀스조회 */
			SELECT 											
    		NVL(MAX(SEQ)+1,1) SEQ		--시퀀스	
			FROM TBEC_RACER_RELATION 
			 WHERE RACER_NO  		= ?		-- 선수번호
        ]]>
    </query>    
    
    <query id="tbec_racer_reference_se001" desc="선수면담정보(인적사항) 조회" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(인적사항) 조회 */
			SELECT * FROM TBEC_RACER_REF_HUMAN
			WHERE RACER_NO = ?					-- 선수번호
        ]]>
    </query>
       
    <query id="tbec_racer_reference_se002" desc="선수면담정보(경주운영) 조회" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(경주운영) 조회 */
			SELECT * FROM TBEC_RACER_REF_RACE
			WHERE RACER_NO = ?					-- 선수번호
        ]]>
    </query>
       
    <query id="tbec_racer_reference_se003" desc="선수면담정보(선수관계) 조회" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(선수관계) 조회 */
			SELECT 
				'' AS CHK, FC_GET_RACERNAME(A.RELA_RACER_NO) AS RELA_RACER_NM,
				RACER_NO,
				RELA_RACER_CD,
				GET_CD_NM('E00019',RELA_RACER_CD) AS RELA_RACER_CD_NM,
				RELA_RACER_NO,
				RELA_RACER_PERIO_NO
			FROM TBEC_RACER_REF_RELATION A
			WHERE RACER_NO = ?					-- 선수번호
        ]]>
    </query>
       
    <query id="tbec_racer_reference_se004" desc="선수면담정보(면담일지) 조회" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(면담일지) 조회 */
			SELECT '' AS CHK, A.* FROM TBEC_RACER_REF_DIARY A
			WHERE RACER_NO = ?					-- 선수번호
        ]]>
    </query>   

    <query id="tbec_racer_voilact_se005" desc="특정선수 출반위반 현황 조회" fetchSize="10">
        <![CDATA[
            /* 특정선수 출반위반 현황 조회 tbec_racer_voilact_se005 */
			SELECT  A.RACER_NO,
			            A.NM_KOR,
			            A.RACER_GRD_CD,
			            B.RACE_CNT,
			            A.STND_YEAR,
			            A.VOIL_NM,
			            A.TMS || '회차 ' || A.DAY_ORD || '일 ' || A.RACE_NO || '경주' AS RACE_NO,
			            A.RACE_REG_NO,
			            C.TEMPT,
			            C.WIND_DIRC_NM,
			            C.WIND_SPD,
			            C.HUMIDITY,
			            D.RACE_REG_NO1,
			            D.RACE_REG_NO2,
			            D.RACE_REG_NO3,
			            D.RACE_REG_NO4,
			            D.RACE_REG_NO5,
			            D.RACE_REG_NO6,
			            E.REFUND,
			            F.CURR_YEAR || '년 ' || F.CURR_TMS || '회차' AS CURR_DAY
			FROM
			      --출발위반
			     (SELECT 
			                A.STND_YEAR,                              --기준년도
			                A.MBR_CD,                                 --경정장 코드
			                A.TMS,                                    --회차
			                A.DAY_ORD,                                --일차
			                A.RACE_NO,                                --경주번호
			                A.RACER_NO,                               --선수번호
			                A.RACE_REG_NO,                            --선수정번
			                A.RACE_DAY,                               --경주일
			                B.NM_KOR,                                 --선수명
			                B.RACER_PERIO_NO||'기' AS RACER_PERIO_NO, --선수기수
			                B.RACER_GRD_CD,                           --선수등급
			                CASE WHEN A.VOIL_CD = '110' THEN 'F'      
			                        ELSE 'L' END AS VOIL_NM           --출발위반
			      FROM TBED_RACE_VOIL_ACT A, TBEC_RACER_MASTER B      
			      WHERE 1=1
			                AND A.RACER_NO = B.RACER_NO
			                AND A.VOIL_CD IN ('110', '120')) A,
			      -- 출주횟수
			     (SELECT A.RACER_NO, 
			                 COUNT(*) AS RACE_CNT 
			      FROM TBEB_ORGAN A, TBEB_RACE B
			      WHERE 1=1                                                        
			                AND A.STND_YEAR = B.STND_YEAR
			                AND A.MBR_CD       = B.MBR_CD
			                AND A.TMS            = B.TMS
			                AND A.DAY_ORD     = B.DAY_ORD
			                AND A.RACE_NO     = B.RACE_NO
			                AND A.ABSE_CD <> '003' 
			                AND A.IMMT_CLS_CD <> '003'
			                AND B.RACE_STTS_CD = '001'
			      GROUP BY A.RACER_NO) B,
			       --기상정보
			     (SELECT  STND_YEAR,                                             --기준년도
			                  MBR_CD,                                            --경정장코드  
			                  TMS,                                               --회차
			                  DAY_ORD,                                           --일차
			                  RACE_NO,                                           --경주번호
			                  TEMPT,                                             --기온                   
			                  GET_CD_NM('E00031', WIND_DIRC_CD) AS WIND_DIRC_NM, --풍향코드
			                  WIND_SPD,                                          --풍속                    
			                  HUMIDITY                                           --습도
			      FROM  TBEB_RACE 
			      WHERE RACE_END_YN = 'Y') C,
			      -- 출주선수
			     ( SELECT
			                    TOR.STND_YEAR                                           --기준년도
			                  , TOR.MBR_CD                                              --경정장코드
			                  , TOR.TMS                                                 --회차
			                  , TOR.DAY_ORD                                             --일차
			                  , TOR.RACE_NO                                             --경주번호
			                  , MIN(DECODE(TOR.RACE_REG_NO, '1', NM_KOR)) RACE_REG_NO1  --정번1
			                  , MIN(DECODE(TOR.RACE_REG_NO, '2', NM_KOR)) RACE_REG_NO2  --정번2
			                  , MIN(DECODE(TOR.RACE_REG_NO, '3', NM_KOR)) RACE_REG_NO3  --정번3
			                  , MIN(DECODE(TOR.RACE_REG_NO, '4', NM_KOR)) RACE_REG_NO4  --정번4
			                  , MIN(DECODE(TOR.RACE_REG_NO, '5', NM_KOR)) RACE_REG_NO5  --정번5
			                  , MIN(DECODE(TOR.RACE_REG_NO, '6', NM_KOR)) RACE_REG_NO6  --정번6
			       FROM  TBEB_ORGAN TOR, TBEC_RACER_MASTER TRM
			       WHERE   TOR.RACER_NO   = TRM.RACER_NO
			       GROUP BY TOR.STND_YEAR, TOR.MBR_CD, TOR.TMS, TOR.DAY_ORD, TOR.RACE_NO) D,
			      --환불액
			     ( SELECT                                                               
			                 STND_YEAR,                                                 --기준년도             
			                 DECODE(MEET_CD, '003', '001') AS MBR_CD,                   --경정장코드                                                
			                 TMS,                                                       --회차                
			                 DAY_ORD,                                                   --일차                
			                 RACE_NO,                                                   --경주번호
			                 SUM(REFUND) AS REFUND                                      --환불금액
			       FROM   USRBM.VW_SDL_DT                                                              
			       WHERE MEET_CD    =  '003'
			       GROUP BY STND_YEAR, MEET_CD, TMS, DAY_ORD, RACE_NO) E,
			      -- 최신 경주년도 및 회차
			     ( SELECT SUBSTR(TO_CHAR(SYSDATE, 'YYYYMMDD'), 1, 4) AS CURR_YEAR, 
			                   MAX(TMS) AS CURR_TMS 
			        FROM TBEB_RACE
			        WHERE 1=1
			                  AND RACE_STTS_CD = '001' 
			                  AND STND_YEAR = SUBSTR(TO_CHAR(SYSDATE, 'YYYYMMDD'), 1, 4)) F       
			WHERE 1=1
			          AND A.RACER_NO = B.RACER_NO
			          AND A.STND_YEAR = C.STND_YEAR
			          AND A.MBR_CD = C.MBR_CD
			          AND A.TMS = C.TMS
			          AND A.DAY_ORD = C.DAY_ORD
			          AND A.RACE_NO = C.RACE_NO
			          AND A.STND_YEAR = D.STND_YEAR
			          AND A.MBR_CD = D.MBR_CD
			          AND A.TMS = D.TMS
			          AND A.DAY_ORD = D.DAY_ORD
			          AND A.RACE_NO = D.RACE_NO
			          AND A.STND_YEAR = E.STND_YEAR
			          AND A.MBR_CD = E.MBR_CD
			          AND A.TMS = E.TMS
			          AND A.DAY_ORD = E.DAY_ORD
			          AND A.RACE_NO = E.RACE_NO
			          AND A.RACER_NO = ?
			ORDER BY A.RACER_NO, A.STND_YEAR, A.MBR_CD, A.TMS, A.DAY_ORD, A.RACE_NO, A.RACE_REG_NO
        ]]>
    </query>   

    <query id="tbec_allracer_voilact_se006" desc="전체선수 출반위반 현황 조회" fetchSize="10">
        <![CDATA[
            /* 전체선수 출반위반 현황 조회  tbec_allracer_voilact_se006 */
			SELECT  A.RACER_NO,
		            A.NM_KOR,
		            A.RACER_GRD_CD,
		            B.RACE_CNT,
		            A.STND_YEAR,
		            A.VOIL_NM,
		            A.TMS || '회차 ' || A.DAY_ORD || '일 ' || A.RACE_NO || '경주' AS RACE_NO,
		            A.RACE_REG_NO,
		            C.TEMPT,
		            C.WIND_DIRC_NM,
		            C.WIND_SPD,
		            C.HUMIDITY,
		            D.RACE_REG_NO1,
		            D.RACE_REG_NO2,
		            D.RACE_REG_NO3,
		            D.RACE_REG_NO4,
		            D.RACE_REG_NO5,
		            D.RACE_REG_NO6,
		            E.REFUND,
		            F.VOIL_CNT
			FROM
			      --출발위반
			     (SELECT 
		                A.STND_YEAR,                              --기준년도
		                A.MBR_CD,                                 --경정장 코드
		                A.TMS,                                    --회차
		                A.DAY_ORD,                                --일차
		                A.RACE_NO,                                --경주번호
		                A.RACER_NO,                               --선수번호
		                A.RACE_REG_NO,                            --선수정번
		                A.RACE_DAY,                               --경주일
		                B.NM_KOR,                                 --선수명
		                B.RACER_PERIO_NO||'기' AS RACER_PERIO_NO, --선수기수
		                B.RACER_GRD_CD,                           --선수등급
		                CASE WHEN A.VOIL_CD = '110' THEN 'F'      
		                        ELSE 'L' END AS VOIL_NM,          --출발위반
                        B.RACER_STAT_CD		                        
			      FROM TBED_RACE_VOIL_ACT A, TBEC_RACER_MASTER B      
			      WHERE 1=1
			                AND A.RACER_NO = B.RACER_NO
			                AND A.VOIL_CD IN ('110', '120')) A,
			      -- 출주횟수
			     (SELECT A.RACER_NO, 
			                 COUNT(*) AS RACE_CNT 
			      FROM TBEB_ORGAN A, TBEB_RACE B
			      WHERE 1=1                                                        
		                AND A.STND_YEAR = B.STND_YEAR
		                AND A.MBR_CD       = B.MBR_CD
		                AND A.TMS            = B.TMS
		                AND A.DAY_ORD     = B.DAY_ORD
		                AND A.RACE_NO     = B.RACE_NO
		                AND A.ABSE_CD <> '003' 
		                AND A.IMMT_CLS_CD <> '003'
		                AND B.RACE_STTS_CD = '001'
		                AND A.MBR_CD = NVL(?, A.MBR_CD)
		                AND A.RACE_DAY BETWEEN NVL(?, A.RACE_DAY) AND NVL(?, A.RACE_DAY) 
			      GROUP BY A.RACER_NO) B,
			       --기상정보
			     (SELECT  STND_YEAR,                                             --기준년도
		                  MBR_CD,                                            --경정장코드  
		                  TMS,                                               --회차
		                  DAY_ORD,                                           --일차
		                  RACE_NO,                                           --경주번호
		                  TEMPT,                                             --기온                   
		                  GET_CD_NM('E00031', WIND_DIRC_CD) AS WIND_DIRC_NM, --풍향코드
		                  WIND_SPD,                                          --풍속                    
		                  HUMIDITY                                           --습도
			      FROM  TBEB_RACE 
			      WHERE RACE_END_YN = 'Y') C,
			      -- 출주선수
			     ( SELECT
		                    TOR.STND_YEAR                                           --기준년도
		                  , TOR.MBR_CD                                              --경정장코드
		                  , TOR.TMS                                                 --회차
		                  , TOR.DAY_ORD                                             --일차
		                  , TOR.RACE_NO                                             --경주번호
		                  , MIN(DECODE(TOR.RACE_REG_NO, '1', NM_KOR)) RACE_REG_NO1  --정번1
		                  , MIN(DECODE(TOR.RACE_REG_NO, '2', NM_KOR)) RACE_REG_NO2  --정번2
		                  , MIN(DECODE(TOR.RACE_REG_NO, '3', NM_KOR)) RACE_REG_NO3  --정번3
		                  , MIN(DECODE(TOR.RACE_REG_NO, '4', NM_KOR)) RACE_REG_NO4  --정번4
		                  , MIN(DECODE(TOR.RACE_REG_NO, '5', NM_KOR)) RACE_REG_NO5  --정번5
		                  , MIN(DECODE(TOR.RACE_REG_NO, '6', NM_KOR)) RACE_REG_NO6  --정번6
			       FROM  TBEB_ORGAN TOR, TBEC_RACER_MASTER TRM
			       WHERE   TOR.RACER_NO   = TRM.RACER_NO
			       GROUP BY TOR.STND_YEAR, TOR.MBR_CD, TOR.TMS, TOR.DAY_ORD, TOR.RACE_NO) D,
			      --환불액
			     ( SELECT                                                               
		                 STND_YEAR,                                                 --기준년도             
		                 DECODE(MEET_CD, '003', '001') AS MBR_CD,                   --경정장코드                                                
		                 TMS,                                                       --회차                
		                 DAY_ORD,                                                   --일차                
		                 RACE_NO,                                                   --경주번호
		                 SUM(REFUND) AS REFUND                                      --환불금액
			       FROM   USRBM.VW_SDL_DT                                                              
			       WHERE MEET_CD    =  '003'
			       GROUP BY STND_YEAR, MEET_CD, TMS, DAY_ORD, RACE_NO) E,
			      -- 선수별 위반횟수					
                   (SELECT 
                           RACER_NO,                               --선수번호
                           COUNT(*) AS VOIL_CNT
                    FROM TBED_RACE_VOIL_ACT      
                    WHERE VOIL_CD IN ('110', '120')
                              AND MBR_CD = NVL( ?, MBR_CD)
                              AND RACE_DAY BETWEEN NVL(?, RACE_DAY) AND NVL(?, RACE_DAY)
                              AND RACER_NO = NVL(?, RACER_NO)
                    GROUP BY RACER_NO) F			             
			WHERE 1=1
			          AND A.RACER_NO = B.RACER_NO
			          AND A.STND_YEAR = C.STND_YEAR
			          AND A.MBR_CD = C.MBR_CD
			          AND A.TMS = C.TMS
			          AND A.DAY_ORD = C.DAY_ORD
			          AND A.RACE_NO = C.RACE_NO
			          AND A.STND_YEAR = D.STND_YEAR
			          AND A.MBR_CD = D.MBR_CD
			          AND A.TMS = D.TMS
			          AND A.DAY_ORD = D.DAY_ORD
			          AND A.RACE_NO = D.RACE_NO
			          AND A.STND_YEAR = E.STND_YEAR
			          AND A.MBR_CD = E.MBR_CD
			          AND A.TMS = E.TMS
			          AND A.DAY_ORD = E.DAY_ORD
			          AND A.RACE_NO = E.RACE_NO
			          AND A.RACER_NO = F.RACER_NO
				      AND A.MBR_CD = NVL(?, A.MBR_CD)
				      AND A.RACE_DAY BETWEEN NVL(?, A.RACE_DAY) AND NVL(?, A.RACE_DAY)
			          AND A.RACER_NO = NVL(?, A.RACER_NO)
                      AND A.RACER_STAT_CD <> '003'			          
			ORDER BY A.RACER_NO, A.STND_YEAR, A.MBR_CD, A.TMS, A.DAY_ORD, A.RACE_NO, A.RACE_REG_NO
        ]]>
    </query> 
     
    <query id="tbec_racer_reference_in001" desc="선수면담정보(인적사항) 저장" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(인적사항) 저장 */
			MERGE INTO TBEC_RACER_REF_HUMAN A
			USING DUAL
			ON (A.RACER_NO = ?)					-- 선수번호
			WHEN MATCHED THEN
				UPDATE SET
			  				HOME_PLACE         	= ?
			  				,PARENT_TO_YN      	= ?
			  				,CHILD_M           	= ?
			  				,CHILD_W           	= ?
			  				,CHILE_AGE         	= ?
			  				,PARENTING_STYLE   	= ?
			  				,WIFE_JOB          	= ?
			  				,ECO_STANDARD      	= ?
			  				,LIFE_MAIN         	= ?
			  				,ETC_JOB_YN        	= ?
			  				,TWOJOB_FIELD      	= ?
			  				,TWOJOB_PLACE      	= ?
			  				,PARTNER_YN        	= ?
			  				,TWOJOB_INCOME     	= ?
			  				,TWOJOB_TM         	= ?
			  				,TWOJOB_PLAN       	= ?
			  				,DRINKING          	= ?
			  				,DRINKING_TIME     	= ?
			  				,DRINKING_HABIT    	= ?
			  				,SMOKING           	= ?
			  				,SKILL             	= ?
			  				,HOBBY             	= ?
			  				,WGT_CONTROL_PLAN	= ?	
			  				,DIET              	= ?
			  				,LUNCH_YN          	= ?
			  				,HEALTH_CON        	= ?
			  				,MEDICAL_YN        	= ?
			  				,FAMILY_MED        	= ?
			  				,INSURANCE         	= ?
			  				,INSURANCE_RE      	= ?
			  				,FAMILY_TEL        	= ?
			  				,EMERGENCY_TEL     	= ?
			  				,UPDT_ID           	= ?
			  				,UPDT_DTM          	= SYSDATE
			WHEN NOT MATCHED THEN         				
				INSERT (  RACER_NO             
						 ,HOME_PLACE           
			             ,PARENT_TO_YN         
			             ,CHILD_M              
			             ,CHILD_W              
			             ,CHILE_AGE            
			             ,PARENTING_STYLE      
			             ,WIFE_JOB             
			             ,ECO_STANDARD         
			             ,LIFE_MAIN            
			             ,ETC_JOB_YN           
			             ,TWOJOB_FIELD         
			             ,TWOJOB_PLACE         
			             ,PARTNER_YN           
			             ,TWOJOB_INCOME        
			             ,TWOJOB_TM            
			             ,TWOJOB_PLAN          
			             ,DRINKING             
			             ,DRINKING_TIME        
			             ,DRINKING_HABIT       
			             ,SMOKING              
			             ,SKILL                
			             ,HOBBY                
			             ,WGT_CONTROL_PLAN     
			             ,DIET                 
			             ,LUNCH_YN             
			             ,HEALTH_CON           
			             ,MEDICAL_YN           
			             ,FAMILY_MED           
			             ,INSURANCE            
			             ,INSURANCE_RE         
			             ,FAMILY_TEL           
			             ,EMERGENCY_TEL        
			             ,INST_ID              
			             ,INST_DTM)            
				VALUES ( ?	                     
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,?
			             ,SYSDATE)
        ]]>
    </query>   
    
    <query id="tbec_racer_reference_in002" desc="선수면담정보(경주운영) 저장" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(경주운영) 저장 */
			MERGE INTO TBEC_RACER_REF_RACE A
			USING DUAL
			ON (A.RACER_NO = ?)					-- 선수번호
			WHEN MATCHED THEN
				UPDATE SET 
			 				LANE_LIKE     	= ? 
			 				,LANE_DISLIKE  	= ? 
			 				,LANE_STR_RUN  	= ? 
			 				,START_IN      	= ? 
			 				,START_CENTER  	= ? 
			 				,START_OUT     	= ? 
			 				,START_WEA     	= ? 
			 				,START_ORGAN   	= ? 
			 				,TURNING_BEST  	= ? 
			 				,TURNING_START 	= ? 
			 				,TURNING_SCOPE 	= ? 
			 				,STRA_LIKE     	= ? 
			 				,STRA_WEA      	= ? 
			 				,STRA_LANE     	= ? 
			 				,STRA_MOTOR    	= ? 
			 				,STRA_PELLER   	= ? 
			 				,TRAIN_POINT   	= ? 
			 				,TRAIN_FRE     	= ? 
			 				,TRAIN_CON     	= ? 
			 				,EQU_PELLER    	= ? 
			 				,EQU_ACE       	= ? 
			 				,EQU_ETC       	= ? 
			 				,PAR_LIKE      	= ? 
			 				,PAR_DISLIKE   	= ? 
			 				,PAR_INTER     	= ? 
			 				,PAR_WEA       	= ? 
			 				,MOBOT_REP     	= ? 
			 				,MOBOT_INST    	= ? 
			 				,MOBOT_H_HAN   	= ? 
			 				,MOBOT_L_HAN   	= ? 
			 				,ORGAN_CLOSE   	= ? 
			 				,ORGAN_STAB    	= ? 
			 				,ORGAN_LOAD    	= ? 
			 				,ORGAN_LIKE    	= ? 
			 				,UPDT_ID       	= ? 
			 				,UPDT_DTM      	= SYSDATE  
			WHEN NOT MATCHED THEN 		 				
				INSERT (  RACER_NO     				
			              ,LANE_LIKE        
			              ,LANE_DISLIKE     
			              ,LANE_STR_RUN     
			              ,START_IN         
			              ,START_CENTER     
			              ,START_OUT        
			              ,START_WEA        
			              ,START_ORGAN      
			              ,TURNING_BEST     
			              ,TURNING_START    
			              ,TURNING_SCOPE    
			              ,STRA_LIKE        
			              ,STRA_WEA         
			              ,STRA_LANE        
			              ,STRA_MOTOR       
			              ,STRA_PELLER      
			              ,TRAIN_POINT      
			              ,TRAIN_FRE        
			              ,TRAIN_CON        
			              ,EQU_PELLER       
			              ,EQU_ACE          
			              ,EQU_ETC          
			              ,PAR_LIKE         
			              ,PAR_DISLIKE      
			              ,PAR_INTER        
			              ,PAR_WEA          
			              ,MOBOT_REP        
			              ,MOBOT_INST       
			              ,MOBOT_H_HAN      
			              ,MOBOT_L_HAN      
			              ,ORGAN_CLOSE      
			              ,ORGAN_STAB       
			              ,ORGAN_LOAD       
			              ,ORGAN_LIKE       
			              ,INST_ID          
			              ,INST_DTM)        
				VALUES (  ?              
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,SYSDATE)
        ]]>
    </query>      
    
    <query id="tbec_racer_reference_in003" desc="선수면담정보(선수관계) 저장" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(선수관계) 저장 */
			MERGE INTO TBEC_RACER_REF_RELATION A
			USING DUAL
			ON (A.RACER_NO = ?					-- 선수번호
				AND A.RELA_RACER_CD = ?			-- 선수관계코드
				AND A.RELA_RACER_NO = ?)		-- 관계선수 등록번호
			WHEN MATCHED THEN
				UPDATE SET 
			  				RELA_RACER_PERIO_NO	= ?
			  				,UPDT_ID            	= ?
			  				,UPDT_DTM           	= SYSDATE
			WHEN NOT MATCHED THEN 		 				  				
				INSERT (  RACER_NO            			    
			              ,RELA_RACER_CD      
			              ,RELA_RACER_NO      
			              ,RELA_RACER_PERIO_NO
			              ,INST_ID            
			              ,INST_DTM)
				VALUES (  ?
						  ,?
						  ,?
						  ,?
						  ,?
						  ,SYSDATE) 

        ]]>
    </query>       
    
    <query id="tbec_racer_reference_in004" desc="선수면담정보(면담일지) 저장" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(면담일지) 저장 */
			MERGE INTO TBEC_RACER_REF_DIARY A
			USING DUAL
			ON (A.RACER_NO = ?					-- 선수번호
				AND A.DIARY_DATE = ?			-- 작성일
				AND A.DIARY_HOUR = ?			-- 시간
				AND A.DIARY_MINUTE = ?)			-- 분
			WHEN MATCHED THEN
				UPDATE SET 
							DIARY_TITLE     = ?
							,DIARY_CONTENTS = ?
							,UPDT_ID        = ?
							,UPDT_DTM       = SYSDATE
			WHEN NOT MATCHED THEN 				
				INSERT (  RACER_NO               
			              ,DIARY_DATE          
			              ,DIARY_HOUR          
			              ,DIARY_MINUTE        
			              ,DIARY_TITLE         
			              ,DIARY_CONTENTS      
			              ,INST_ID             
			              ,INST_DTM)
				VALUES (  ?                    
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,?
			              ,SYSDATE)	
        ]]>
    </query>

    <query id="tbec_racer_reference_de001" desc="선수면담정보(선수관계) 삭제" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(선수관계) 삭제 */
			DELETE FROM TBEC_RACER_REF_RELATION               
			WHERE 1=1
				  AND RACER_NO = ?		-- 선수번호
				  AND RELA_RACER_CD = ?	-- 선수관계코드
				  AND RELA_RACER_NO = ?	-- 관계선수 등록번호
        ]]>
    </query>

    <query id="tbec_racer_reference_de002" desc="선수면담정보(면담일지) 삭제" fetchSize="10">
        <![CDATA[
            /* 선수면담정보(면담일지) 삭제 */
			DELETE FROM TBEC_RACER_REF_DIARY               
			WHERE 1=1
				  AND RACER_NO = ?		-- 선수번호
				  AND DIARY_DATE = ?	-- 작성일
				  AND DIARY_HOUR = ?	-- 시간
				  AND DIARY_MINUTE = ?  -- 분
        ]]>
    </query>
    
    <query id="tbec_racer_insurance_se001" desc="공정관리-공정선수신상관리-보험조회" fetchSize="10">
        <![CDATA[
            /* 공정관리-공정선수신상관리-보험조회 */
			SELECT A.RACER_NO,
			           A.NM_KOR,
			           A.RACER_GRD_CD,
			           GET_DEC(B.RES_NO) RES_NO
			           ,CASE WHEN SUBSTR(GET_DEC(B.RES_NO),7,1) IN ('1','2','7','8')
			                        THEN TO_NUMBER(TO_CHAR(SYSDATE,'YYYY')) - TO_NUMBER('19'||SUBSTR(GET_DEC(B.RES_NO),1,2))    
			                    ELSE TO_NUMBER(TO_CHAR(SYSDATE,'YYYY')) - TO_NUMBER('20'||SUBSTR(GET_DEC(B.RES_NO),1,2))    
			            END AS AGE,
			            A.RACER_STAT_CD,
			            C.INSURANCE,
			            C.CLUB,
			            C.TWO_JOB,
			            C.SPEC_INFO,
			            C.FORTUNE
			FROM TBEC_RACER_MASTER A,
			         TBEC_RACER_DETAIL B,
			         TBEE_RACER_FAIR C
			WHERE 1=1
			          AND A.RACER_NO = B.RACER_NO
			          AND A.RACER_NO = C.RACER_NO
			          AND A.NM_KOR LIKE NVL(TRIM(?), A.NM_KOR) || '%'
			          AND A.RACER_GRD_CD = NVL(?, A.RACER_GRD_CD)
			          AND A.RACER_STAT_CD = NVL(?, A.RACER_STAT_CD)
			ORDER BY A.RACER_NO			          
        ]]>
    </query>
</queryMap>