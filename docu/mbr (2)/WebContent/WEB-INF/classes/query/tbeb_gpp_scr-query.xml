<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbeb_gpp_scr(GP포인트)">
    <query id="tbeb_gpp_scr_fb001" desc="GPP조회" fetchSize="10">
        <![CDATA[
			SELECT 
			         STND_YEAR
			       , DAY_ORD
			       , RACE_DGRE_CD
			       , MIN(DECODE(RANK, 1, GPP_SCR)) RANK_1
			       , MIN(DECODE(RANK, 2, GPP_SCR)) RANK_2
			       , MIN(DECODE(RANK, 3, GPP_SCR)) RANK_3
			       , MIN(DECODE(RANK, 4, GPP_SCR)) RANK_4
			       , MIN(DECODE(RANK, 5, GPP_SCR)) RANK_5
			       , MIN(DECODE(RANK, 6, GPP_SCR)) RANK_6
			       , MIN(DECODE(RANK, 0, GPP_SCR)) RANK_0  /* 면책실격 */
			FROM   TBEB_GPP_SCR
			WHERE  STND_YEAR = ?
			GROUP BY STND_YEAR
			       , DAY_ORD
			       , RACE_DGRE_CD
            ORDER BY DAY_ORD
                   , RACE_DGRE_CD
        ]]>
    </query> 
    <query id="tbeb_gpp_scr_ib001" desc="GPP저장" fetchSize="10">
        <![CDATA[
			INSERT INTO TBEB_GPP_SCR
			( 
			        STND_YEAR     -- 기준년도
			      , DAY_ORD       -- 경주일차    
			      , RACE_DGRE_CD  -- 경주등급코드
			      , RANK          -- 착순위      
			      , GPP_SCR       -- GP포인트      
			      , INST_ID       -- 작성자ID    
			      , INST_DTM      -- 작성일시    
			      , UPDT_ID       -- 수정자ID    
			      , UPDT_DTM      -- 수정일시    
			) VALUES (
			        ?             -- 기준년도    
			      , ?             -- 경주일차
			      , ?             -- 경주등급코드
			      , ?             -- 착순위      
			      , NVL(?, 0)     -- GP포인트      
			      , ?             -- 작성자ID    
			      , SYSDATE       -- 작성일시    
			      , ?             -- 수정자ID    
			      , SYSDATE       -- 수정일시    
			)
        ]]>
    </query> 
    <query id="tbeb_gpp_scr_ub001" desc="GPP수정" fetchSize="10">
        <![CDATA[
			UPDATE TBEB_GPP_SCR SET
			        GPP_SCR       = NVL(?, 0) -- GP포인트      
			      , UPDT_ID       = ?         -- 수정자ID    
			      , UPDT_DTM      = SYSDATE   -- 수정일시    
			WHERE   STND_YEAR     = ?         -- 기준년도    
			AND     DAY_ORD       = ?         -- 경주일차      
			AND     RACE_DGRE_CD  = ?         -- 경주등급코드
			AND     RANK          = ?         -- 착순위
        ]]>
    </query> 
    <query id="tbeb_gpp_scr_db001" desc="GPP삭제" fetchSize="10">
        <![CDATA[
			DELETE
			FROM    TBEB_GPP_SCR
			WHERE   STND_YEAR     = ?       -- 기준년도    
			AND     DAY_ORD       = ?       -- 경주일차
			AND     RACE_DGRE_CD  = ?       -- 경주등급코드
        ]]>
    </query> 
</queryMap>