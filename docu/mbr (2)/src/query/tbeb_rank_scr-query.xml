<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbeb_rank_scr(착순점)">
    <query id="tbeb_rank_scr_fb001" desc="착순점조회" fetchSize="10">
        <![CDATA[
SELECT /*  tbeb_rank_scr_fb001 IWORK_SFR-008 경정 선수편성 메뉴 개선 2013-12-07 8착까지 추가 수정. */        
                     A.STND_YEAR
                   , A.RACE_DGRE_CD
                   , B.RMK AS CD_NM
                   , MIN(DECODE(RANK, 1, A.RACE_SCR)) RANK_1
                   , MIN(DECODE(RANK, 2, A.RACE_SCR)) RANK_2
                   , MIN(DECODE(RANK, 3, A.RACE_SCR)) RANK_3
                   , MIN(DECODE(RANK, 4, A.RACE_SCR)) RANK_4
                   , MIN(DECODE(RANK, 5, A.RACE_SCR)) RANK_5
                   , MIN(DECODE(RANK, 6, A.RACE_SCR)) RANK_6
                   , MIN(DECODE(RANK, 7, A.RACE_SCR)) RANK_7
                   , MIN(DECODE(RANK, 8, A.RACE_SCR)) RANK_8
            FROM   TBEB_RANK_SCR A, TBEA_SPEC_CD B
            WHERE  1=1
                       AND A.RACE_DGRE_CD = B.CD 
					   AND A.STND_YEAR = ?
                       AND B.GRP_CD = 'E00005'					   
			GROUP BY A.STND_YEAR, A.RACE_DGRE_CD, B.RMK
        ]]>
    </query> 
    <query id="tbeb_rank_scr_ib001" desc="착순점저장" fetchSize="10">
        <![CDATA[
			INSERT INTO TBEB_RANK_SCR
			( 
			        STND_YEAR     -- 기준년도    
			      , RACE_DGRE_CD  -- 경주등급코드
			      , RANK          -- 착순위      
			      , RACE_SCR      -- 착순점      
			      , INST_ID       -- 작성자ID    
			      , INST_DTM      -- 작성일시    
			      , UPDT_ID       -- 수정자ID    
			      , UPDT_DTM      -- 수정일시    
			) VALUES (
			        ?             -- 기준년도    
			      , ?             -- 경주등급코드
			      , ?             -- 착순위      
			      , NVL(?, 0)     -- 착순점      
			      , ?             -- 작성자ID    
			      , SYSDATE       -- 작성일시    
			      , ?             -- 수정자ID    
			      , SYSDATE       -- 수정일시    
			)
        ]]>
    </query> 
    <query id="tbeb_rank_scr_ub001" desc="착순점수정" fetchSize="10">
        <![CDATA[
			UPDATE TBEB_RANK_SCR SET
			        RACE_SCR      = NVL(?, 0) -- 착순점      
			      , UPDT_ID       = ?         -- 수정자ID    
			      , UPDT_DTM      = SYSDATE   -- 수정일시    
			WHERE   STND_YEAR     = ?         -- 기준년도    
			AND     RACE_DGRE_CD  = ?         -- 경주등급코드
			AND     RANK          = ?         -- 착순위      
        ]]>
    </query> 
    <query id="tbeb_rank_scr_db001" desc="착순점삭제" fetchSize="10">
        <![CDATA[
			DELETE
			FROM    TBEB_RANK_SCR
			WHERE   STND_YEAR     = ?       -- 기준년도    
			AND     RACE_DGRE_CD  = ?       -- 경주등급코드
        ]]>
    </query> 
</queryMap>