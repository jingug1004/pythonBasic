<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbea_user_mngr(User관리)">
     <query id="tbea_user_fa005" desc="idCheckQuery" fetchSize="10">
        <![CDATA[
            SELECT /* tbea_user_fa005 */
                   C.*
            FROM   (
		            SELECT
		                     GBN
		                   , USER_ID      --  user id      
		                   , '' PSWD      --  password     
		                   , USER_NM      --  user name    
		                   , EMAIL        --  email        
		                   , TEL_NO       --  tel no.      
		                   , FLOC         --  직위         
		                   , FGRADE       --  직급         
		                   , ASSO_CD      --  운영본부 코드
		                   , DEPT_CD      --  부서(실) 코드
		                   , TEAM_CD      --  부서(팀) 코드
		                   , ASSO_NM      --  운영본부 명  
		                   , DEPT_NM      --  부서(실) 명  
		                   , TEAM_NM      --  부서(팀) 명   
		                   , (SELECT COUNT(*) FROM TBEA_MN_AUTH B WHERE B.USER_ID = A.USER_ID) AS MN_CNT   
		            FROM   VWEA_USER A
		            WHERE  TEAM_CD    = NVL(?, TEAM_CD)
		            AND    USER_NM LIKE NVL('%' || ? || '%', USER_NM)
		            ) C
		    ORDER BY DECODE(MN_CNT,0,0,1) DESC, TEAM_CD, USER_ID
        ]]>
    </query>     
    
     <query id="tbea_user_fa004" desc="idCheckQuery" fetchSize="10">
        <![CDATA[
			SELECT    
			     rownum row_id
				, USER_ID      --  user id      
				, PSWD         --  password     
				, USER_NM      --  user name    
				, EMAIL        --  email        
				, TEL_NO       --  tel no.      
				, FLOC         --  직위         
				, FGRADE       --  직급         
                , ASSO_CD      --  운영본부 코드
				, DEPT_CD      --  부서(실) 코드
				, TEAM_CD      --  부서(팀) 코드
				, ASSO_NM      --  운영본부 명  
				, DEPT_NM      --  부서(실) 명  
				, TEAM_NM      --  부서(팀) 명  
			FROM (SELECT
			    		  USER_ID      --  user id      
			    		, PSWD         --  password     
			    		, USER_NM      --  user name    
			    		, EMAIL        --  email        
			    		, TEL_NO       --  tel no.      
			    		, FLOC         --  직위         
			    		, FGRADE       --  직급         
			    		, ASSO_CD      --  운영본부 코드
			    		, DEPT_CD      --  부서(실) 코드
			    		, TEAM_CD      --  부서(팀) 코드
			    		, ASSO_NM      --  운영본부 명
			    		, DEPT_NM      --  부서(실) 명  
			    		, TEAM_NM      --  부서(팀) 명   
			        FROM VWEA_USER
			        WHERE USER_NM LIKE NVL('%' || ? || '%', USER_NM)
			        AND   TEAM_NM LIKE NVL('%' || ? || '%', TEAM_NM)
			        ORDER BY USER_ID
			    )
        ]]>
    </query>     
    
    <query id="tbea_user_fa003" desc="카운트쿼리" fetchSize="10">
        <![CDATA[
			SELECT COUNT(USER_ID) TOTCOUNT FROM VWEA_USER
			WHERE	USER_NM     LIKE NVL('%' || ? || '%', USER_NM)
        ]]>
    </query>   

     <query id="tbea_user_fa002" desc="USERLIST쿼리" fetchSize="10">
        <![CDATA[
			SELECT 
			      ROW_ID
				, USER_ID      --  user id      
				, PSWD         --  password     
				, USER_NM      --  user name    
				, EMAIL        --  email        
				, TEL_NO       --  tel no.      
				, FLOC         --  직위         
				, FGRADE       --  직급         
                , ASSO_CD      --  운영본부 코드
				, DEPT_CD      --  부서(실) 코드
				, TEAM_CD      --  부서(팀) 코드
				, ASSO_NM      --  운영본부 명  
				, DEPT_NM      --  부서(실) 명  
				, TEAM_NM      --  부서(팀) 명   
			FROM (SELECT    
			              ROWNUM ROW_ID
						, USER_ID      --  user id      
						, PSWD         --  password     
						, USER_NM      --  user name    
						, EMAIL        --  email        
						, TEL_NO       --  tel no.      
						, FLOC         --  직위         
						, FGRADE       --  직급         
						, ASSO_CD      --  운영본부 코드
						, DEPT_CD      --  부서(실) 코드
						, TEAM_CD      --  부서(팀) 코드
						, ASSO_NM      --  운영본부 명  
						, DEPT_NM      --  부서(실) 명  
						, TEAM_NM      --  부서(팀) 명   
			        FROM (SELECT
								  USER_ID      --  user id      
								, PSWD         --  password     
								, USER_NM      --  user name    
								, EMAIL        --  email        
								, TEL_NO       --  tel no.      
								, FLOC         --  직위         
								, FGRADE       --  직급         
								, ASSO_CD      --  운영본부 코드
								, DEPT_CD      --  부서(실) 코드
								, TEAM_CD      --  부서(팀) 코드
								, ASSO_NM      --  운영본부 명
								, DEPT_NM      --  부서(실) 명  
								, TEAM_NM      --  부서(팀) 명
			                FROM VWEA_USER
			                WHERE USER_NM LIKE NVL('%' || ? || '%', USER_NM)
			            )
			        )
			WHERE ROW_ID BETWEEN (? - 1) * ? + 1 AND ? * ?
        ]]>
    </query> 

    
     <query id="tbea_user_fa001" desc="idCheckQuery" fetchSize="10">
        <![CDATA[
			SELECT USER_ID
			FROM TBEA_USER
			WHERE USER_ID = ?
        ]]>
    </query>     
    
    
     <query id="tbea_user_ia001" desc="userInsertQuery" fetchSize="10">
        <![CDATA[
			INSERT INTO TBEA_USER
			(
			         USER_ID
			       , PSWD
			       , USER_NM
			       , EMAIL
			       , TEL_NO
			       , FLOC
			       , FGRADE
			       , ASSO_CD
			       , DEPT_CD
			       , TEAM_CD
			       , ASSO_NM
			       , DEPT_NM
			       , TEAM_NM
			) VALUES (
			         ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			       , ?
			)
        ]]>
    </query>      
    
    
     <query id="tbea_user_ua001" desc="userUpdateQuery" fetchSize="10">
        <![CDATA[
			UPDATE TBEA_USER SET
			         PSWD    = NVL(?, PSWD)
			       , USER_NM = ?
			       , EMAIL   = ?
			       , TEL_NO  = ?
			       , FLOC    = ?
			       , FGRADE  = ?
			       , ASSO_CD = ?
			       , DEPT_CD = ?
			       , TEAM_CD = ?
			       , ASSO_NM = ?
			       , DEPT_NM = ?
			       , TEAM_NM = ?
			WHERE    USER_ID = ?
        ]]>
    </query>       
    
     <query id="tbea_user_da001" desc="userDeleteQuery" fetchSize="10">
        <![CDATA[
			DELETE FROM TBEA_USER
			WHERE USER_ID       = ?    
        ]]>
    </query>             
</queryMap>