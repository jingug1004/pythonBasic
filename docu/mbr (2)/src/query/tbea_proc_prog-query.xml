<?xml version="1.0" encoding='EUC-KR'?>
<queryMap desc="tbea_bord_mngr(°Ô½ÃÆÇ)">    		   
    <query id="tbea_proc_prog_fa001" desc="SEQNOGETÄõ¸®" fetchSize="10">
        <![CDATA[
			SELECT 
			      ROW_ID
			    , CLS_CD
			    , SEQ_NO
			    , SBJT
			    , BORD_DESC
			    , DEL_YN
			    , STND_YEAR
			    , TMS
			    , STND_YEAR||'/'||TMS STR
			    , DAY_ORD
			    , INST_ID                              			        	
			    , INST_DTM			        	
			    , UPDT_ID                              			        	
			    , UPDT_DTM
			FROM (SELECT    
			              ROWNUM ROW_ID
				        , CLS_CD
			            , SEQ_NO
			            , SBJT
			            , BORD_DESC
			            , DEL_YN
			            , STND_YEAR
			            , TMS
			            , DAY_ORD
			            , INST_ID                              			        	
			            , INST_DTM			        	
			            , UPDT_ID                              			        	
			            , UPDT_DTM		        	
			        FROM (SELECT 
			        	          CLS_CD
			                    , SEQ_NO
			                    , SBJT
			                    , BORD_DESC
			                    , DEL_YN
			                    , STND_YEAR
			                    , TMS
			                    , DAY_ORD
			                    , INST_ID                              			        	
			                    , TO_CHAR(INST_DTM,'YYYY-MM-DD') INST_DTM			        	
			                    , UPDT_ID                              			        	
			                    , TO_CHAR(UPDT_DTM,'YYYY-MM-DD') UPDT_DTM
			        		FROM TBEA_PROC_PROG_STTS
			        		WHERE DEL_YN 	= ?
							AND SBJT        LIKE NVL('%' || ? || '%', SBJT)
							AND BORD_DESC   LIKE NVL('%' || ? || '%', BORD_DESC)
							AND SEQ_NO		=    NVL(?				, SEQ_NO)
			        		
			        		ORDER BY SEQ_NO DESC)
			        )							
			WHERE ROW_ID <= 30
        ]]>
    </query>
    
    <query id="tbea_proc_prog_fa201" desc="SEQNOGETÄõ¸®" fetchSize="10">
        <![CDATA[
            SELECT
		             STND_YEAR
		           , MBR_CD
		           , TMS
                   , CLS_CD
                   , SEQ_NO
                   , SBJT
                   , BORD_DESC
                   , INST_ID                              			        	
                   , INST_DTM			        	
            FROM   (        
                        SELECT 
            		             STND_YEAR
            		           , MBR_CD
            		           , TMS
                               , CLS_CD
                               , SEQ_NO
                               , SBJT
                               , BORD_DESC
                               , INST_ID                              			        	
                               , TO_CHAR(INST_DTM,'YYYY-MM-DD') INST_DTM			        	
                        FROM   TBEA_PROC_PROG_STTS
                        WHERE  STND_YEAR = NVL(?, STND_YEAR)
                        AND    MBR_CD    = NVL(?, MBR_CD   )
                        AND    TMS       = NVL(?, TMS      )
                        AND    ?         = '001'
                        
                        UNION ALL
                        
                        SELECT 
            		             STND_YEAR
            		           , MBR_CD
            		           , TMS
                               , CLS_CD
                               , SEQ_NO
                               , SBJT
                               , BORD_DESC
                               , INST_ID                              			        	
                               , TO_CHAR(INST_DTM,'YYYY-MM-DD') INST_DTM			        	
                        FROM   TBEA_PROC_PROG_STTS
                        WHERE  TO_CHAR(INST_DTM,'YYYYMMDD') = NVL(?, TO_CHAR(INST_DTM,'YYYYMMDD'))
                        AND    ?         = '002'
                   )
            ORDER BY SEQ_NO DESC
        ]]>
    </query>
    
    <query id="tbea_proc_prog_ia001" desc="insert query" fetchSize="10">
        <![CDATA[    
			INSERT INTO TBEA_PROC_PROG_STTS (     
			          CLS_CD
			        , SEQ_NO
			        , SBJT
			        , BORD_DESC
			        , DEL_YN
			        , STND_YEAR
			        , TMS
			        , DAY_ORD
			        , INST_ID
			        , INST_DTM
			        , UPDT_ID
			        , UPDT_DTM  
			) VALUES (
			          ?                                                         --      CLS_CD   
			        , (SELECT NVL(MAX(SEQ_NO),0) + 1 FROM TBEA_PROC_PROG_STTS)  --      SEQ_NO   
			        , ?                                                         --      SBJT     
			        , ?                                                         --      BORD_DESC
			        , 'N'                                                       --      DEL_YN   
			        , ?                                                         --      STND_YEAR
			        , ?                                                         --      TMS      
			        , ?                                                         --      DAY_ORD  
			        , ?                                                         --      INST_ID  
			        , SYSDATE                                                   --      INST_DTM 
			        , ?                                                         --      UPDT_ID  
			        , SYSDATE                                                   --      UPDT_DTM 
			)    
        ]]>
    </query>
    
    
    <query id="tbea_proc_prog_ua001" desc="update query" fetchSize="10">
        <![CDATA[    
			UPDATE TBEA_PROC_PROG_STTS SET
			      SBJT          = ?
			    , BORD_DESC     = ?
			    , STND_YEAR     = ?
			    , TMS           = ?
			    , DAY_ORD       = ?
			    , UPDT_ID       = ?
			    , UPDT_DTM      = SYSDATE
			WHERE   SEQ_NO      = ?
        ]]>
    </query>    
    
    <query id="tbea_proc_prog_ua002" desc="update query" fetchSize="10">
        <![CDATA[    
			UPDATE TBEA_PROC_PROG_STTS SET
			      DEL_YN        = ?
			    , UPDT_ID       = ?
			    , UPDT_DTM      = SYSDATE
			WHERE   SEQ_NO      = ?
        ]]>
    </query>      
    
    
    
</queryMap>